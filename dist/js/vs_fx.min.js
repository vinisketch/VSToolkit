var vs_fx=function(t,i,e,s,n){"use strict";i=i&&i.hasOwnProperty("default")?i.default:i;var _="default"in n?n.default:n;function o(t){this.parent=i.EventSource,this.parent(),this.constructor=o,t&&(this._fsm=new i.Fsm(this),this._fsm.goTo=this.goTo,this._owner=t)}o.prototype={_delegate:null,_owner:null,_fsm:null,_initial_component:null,destructor:function(){this._owner&&(this._owner.__controller__=void 0,this._owner.remove=this._owner._ab_controller_remove,this._owner._ab_controller_remove=void 0),this._delegate=void 0,e.free(this._fsm),i.EventSource.prototype.destructor.call(this)},initComponent:function(){i.EventSource.prototype.initComponent.call(this),this._fsm&&this._fsm.init(),this._owner?this._owner.__controller__?console.error("The owner already use a controller"):(this._owner.__controller__=this,this._owner._ab_controller_remove=this._owner.remove,this._owner.remove=this.ab_controller_remove):console.error("Invalid vs.fx.Controller, owner is null vs.fx.Controller.id = '"+this._id+"'")},ab_controller_remove:function(t){t&&(state=this.__controller__._fsm._list_of_state[t.id],state?this.__controller__.remove(t):this._ab_controller_remove(t))},isStateExit:function(t){return!!this._fsm&&!!this._fsm._list_of_state[t]},add:function(t,i,e,s){return console.warn("vs.fx.Controller.add is deprecated. Use vs.fx.Controller.push"),this.push(t,i,e,s)},push:function(t,s,n,_){if(t&&this._fsm){s||(s={});var o,a,r=null;if(r=e.isString(t)&&s.id?s.id:!e.isString(t)&&t.id?t.id:i.createId(),!this.isStateExit(r)){if(this._fsm.addState(r),this._fsm._list_of_state[r].bindings={},_&&_.length)for(a=0;a<_.length;a++)(o=_[a])&&3===o.length?this.componentBind(r,o[0],o[1],o[2]):console.warn("vs.fx.Controller.push: invalid binding information");return this.setStateComponentInformation(r,t,n,s),r}}},remove:function(t){if(t&&this._owner&&this._fsm){var i=null;e.isString(t)?i=t:e.isString(t)||(i=t.id);var s=this._fsm._list_of_state[i];s&&s.comp&&this._owner._ab_controller_remove(s.comp),this._fsm.removeState(i)}},setStateComponentInformation:function(t,i,s,n){if(t&&this._fsm&&this._fsm.existState(t)&&i&&this._owner){n=n?e.clone(n):{};var _=this._fsm._list_of_state[t];_.init_data=n,e.isString(i)?(_.comp_name=i,_.comp=void 0):(_.comp_name="",_.comp=i,this._owner.isChild(i)||this._owner.add(i,s))}},addTransition:function(t,i,e,s,n){var _,o;if(t&&this._fsm&&this._fsm.existState(t)&&i&&this._fsm.existState(i)&&e){this._fsm.existInput(e)||this._fsm.addInput(e),this._fsm.addTransition(t,i,e);for(_ in this._fsm._list_of_state[t].transitionEvents)(o=this._fsm._list_of_state[t].transitionEvents[_]).to===i&&(o.animation_out=s,o.animation_in=n)}},_animateComponents:function(t,e,s,n,_,o){var a=this,r=function(){try{_&&_.call(a._owner),a._delegate&&a._delegate.animationDidEnd&&(console.warn("animationDidEnd is deprecated. Please use 'controllerAnimationDidEnd'."),a._delegate.animationDidEnd(a)),a._delegate&&a._delegate.controllerAnimationDidEnd&&a._delegate.controllerAnimationDidEnd(t,e,a)}catch(t){t.stack&&console.log(t.stack),console.error(t)}};i.scheduleAction(function(){!function(){try{if(e.show(),!n&&!s)return void r.call(a);if(o){if(n){var i=n.durations;n.durations="0s"}if(s){var _=s.durations;s.durations="0s"}}n&&!s?n.process(e,r,a):!n&&s?s.process(t,r,a):(n&&n.process(e,r,a),s&&s.process(t)),o&&(n&&(n.durations=i),s&&(s.durations=_))}catch(t){t.stack&&console.log(t.stack),console.error(t)}}()})},componentBind:function(t,i,e,s){if(this._fsm){var n,_=this._fsm._list_of_state[t];_&&((n=_.bindings[i])||(n=[],_.bindings[i]=n),n.push([e,s]),t===this._current_state&&_.comp.bind(i,e,s))}},refresh:function(){},getCurrentState:function(){if(this._fsm)return this._fsm._current_state},configureNewComponent:function(t){},_beforeStateEnter:function(t,i){if(t&&(t.comp_name||t.comp)){var e,s,n,_,o,a;if(t.comp||(t.comp=this._owner.createAndAddComponent(t.comp_name,t.init_data,t.extension),t.comp.configure(t.init_data),t.comp&&t.comp.propertiesDidChange&&t.comp.propertiesDidChange(),t.comp.propertyChange(),this.configureNewComponent(t.comp)),a=i,t.data_adaptation_func&&(a=t.data_adaptation_func(i)),a){for(_ in a)(t.comp.__lookupSetter__(_)||t.comp.hasOwnProperty(_))&&(t.comp[_]=a[_]);t.comp.propertyChange()}for(e in t.bindings)if(s=t.bindings[e])for(n=0;n<s.length;n++)(o=s[n])&&(o[1]?t.comp.bind(e,o[0],o[1]):t.comp.bind(e,o[0]))}},_beforeStateExit:function(t){if(t&&t.comp){var i,e,s,n;for(i in t.bindings)if(e=t.bindings[i])for(s=0;s<e.length;s++)(n=e[s])&&(n[1]?t.comp.unbind(i,n[0],n[1]):t.comp.bind(i,n[0]))}},goTo:function(t,i,s,n){var _,o,a=null;if(!t||!this._list_of_state[t])return console.warn("vs.fx.Controller.goTo unknown State id:"+t),!1;if(this._current_state&&(s&&(a=this._list_of_state[this._current_state].transitionEvents[s.on]),_=this._list_of_state[this._current_state],this.owner._beforeStateExit(_)),this._current_state=t,o=this._list_of_state[this._current_state],this.owner._beforeStateEnter(o,s?s.data:null),_&&_.comp&&_.comp.viewWillDisappear&&_.comp.viewWillDisappear(),o.comp.viewWillAppear&&o.comp.viewWillAppear(),a?this.owner._animateComponents(_.comp,o.comp,a.animation_out,a.animation_in,null,n):o.comp.show(),this.owner._delegate&&this.owner._delegate.controllerViewWillChange&&(_?this.owner._delegate.controllerViewWillChange(_.comp,o.comp,this.owner):this.owner._delegate.controllerViewWillChange(null,o.comp,this.owner)),i&&this._output_action[i]){var r=this._output_action[i];e.isFunction(r)?r.call(this._owner,s):e.isString(r)&&this._owner[this._output_action[i]](s)}return!0},notify:function(t,i){this._fsm&&t&&t.type&&this._fsm.fsmNotify(t.type,t.data,i)},clear:function(){this._fsm&&this._fsm.clear()}},e.extendClass(o,i.EventSource),e.defineClassProperties(o,{initialComponent:{set:function(t){this._fsm&&t?this._fsm.existState(t)&&(this._initial_component=t,this._fsm.initialState=t,this._fsm.goTo(t)):this._initial_component=void 0},get:function(){return this._initial_component}},delegate:{set:function(t){this._delegate=t}}});function a(t){this.parent=o,this.parent(t),this.constructor=a,arguments.length&&(this._fsm.addInput(a.NEXT),this._fsm.addInput(a.PRED),this._fsm.addInput(a.FIRST),this._states_array=new Array)}a.ANIMATION_DURATION=350,a.NEXT="next",a.PRED="pred",a.FIRST="first",a.LAST="last",a.prototype={_is_tactile:!1,_owner_handler_event_extended:!1,_owner_handler_event:null,_animation_duration:a.ANIMATION_DURATION,_last_comp_id:null,_states_array:null,__nb_panels:0,_view_size:null,destructor:function(){delete this._states_array,o.prototype.destructor.call(this)},initComponent:function(){o.prototype.initComponent.call(this),this.isTactile=this._is_tactile,this._updateViewSize()},push:function(t,i,e,s){if(t){i||(i={});var n=o.prototype.push.call(this,t,i,e,s);if(n){if(this._states_array.push(n),this.__nb_panels++,1===this.__nb_panels)return this.initialComponent=n,this._last_comp_id=n,n;if(this.addTransition(this._last_comp_id,n,a.NEXT),this.addTransition(n,this._last_comp_id,a.PRED),this.addTransition(n,this._initial_component,a.FIRST),this._last_state=n,this._last_comp_id===this._initial_state){if(state=this._fsm._list_of_state[n],!state)return void console.error("Unknown error in vs.fx.StackController.push");state.comp||(state.comp=this._owner.createAndAddComponent(state.comp_name,state.init_data,e),state.comp.configure(state.init_data),state.comp.setStyle("position","absolute"),state.comp&&state.comp.propertiesDidChange&&state.comp.propertiesDidChange(),state.comp.propertyChange()),state.comp.show()}return this._last_comp_id=n,n}}},_updateViewSize:function(){},remove:function(t){if(t){var i=null;e.isString(t)?i=t:e.isString(t)||(i=t.id);var s=this._states_array.findItem(i);if(-1!==s){this._fsm.removeTransitionTo(i,a.NEXT),this._fsm.removeTransitionFrom(i,a.PRED),this._fsm.removeTransitionFrom(i,a.FIRST),this._states_array.remove(s),this.__nb_panels--;this._fsm._list_of_state[i];if(0===s&&this.__nb_panels>0){this._initial_component=this._states_array[0];for(var n in this._states_array)n!==i&&n!==this._initial_component&&(this._fsm.removeTransitionFrom(n,a.FIRST),this.addTransition(n,this._initial_component,a.FIRST))}0===this.__nb_panels&&(this._initial_component=void 0,this._fsm._current_state=void 0),this._initial_component&&(this._fsm._current_state===i?0===s?this._fsm.goTo(this._initial_component):(s===this._states_array.length&&s--,this._fsm.goTo(this._states_array[s])):this._fsm.goTo(this._fsm._current_state)),o.prototype.remove.call(this,t)}}},orientationDidChange:function(t){this._updateViewSize()},goToViewId:function(t,i,e){var s=this._states_array.findItem(t);if(-1===s)return!1;this.goToViewAt(s,i,e)},goToViewAt:function(t,i,e){if(t<0)return!1;if(t>this._states_array.length)return!1;var s=this._states_array.findItem(this._fsm._current_state);if(s===t)return!0;var n=this._fsm._list_of_state[this._fsm._current_state];if(t>s){for(;s<t-1;)this._fsm.fsmNotify(a.NEXT,null,!0),s++;this._fsm.fsmNotify(a.NEXT,null,!0);var _=this._fsm._list_of_state[this._fsm._current_state];this._stackAnimateComponents(1,n.comp,_.comp,i,e)}else{for(;t+1<s;)this._fsm.fsmNotify(a.PRED,null,!0),s--;this._fsm.fsmNotify(a.PRED,null,!0);_=this._fsm._list_of_state[this._fsm._current_state];this._stackAnimateComponents(-1,n.comp,_.comp,i,e)}},_stackAnimateComponents:function(t,i,e,s,n){},_animateComponents:function(t,i,e,s,n,_){},goToNextView:function(t,i){var e=this._fsm._list_of_state[this._fsm._current_state],s=this._fsm.fsmNotify(a.NEXT,null,!0),n=this._fsm._list_of_state[this._fsm._current_state];return s&&this._stackAnimateComponents(1,e.comp,n.comp,t,i),s},goToPreviousView:function(t,i){var e=this._fsm._list_of_state[this._fsm._current_state],s=this._fsm.fsmNotify(a.PRED,null,!0),n=this._fsm._list_of_state[this._fsm._current_state];return s&&this._stackAnimateComponents(-1,e.comp,n.comp,t,i),s},goToFirstView:function(t,i,e){var s=this._fsm._list_of_state[this._fsm._current_state],n=this._fsm.fsmNotify(a.FIRST,null,!0),_=this._fsm._list_of_state[this._fsm._current_state];return n&&this._stackAnimateComponents(e||-1,s.comp,_.comp,t,i),n},goToLastView:function(t,i,e){var s=this._fsm._list_of_state[this._fsm._current_state],n=this._fsm.goTo(this._last_state,null,{on:a.LAST,data:null},i),_=this._fsm._list_of_state[this._fsm._current_state];return n&&this._stackAnimateComponents(e||1,s.comp,_.comp,t,i),n},handleEvent:function(t){}},e.extendClass(a,o),e.defineClassProperties(a,{viewSize:{set:function(t){t&&e.isArray(t)&&2===t.length&&e.isNumber(t[0])&&e.isNumber(t[1])&&(this._view_size||(this._view_size=[]),this._view_size[0]=t[0],this._view_size[1]=t[1],this._updateViewSize())},get:function(){return this._view_size?this._view_size.slice():this._owner.size}},isTactile:{set:function(t){if(t){if(this._is_tactile=!0,!this._owner||!this._owner.view)return;this._owner_handler_event_extended||(this._owner_handler_event=this._owner.handleEvent,this._owner.handleEvent=this.handleEvent,s.addPointerListener(this._owner.view,i.POINTER_START,this._owner,!1)),this._owner_handler_event_extended=!0}else{if(this._is_tactile=!1,!this._owner||!this._owner.view)return;this._owner_handler_event_extended&&(s.removePointerListener(this._owner.view,i.POINTER_START,this._owner,!1),this._owner.handleEvent=this._owner_handler_event,this._owner_handler_event_extended=!1)}},get:function(){return this._is_tactile}},animationDuration:{set:function(t){t||(t=0),e.isNumber(t)&&(this._animation_duration=t)}}});var r=i.createClass({parent:a,_direction:0,_transition_out:null,_transition_in:null,properties:{direction:{set:function(t){t!==r.LEFT_OUT&&t!==r.RIGHT_OUT&&t!==r.BOTTOM_OUT&&t!==r.TOP_OUT||(this._direction=t,this._updateViewSize())},get:function(){return this._direction}},animationDuration:{set:function(t){t||(t=0),e.isNumber(t)&&(this._animation_duration=t,this._transition_out&&(this._transition_out.duration=this._animation_duration+"ms"),this._transition_in&&(this._transition_in.duration=this._animation_duration+"ms"))}}},constructor:function(t){this._super(t),t&&(this._transition_out=new Animation(["translate","${x}%,${y}%,0"]),this._transition_out.x=0,this._transition_out.y=0,this._transition_in=new Animation(["translate","${x}%,${y}%,0"]),this._transition_in.x=0,this._transition_in.y=0,this.animationDuration=r.ANIMATION_DURATION),this._direction=r.RIGHT_OUT},_updateViewSize:function(){this._transition_out&&(this._direction===r.LEFT_OUT?(this._transition_out.x=-100,this._transition_out.y=0):this._direction===r.RIGHT_OUT?(this._transition_out.x=100,this._transition_out.y=0):this._direction===r.BOTTOM_OUT?(this._transition_out.x=0,this._transition_out.y=100):(this._transition_out.x=0,this._transition_out.y=-100))},push:function(t,i,e,s){if(t){i||(i={});var n=Controller.prototype.push.call(this,t,i,e,s);if(n){if(this._states_array.push(n),this.__nb_panels++,1===this.__nb_panels)return this.initialComponent=n,this._last_comp_id=n,n;if(this.addTransition(this._last_comp_id,n,a.NEXT),this.addTransition(n,this._last_comp_id,a.PRED),state=this._fsm._list_of_state[n],state)return this._last_comp_id===this._initial_component?(state.comp||(state.comp=this._owner.createAndAddComponent(state.comp_name,state.init_data,e),state.comp.configure(state.init_data),state.comp.setStyle("position","absolute"),state.comp&&state.comp.propertiesDidChange&&state.comp.propertiesDidChange(),state.comp.propertyChange()),state.comp.show(),state.comp.setStyle("z-index",this.__nb_panels),this.configureNewComponent(state.comp)):state.comp&&(state.comp.setStyle("z-index",this.__nb_panels),this.configureNewComponent(state.comp)),this._last_comp_id=n,n;console.error("Unknown error in vs.fx.CardController.push")}}},configureNewComponent:function(t){var i;i=e.SUPPORT_3D_TRANSFORM?"translate3d":"translate",this._direction===r.LEFT_OUT?i+="(-100%,0":this._direction===r.RIGHT_OUT?i+="(100%,0":this._direction===r.BOTTOM_OUT?i+="(0,100%":i+="(0,-100%",e.SUPPORT_3D_TRANSFORM?i+=",0)":i+=")",t.view.style.webkitTransitionDuration="0",e.setElementTransform(t.view,i)},handleEvent:function(t){var n,_,o,a,h,l=!1;t.type===i.POINTER_START?(this.__controller__._direction===r.LEFT_OUT||this.__controller__._direction===r.RIGHT_OUT?t.changedTouches?this.__pos=t.changedTouches[0].clientX:this.__pos=t.clientX:t.changedTouches?this.__pos=t.changedTouches[0].clientY:this.__pos=t.clientY,s.addPointerListener(document,i.POINTER_END,this,!0),s.addPointerListener(document,i.POINTER_MOVE,this,!0)):t.type===i.POINTER_MOVE?(t.preventDefault(),n=this.__controller__._fsm._list_of_state[this.__controller__._fsm._current_state],(h=this.__controller__._states_array.indexOf(this.__controller__._fsm._current_state))>0&&(_=this.__controller__._states_array[h-1]),this.__controller__._direction===r.LEFT_OUT||this.__controller__._direction===r.RIGHT_OUT?(t.changedTouches?this.__delta=t.changedTouches[0].clientX-this.__pos:this.__delta=t.clientX-this.__pos,a=e.SUPPORT_3D_TRANSFORM?"translate3d("+this.__delta+"px,0px,0)":"translate("+this.__delta+"px,0px)"):(t.changedTouches?this.__delta=t.changedTouches[0].clientY-this.__pos:this.__delta=t.clientY-this.__pos,a=e.SUPPORT_3D_TRANSFORM?"translate3d(0px,"+this.__delta+"px,0)":"translate(0px,"+this.__delta+"px)"),this.__controller__._direction===r.LEFT_OUT||this.__controller__._direction===r.TOP_OUT?this.__delta<0?(n.comp.view.style.webkitTransitionDuration=0,e.setElementTransform(n.comp.view,a)):_&&(o=this.__controller__._fsm._list_of_state[_])&&o.comp&&(a=this.__controller__._direction===r.LEFT_OUT||this.__controller__._direction===r.RIGHT_OUT?e.SUPPORT_3D_TRANSFORM?"translate3d("+(this.__delta-this._size[0])+"px,0px,0)":"translate("+(this.__delta-this._size[0])+"px,0px)":e.SUPPORT_3D_TRANSFORM?"translate3d(0px,"+(this.__delta-this._size[1])+"px,0)":"translate(0px,"+(this.__delta-this._size[1])+"px)",o.comp.view.style.webkitTransitionDuration=0,e.setElementTransform(o.comp.view,a)):this.__delta>0?(n.comp.view.style.webkitTransitionDuration=0,e.setElementTransform(n.comp.view,a)):_&&(o=this.__controller__._fsm._list_of_state[_])&&o.comp&&(a=this.__controller__._direction===r.LEFT_OUT||this.__controller__._direction===r.RIGHT_OUT?e.SUPPORT_3D_TRANSFORM?"translate3d("+(this._size[0]+this.__delta)+"px,0px,0)":"translate("+(this._size[0]+this.__delta)+"px,0px)":e.SUPPORT_3D_TRANSFORM?"translate3d(0px,"+(this._size[1]+this.__delta)+"px,0)":"translate(0px,"+(this._size[1]+this.__delta)+"px)",o.comp.view.style.webkitTransitionDuration=0,e.setElementTransform(o.comp.view,a))):t.type===i.POINTER_END&&(n=this.__controller__._fsm._list_of_state[this.__controller__._fsm._current_state],this.__controller__._direction===r.LEFT_OUT||this.__controller__._direction===r.TOP_OUT?this.__delta>50?l=this.__controller__.goToPreviousView():this.__delta<-50&&(l=this.__controller__.goToNextView()):this.__delta>50?l=this.__controller__.goToNextView():this.__delta<-50&&(l=this.__controller__.goToPreviousView()),l||((h=this.__controller__._states_array.indexOf(this.__controller__._fsm._current_state))>0&&(_=this.__controller__._states_array[h-1]),(this.__controller__._direction===r.LEFT_OUT||this.__controller__._direction===r.TOP_OUT)&&this.__delta<0?(a=e.SUPPORT_3D_TRANSFORM?"translate3d(0,0,0)":"translate(0,0)",n.comp.view.style.webkitTransitionDuration=this.__controller__._animation_duration+"ms",e.setElementTransform(n.comp.view,a)):(this.__controller__._direction===r.RIGHT_OUT||this.__controller__._direction===r.BOTTOM_OUT)&&this.__delta>0?(a=e.SUPPORT_3D_TRANSFORM?"translate3d(0,0,0)":"translate(0,0)",n.comp.view.style.webkitTransitionDuration=this.__controller__._animation_duration+"ms",e.setElementTransform(n.comp.view,a)):_&&(o=this.__controller__._fsm._list_of_state[_])&&o.comp&&(a=e.SUPPORT_3D_TRANSFORM?"translate3d":"translate",a=this.__controller__._direction===r.LEFT_OUT?"(-100%,0px":this.__controller__._direction===r.RIGHT_OUT?"(100%,0px":this.__controller__._direction===r.BOTTOM_OUT?"(0px,100%":"(0px,-100%",e.SUPPORT_3D_TRANSFORM?a+=",0)":a+=")",o.comp.view.style.webkitTransitionDuration=this.__controller__._animation_duration+"ms",e.setElementTransform(o.comp.view,a))),s.removePointerListener(document,i.POINTER_END,this,!0),s.removePointerListener(document,i.POINTER_MOVE,this,!0))},_stackAnimateComponents:function(t,e,s,n,_){var o,a,r,h;t>0?(o=this._transition_in,h=s):(o=this._transition_out,a=this._transition_in,h=e),a&&(r=a.durations,a.durations="0s");var l=this,c=function(){e.hide();try{l._delegate&&l._delegate.controllerAnimationDidEnd&&l._delegate.controllerAnimationDidEnd(e,s,l),n&&n.call(this.owner)}catch(t){t.stack&&console.log(t.stack),console.error(t)}},p=function(){a&&(a.durations=r);try{if(s.show(),_){var t=o.durations;o.durations="0s"}o.process(h,c,l),_&&(o.durations=t)}catch(t){t.stack&&console.log(t.stack),console.error(t)}};a?a.process(s,function(){i.scheduleAction(function(){p()})}):p()}});r.ANIMATION_DURATION=300,r.LEFT_OUT=0,r.RIGHT_OUT=1,r.TOP_OUT=2,r.BOTTOM_OUT=3;function h(t,i){this.parent=a,this.parent(t,i),this.constructor=h,t&&t.setStyle("-webkit-transform-style","preserve-3d")}h._translate_animation=new n.RotateXYZAnimation(-90,0,0),h._translate_animation.init(),h._translate_animation.addKeyFrame("from",{degX:0}),h._translate_animation.addKeyFrame(50,{degX:-92}),h._translate_animation.addKeyFrame(70,{degX:-84}),h._translate_animation.addKeyFrame(80,{degX:-90}),h._translate_animation.addKeyFrame(95,{degX:-88}),h._translate_animation.durations="2s",h.HORIZONTAL=0,h.VERTICAL=1,h.prototype={_orientation:h.HORIZONTAL,push:function(t,i,s){if(t){if(!e.isString(t)){var n=this._states_array.length;t.position=[0,0],t.setStyle("z-index",1e3-n)}return a.prototype.push.call(this,t,i,s)}},handleEvent:function(t){var n,_,o,a,r,l=!1;t.type===i.POINTER_START?(this.__layer._orientation===h.HORIZONTAL?t.changedTouches?this.__pos=t.changedTouches[0].clientX:this.__pos=t.clientX:t.changedTouches?this.__pos=t.changedTouches[0].clientY:this.__pos=t.clientY,s.addPointerListener(document,i.POINTER_END,this,!0),s.addPointerListener(document,i.POINTER_MOVE,this,!0),this.animationDuration=0):t.type===i.POINTER_MOVE?(t.preventDefault(),n=this.__layer._list_of_state[this.__layer._current_state],(r=this.__layer._states_array.indexOf(this.__layer._current_state))>0&&(_=this.__layer._states_array[r-1]),this.__layer._orientation===h.HORIZONTAL?(t.changedTouches?this.__delta=t.changedTouches[0].clientX-this.__pos:this.__delta=t.clientX-this.__pos,a=e.SUPPORT_3D_TRANSFORM?"translate3d("+this.__delta+"px,0px,0)":"translate("+this.__delta+"px,0px)"):(t.changedTouches?this.__delta=t.changedTouches[0].clientY-this.__pos:this.__delta=t.clientY-this.__pos,a=e.SUPPORT_3D_TRANSFORM?"translate3d(0px,"+this.__delta+"px,0)":"translate(0px,"+this.__delta+"px)"),this.__delta<0?(n.comp.view.style.webkitTransitionDuration=0,e.setElementTransform(n.comp.view,a)):_&&(o=this.__layer._list_of_state[_])&&o.comp&&(a=this.__layer._orientation===h.HORIZONTAL?e.SUPPORT_3D_TRANSFORM?"translate3d("+(this.__delta-this._size[0])+"px,0px,0)":"translate("+(this.__delta-this._size[0])+"px,0px)":e.SUPPORT_3D_TRANSFORM?"translate3d(0px,"+(this.__delta-this._size[1])+"px,0)":"translate(0px,"+(this.__delta-this._size[1])+"px)",o.comp.view.style.webkitTransitionDuration=0,e.setElementTransform(o.comp.view,a))):t.type===i.POINTER_END&&(n=this.__layer._list_of_state[this.__layer._current_state],this.__delta>50?l=this.__layer.goToPreviousView():this.__delta<-50&&(l=this.__layer.goToNextView()),l||((r=this.__layer._states_array.indexOf(this.__layer._current_state))>0&&(_=this.__layer._states_array[r-1]),this.__delta<0?(a=e.SUPPORT_3D_TRANSFORM?"translate3d(0,0,0)":"translate(0,0)",n.comp.view.style.webkitTransitionDuration=this.__layer._animation_duration+"ms",e.setElementTransform(n.comp.view,a)):_&&(o=this.__layer._list_of_state[_])&&o.comp&&(a=this.__layer._orientation===h.HORIZONTAL?e.SUPPORT_3D_TRANSFORM?"translate3d("+this._size[0]+"px,0px,0)":"translate("+this._size[0]+"px,0px)":e.SUPPORT_3D_TRANSFORM?"translate3d(0px,-"+this._size[1]+"px,0)":"translate(0px,-"+this._size[1]+"px)",o.comp.view.style.webkitTransitionDuration=this.__layer._animation_duration+"ms",e.setElementTransform(o.comp.view,a))),s.removePointerListener(document,i.POINTER_END,this,!0),s.removePointerListener(document,i.POINTER_MOVE,this,!0))},goTo:function(t,i,s){var n,_=this._states_array.indexOf(t),o=this._list_of_state[this._current_state];if(a.prototype.goTo.call(this,t,i,s),t&&(this.owner.animationDuration=this._animation_duration,(n=this._list_of_state[this._current_state]).comp.setStyle("position","absolute"),n.comp.position=[0,0],n.comp.setStyle("z-index",1e3-_),o&&n&&(o.comp.setStyle("-webkit-transform","scale3d(.835,.835,.835) translateZ(200px)"),n.comp.setStyle("-webkit-transform","scale3d(.835,.835,.835) rotateX(90deg) translateZ(200px)")),_>0&&l.call(this,_-1),_<this._states_array.length-1&&l.call(this,_+1),s&&s.on===a.NEXT&&o?(this._orientation,h.HORIZONTAL,h._translate_animation.process(this.owner)):s&&s.on===a.PRED&&n&&(h._translate_animation.x=0,h._translate_animation.y=0,h._translate_animation.process(n.comp)),i&&this._output_action[i])){var r=this._output_action[i];e.isFunction(r)?r.call(this.owner,s):e.isString(r)&&this.owner[this._output_action[i]](s)}function l(t){var i=this._states_array[t],e=this._list_of_state[i];e&&(e.comp||(e.comp=this.owner.createAndAddComponent(e.comp_name,e.init_data,e.extension),e.comp.configure(e.init_data),e.comp.style("position","absolute"),e.comp&&e.comp.propertiesDidChange&&e.comp.propertiesDidChange(),e.comp.propertyChange()),e.view?__setPos(e.view,0,0):e.comp.position=[0,0],e.comp.show(),e.comp.style("z-index",1e3-t))}}},e.extendClass(h,a);function l(t,i,e){this.parent=o,this.parent(t),this.constructor=l,arguments.length&&(e==l.NO_ANIMATION||e==l.CARD_ANIMATION||e==l.SLIDE_ANIMATION?this._animation_type=e:this._animation_type=l.DEFAULT_ANIMATION,this.setNavigationBar(i),this.__nav_bar_states={})}l.NO_ANIMATION=0,l.CARD_ANIMATION=1,l.SLIDE_ANIMATION=2,l.DEFAULT_ANIMATION=l.SLIDE_ANIMATION,l.BACK="back",l.prototype={_nav_bar:null,__nav_bar_states:null,_animation_type:l.DEFAULT_ANIMATION,destructor:function(){o.prototype.destructor.call(this)},initComponent:function(){o.prototype.initComponent.call(this);this._owner.size;this.__translate_in_right=new TranslateAnimation(0),this.__translate_out_right=new Animation(["translate","100%,0,0"]),this.__translate_out_left=new Animation(["translate","-100%,0,0"]),this.__translate_in_left=new TranslateAnimation(0)},setNavigationBar:function(t){!t||!t instanceof ui.NavigationBar||(this._nav_bar=t)},_updateViewSize:function(){},push:function(t,i,e){if(t){i||(i={});var s=o.prototype.push.call(this,t,i,null,e);if(s){var n=this._fsm._list_of_state[s];return n&&n.comp&&this.configureNewComponent(n.comp),s}}},configureNavigationBarState:function(t,s){var n,o,a,r,h=[],l={};if(this._fsm._list_of_state[t]&&s){for(o=0,a=s.length;o<a;o++)(r=s[o])&&(n=r.comp)&&(e.isString(n)&&(n=i.VSObject._obs[n]),!n instanceof _.View||(h.push(n),r.properties&&(l[n.id]=r.properties)));this.__nav_bar_states[t]=l,this._nav_bar&&this._nav_bar.setStateItems(t,h)}},configureTransition:function(t,i,e){t&&this._fsm.existState(t)&&i&&this._fsm.existState(i)&&e&&(this._fsm.existInput(e)||this._fsm.addInput(e),this._animation_type===l.SLIDE_ANIMATION?(this.addTransition(t,i,e,this.__translate_out_left,this.__translate_in_right),this.addTransition(i,t,l.BACK,this.__translate_out_right,this.__translate_in_left),this.__translate_in_left.duration="300ms",this.__translate_out_left.duration="300ms",this.__translate_in_right.duration="300ms",this.__translate_out_right.duration="300ms"):this._animation_type===l.CARD_ANIMATION?(this.addTransition(t,i,e,null,this.__translate_in_right),this.addTransition(i,t,l.BACK,this.__translate_out_right,null),this.__translate_in_right.duration="300ms",this.__translate_out_right.duration="300ms"):(this.addTransition(t,i,e,null,this.__translate_in_right),this.addTransition(i,t,l.BACK,this.__translate_out_right,null),this.__translate_in_right.duration="0",this.__translate_out_right.duration="0"))},configureNewComponent:function(t){var i=this.__translate_out_right;i.duration;i.process(t,null,null,!0)},goTo:function(t,i,e,s){o.prototype.goTo.call(this,t,i,e,s)&&this.owner._nav_bar&&this.owner._nav_bar.changeState(t,this.owner.__nav_bar_states[t])},_animateComponents:o.prototype._animateComponents},e.extendClass(l,a),e.defineClassProperties(l,{viewSize:{set:function(t){t&&e.isArray(t)&&2===t.length&&e.isNumber(t[0])&&e.isNumber(t[1])&&(this._view_size||(this._view_size=[]),this._view_size[0]=t[0],this._view_size[1]=t[1],this._updateViewSize())},get:function(){return this._view_size?this._view_size.slice():this._owner.size}},initialComponent:{set:function(t){if(t){if(this._fsm.existState(t)){this._initial_component=t,this._fsm.initialState=t,this._fsm.goTo(t);var i=this._fsm._list_of_state[t],e=this.__translate_in_right;e.duration;i&&i.comp&&e.process(i.comp,null,null,!0)}}else this._initial_component=void 0},get:function(){return this._initial_component}}});function c(t,i){this.parent=a,this.parent(t,i),this.constructor=c,this.animationDuration=c.ANIMATION_DURATION}c._opacity_animation=new n.OpacityAnimation(1),c._opacity_animation.init(),c._opacity_animation.durations="0.2s",c.ANIMATION_DURATION=500,c.prototype={push:function(t,i,s){if(t){if(!e.isString(t)){var n=this._states_array.length;t.position=[0,0],t.setStyle("z-index",1e3-n)}a.prototype.push.call(this,t,i,s)}},goTo:function(t,i,s){var n,_=this._states_array.indexOf(t),o=this._list_of_state[this._current_state];if(a.prototype.goTo.call(this,t,i,s),t&&((n=this._list_of_state[this._current_state]).comp.setStyle("position","absolute"),n.comp.position=[0,0],n.comp.setStyle("z-index",1e3-_),_>0&&h.call(this,_-1),_<this._states_array.length-1&&h.call(this,_+1),s&&s.on===a.NEXT&&o?(c._opacity_animation.value=0,c._opacity_animation.process(o.comp)):s&&s.on===a.PRED&&n&&(c._opacity_animation.value=1,c._opacity_animation.process(n.comp)),i&&this._output_action[i])){var r=this._output_action[i];e.isFunction(r)?r.call(this.owner,s):e.isString(r)&&this.owner[this._output_action[i]](s)}function h(t){var i=this._states_array[t],e=this._list_of_state[i];e&&(e.comp||(e.comp=this.owner.createAndAddComponent(e.comp_name,e.init_data,e.extension),e.comp.configure(e.init_data),e.comp.setStyle("position","absolute"),e.comp&&e.comp.propertiesDidChange&&e.comp.propertiesDidChange(),e.comp.propertyChange()),e.view?__setPos(e.view,0,0):e.comp.position=[0,0],e.comp.show(),e.comp.setStyle("z-index",1e3-t))}}},e.extendClass(c,a),e.defineClassProperty(c,"animationDuration",{set:function(t){t||(t=0),e.isNumber(t)&&(this._animation_duration=t,c._opacity_animation.durations=t/1e3+"s")}});var p=i.createClass({parent:a,_delta:0,_orientation:0,_transition_out_left:null,_transition_out_right:null,_transition_in:null,_animation_mode:0,properties:{orientation:{set:function(t){t!==p.HORIZONTAL&&t!==p.VERTICAL||(this._orientation=t,this._updateViewSize())},get:function(){return this._orientation}},animationDuration:{set:function(t){t||(t=0),e.isNumber(t)&&(this._animation_duration=t,this._transition_out_left.duration=this._animation_duration+"ms",this._transition_out_right.duration=this._animation_duration+"ms",this._transition_in.duration=this._animation_duration+"ms")}},animationMode:{set:function(t){t||(t=0),t!==p.POURCENTAGE&&t!==p.PIXEL||this._animation_mode!==t&&(this._animation_mode=t,e.free(this._transition_out_right),e.free(this._transition_out_left),this._setUpAnimations(),this._updateViewSize())}}},constructor:function(t){this._super(t),this._orientation=p.HORIZONTAL,arguments.length&&(this._setUpAnimations(),this._transition_in=new Animation(["translate","0,0,0"]),this.animationDuration=p.ANIMATION_DURATION)},_setUpAnimations:function(){switch(this._animation_mode){case p.POURCENTAGE:this._transition_out_left=new Animation(["translate","${x}%,${y}%,0"]),this._transition_out_right=new Animation(["translate","${x}%,${y}%,0"]);break;case p.PIXEL:this._transition_out_left=new Animation(["translate","${x}px,${y}px,0"]),this._transition_out_right=new Animation(["translate","${x}px,${y}px,0"])}this._transition_out_left.x=0,this._transition_out_left.y=0,this._transition_out_left.duration=this._animation_duration+"ms",this._transition_out_right.duration=this._animation_duration+"ms"},_updateViewSize:function(){var t,i,s,n,_,o;switch(this._animation_mode){case p.POURCENTAGE:_=100,delta_str=_+"%";break;case p.PIXEL:o=this._owner.size,this._orientation===p.HORIZONTAL?_=o[0]:this._orientation===p.VERTICAL&&(_=o[1]),delta_str=_+"px"}for(this._orientation===p.HORIZONTAL?(this._transition_out_left.x=-_,this._transition_out_left.y=0,this._transition_out_right.x=_,this._transition_out_right.y=0):this._orientation===p.VERTICAL&&(this._transition_out_left.x=0,this._transition_out_left.y=-_,this._transition_out_right.x=0,this._transition_out_right.y=_),this._orientation===p.HORIZONTAL?n="translate3D(-"+delta_str+",0,0)":this._orientation===p.VERTICAL&&(n="translate3D(0,-"+delta_str+",0)"),t=0;t<this._states_array.length;t++)i=this._states_array[t],(s=this._fsm._list_of_state[i])&&s.comp&&(this._fsm._current_state!==i?(s.comp.view.style.webkitTransitionDuration="0",e.setElementTransform(s.comp.view,n)):(this._orientation===p.HORIZONTAL?n="translate3D("+delta_str+",0,0)":this._orientation===p.VERTICAL&&(n="translate3D(0,"+delta_str+",0)"),s.comp.view.style.webkitTransitionDuration="0",e.setElementTransform(s.comp.view,"translate3D(0,0,0)")))},push:function(t,i,e,s){if(t){i||(i={});var n=Controller.prototype.push.call(this,t,i,e,s);if(n){if(this._states_array.push(n),this.__nb_panels++,1===this.__nb_panels)return this.initialComponent=n,this._last_comp_id=n,n;if(this.addTransition(this._last_comp_id,n,a.NEXT),this.addTransition(n,this._last_comp_id,a.PRED),state=this._fsm._list_of_state[n],state)return this._last_comp_id===this._initial_component?(state.comp||(state.comp=this._owner.createAndAddComponent(state.comp_name,state.init_data,e),state.comp.configure(state.init_data),state.comp.setStyle("position","absolute"),state.comp&&state.comp.propertiesDidChange&&state.comp.propertiesDidChange(),state.comp.propertyChange()),state.comp.show(),state.comp.setStyle("z-index",this.__nb_panels),this.configureNewComponent(state.comp)):state.comp&&(state.comp.setStyle("z-index",this.__nb_panels),this.configureNewComponent(state.comp)),this._last_comp_id=n,n;console.error("Unknown error in vs.fx.StackController.push")}}},configureNewComponent:function(t){var i,s,n;switch(this._animation_mode){case p.POURCENTAGE:s="100%";break;case p.PIXEL:n=this._owner.size,this._orientation===p.HORIZONTAL?s=n[0]+"px":this._orientation===p.VERTICAL&&(s=n[1]+"px")}this._orientation===p.HORIZONTAL?i="translate3D("+s+",0,0)":this._orientation===p.VERTICAL&&(i="translate3D(0,"+s+",0)"),t.view.style.webkitTransitionDuration="0",e.setElementTransform(t.view,i),t.hide()},handleEvent:function(t){var e=!1,s=this.size,n=this.__controller__._animation_duration;t.type===i.POINTER_START?(this.__controller__._orientation===p.HORIZONTAL?t.changedTouches?this.__pos=t.changedTouches[0].clientX:this.__pos=t.clientX:t.changedTouches?this.__pos=t.changedTouches[0].clientY:this.__pos=t.clientY,vs.addPointerListener(document,i.POINTER_END,this,!0),vs.addPointerListener(document,i.POINTER_MOVE,this,!0),this.animationDuration=0,this.__delta=0):t.type===i.POINTER_MOVE?(t.preventDefault(),this.__controller__._orientation===p.HORIZONTAL?t.changedTouches?this.__delta=t.changedTouches[0].clientX-this.__pos:this.__delta=t.clientX-this.__pos:t.changedTouches?this.__delta=t.changedTouches[0].clientY-this.__pos:this.__delta=t.clientY-this.__pos):t.type===i.POINTER_END&&(this.__delta>50?e=this.__controller__.goToPreviousView():this.__delta<-50&&(e=this.__controller__.goToNextView()),e||(this.__controller__._orientation===p.HORIZONTAL?(n=Math.floor(n*this.__delta/s[0]),this.animationDuration=n):(n=Math.floor(n*this.__delta/s[1]),this.animationDuration=n)),vs.removePointerListener(document,i.POINTER_END,this,!0),vs.removePointerListener(document,i.POINTER_MOVE,this,!0))},refresh:function(){a.prototype.refresh.call(this),this._updateViewSize()},_stackAnimateComponents:function(t,e,s,n,_){var o,a,r,h=this._transition_in;t>0?(a=this._transition_out_right,o=this._transition_out_left):(a=this._transition_out_left,o=this._transition_out_right),r=a.durations,a.durations="0s";var l=this,c=function(){e.hide();try{l._delegate&&l._delegate.controllerAnimationDidEnd&&l._delegate.controllerAnimationDidEnd(e,s,l),n&&n.call(l._owner)}catch(t){t.stack&&console.log(t.stack),console.error(t)}};a.process(s,function(){i.scheduleAction(function(){!function(){a.durations=r;try{s.show(),s.refresh(),i.scheduleAction(function(){if(_){var t=h.durations;h.durations="0s";var i=o.durations;o.durations="0s"}h.process(s,c,l),o.process(e),_&&(h.durations=t,o.durations=i)})}catch(t){t.stack&&console.log(t.stack),console.error(t)}}()})})}});p.ANIMATION_DURATION=300,p.HORIZONTAL=0,p.VERTICAL=1,p.POURCENTAGE=0,p.PIXEL=1;var m=i.createClass({parent:a,_is_circular:!1,_is_continuous_swipe:!1,__delta:0,__current_pos:0,_orientation:0,properties:{orientation:{set:function(t){t!==m.HORIZONTAL&&t!==m.VERTICAL||(this._orientation=t,this._updateViewSize())},get:function(){return this._orientation}},isTactile:{set:function(t){if(t){if(this._is_tactile=!0,!this._owner||!this._owner.view)return;this._owner_handler_event_extended||this.__drag_recognizer||(this.__drag_recognizer=new ui.DragRecognizer(this),this._owner.addPointerRecognizer(this.__drag_recognizer)),this._owner_handler_event_extended=!0}else{if(this._is_tactile=!1,!this._owner||!this._owner.view)return;this._owner_handler_event_extended&&(this.__drag_recognizer&&(this._owner.removePointerRecognizer(this.__drag_recognizer),this.__drag_recognizer=null),this._owner_handler_event_extended=!1)}},get:function(){return this._is_tactile}},isCircular:{set:function(t){this._is_circular=!!t},get:function(){return this._is_circular}},isContinuousSwipe:{set:function(t){this._is_continuous_swipe=!!t},get:function(){return this._is_continuous_swipe}}},constructor:function(t){this._super(t),this._orientation=m.HORIZONTAL,arguments.length&&(this.animationDuration=m.ANIMATION_DURATION)},_updateViewSize:function(){var t,i,e,s,n=this._owner.size;for(this._orientation===m.HORIZONTAL?s=n[0]:this._orientation===m.VERTICAL&&(s=n[1]),t=0;t<this._states_array.length;t++)i=this._states_array[t],(e=this._fsm._list_of_state[i])&&e.comp&&(this._orientation===m.HORIZONTAL?e.comp.translate(s*t,0,0):this._orientation===m.VERTICAL&&e.comp.translate(0,s*t,0))},push:function(t,i,e,s){if(t){i||(i={});var n=Controller.prototype.push.call(this,t,i,e,s);if(n){if(this._states_array.push(n),this.__nb_panels++,1===this.__nb_panels)return this.initialComponent=n,this._last_comp_id=n,n;if(this.addTransition(this._last_comp_id,n,a.NEXT),this.addTransition(n,this._last_comp_id,a.PRED),this.addTransition(n,this._initial_component,a.FIRST),this._last_state=n,state=this._fsm._list_of_state[n],state)return this._last_comp_id===this._initial_component?(state.comp||(state.comp=this._owner.createAndAddComponent(state.comp_name,state.init_data,e),state.comp.configure(state.init_data),state.comp.setStyle("position","absolute"),state.comp&&state.comp.propertiesDidChange&&state.comp.propertiesDidChange(),state.comp.propertyChange()),state.comp.show(),state.comp.setStyle("z-index",this.__nb_panels),this.configureNewComponent(state.comp)):state.comp&&(state.comp.setStyle("z-index",this.__nb_panels),this.configureNewComponent(state.comp)),this._last_comp_id=n,n;console.error("Unknown error in vs.fx.StackController.push")}}},configureNewComponent:function(t){var i=this._owner.size;this._orientation===m.HORIZONTAL?state.comp.translate(i[0]*(this.__nb_panels-1),0,0):this._orientation===m.VERTICAL&&state.comp.translate(0,i[1]*(this.__nb_panels-1),0)},didDrag:function(t,i){if(this._orientation===m.HORIZONTAL?this.__delta=t.dx:this.__delta=t.dy,this._is_continuous_swipe){var s=this._owner._holes.children;s.style.webkitTransitionDuration="0ms",e.setElementTransform(s,"translate3D("+(this.__delta+this.__current_pos)+"px,0,0)")}},didDragEnd:function(){var t=this;function i(){var i=t._owner._holes.children;i.style.webkitTransitionDuration=t._animation_duration+"ms",t._orientation===m.HORIZONTAL?e.setElementTransform(i,"translate3D("+t.__current_pos+"px,0,0)"):e.setElementTransform(i,"translate3D(0,"+t.__current_pos+"px,0)")}this.__delta>50?(!this._fsm.getAccessibleStateOn(a.PRED)&&this._is_circular?this.goToLastView(null,null,-1):this.goToPreviousView())||i():this.__delta<-50?(!this._fsm.getAccessibleStateOn(a.NEXT)&&this._is_circular?this.goToFirstView(null,null,1):this.goToNextView())||i():this._is_continuous_swipe&&i()},refresh:function(){a.prototype.refresh.call(this),this._updateViewSize()},_stackAnimateComponents:function(t,s,n,_,o){var a=this._owner.size,r=this._owner._holes.children,h=this._states_array.indexOf(n.id);r.style.webkitTransitionDuration="0ms",this._orientation===m.HORIZONTAL?this.__current_pos=h*-a[0]:this.__current_pos=h*-a[1];var l=this;!function(){try{n.show(),n.refresh(),i.scheduleAction(function(){r.style.webkitTransitionDuration=o?"0ms":l._animation_duration+"ms",l._orientation===m.HORIZONTAL?e.setElementTransform(r,"translate3D("+l.__current_pos+"px,0,0)"):e.setElementTransform(r,"translate3D(0,"+l.__current_pos+"px,0)")})}catch(t){t.stack&&console.log(t.stack),console.error(t)}}()}});return e.extend(m.prototype,n.RecognizerManager),m.ANIMATION_DURATION=300,m.HORIZONTAL=0,m.VERTICAL=1,m.PIXEL=1,t.CardController=r,t.Controller=o,t.CubicController=h,t.NavigationController=l,t.OpacityController=c,t.SlideController=p,t.StackController=a,t.SwipeController=m,t}({},vs_core,vs_utils,vs_gesture,vs_ui);
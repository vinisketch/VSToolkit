!function(t,e){function n(t){return c.CSS_VENDOR?"-"+c.CSS_VENDOR.toLowerCase()+"-"+t:t}function s(t){this.parent=u.Task,this.parent(),this.constructor=s,arguments.length&&(this.setAnimations(arguments),this.keyFrames["100%"]=this)}function o(t){this.parent=u.EventSource,this.parent(),this.constructor=o,t&&(this._fsm=new u.Fsm(this),this._fsm.goTo=this.goTo,this._owner=t)}function a(t,i){this.parent=l,this.parent(t,i),this.constructor=a,t&&t.setStyle("-webkit-transform-style","preserve-3d")}function r(t,i,e){this.parent=o,this.parent(t),this.constructor=r,arguments.length&&(e==r.NO_ANIMATION||e==r.CARD_ANIMATION||e==r.SLIDE_ANIMATION?this._animation_type=e:this._animation_type=r.DEFAULT_ANIMATION,this.setNavigationBar(i),this.__nav_bar_states={})}function _(t,i){this.parent=l,this.parent(t,i),this.constructor=_,this.animationDuration=_.ANIMATION_DURATION}function l(t){this.parent=o,this.parent(t),this.constructor=l,arguments.length&&(this._fsm.addInput(l.NEXT),this._fsm.addInput(l.PRED),this._fsm.addInput(l.FIRST),this._states_array=new Array)}var h=t.document,c=t.vs,p=c.util,u=c.core,m=c.ui,d=c.fx,f=p.setElementTransform,g=(p.getElementTransform,c.SUPPORT_3D_TRANSFORM);c.CSS_VENDOR;var T=n("animation-duration"),y=n("animation-delay"),w=n("animation-name"),v=n("animation-timing-function"),A=n("animation-fill-mode"),N=n("transition-duration"),O=n("transition-delay"),I=n("transition-timing-function"),x=n("transition-property"),E=n("transform-origin"),S=n("animation-iteration-count"),R=n("transform"),C=n("keyframes"),D="animationend",b="transitionend";"webkit"===c.CSS_VENDOR?(D="webkitAnimationEnd",b="webkitTransitionEnd"):"ms"===c.CSS_VENDOR?(D="msAnimationEnd",b="msTransitionEnd"):"moz"===c.CSS_VENDOR&&(D="Mozanimationend",b="Moztransitionend"),p.extend(c,{ANIMATION_DURATION:T,ANIMATION_DELAY:y,ANIMATION_NAME:w,ANIMATION_TIMING_FUNC:v,ANIMATION_FILL_MODE:A,TRANSITION_DURATION:N,TRANSITION_PROPERTY:x,TRANSITION_DELAY:O,TRANSITION_TIMING_FUNC:I,TRANSFORM_ORIGIN:E,ITERATION_COUNT:S,TRANSFORM:R,KEY_FRAMES:C,ANIMATION_END:D,TRANSITION_END:b});var k=new RegExp(/\$width/g),L=new RegExp(/\$height/g),P=new RegExp(/\$x/g),z=new RegExp(/\$y/g),F=new RegExp(/\$\{([\w]+)\}/g),U=function(t,i,e,n,s){function o(e,n){var s,o=[];if(p.isNumber(e))return e;if(p.isString(e)){e=(e=(e=(e=e.replace(k,t.size[0]+"px")).replace(L,t.size[1]+"px")).replace(P,t.position[0]+"px")).replace(z,t.position[1]+"px");for(var a=F.exec(e);a&&2===a.length;)o.push(a[1]),a=F.exec(e);for(var r=0;r<o.length;r++)void 0!==n[s=o[r]]?e=e.replace("${"+s+"}",n[s]):void 0!==i[s]&&(e=e.replace("${"+s+"}",i[s]));return e}return console.warn("vs.fx.Animation._parseValue. Unknown value's type: "+e),0}{if(i&&t&&t.view){var a=function(t){var i,e,n={};t.properties?n.properties=t.properties.slice():n.properties=[],t.values?n.values=t.values.slice():n.values=[],t.durations&&(n.durations=t.durations),t.timings?n.timings=t.timings.slice():n.timings=[],t.origin&&(n.origin=t.origin.slice()),n.iterationCount=t.iterationCount,n.delay=t.delay,n.additive=t.additive,n.keyFrames={},t.keyFrames["100%"]||(t.keyFrames["100%"]=t);var s;for(i in t.keyFrames)if(e=t.keyFrames[i],p.isArray(e)){s=[];for(var a=0;a<e.length;a++)value=e[a],null!=value&&"undefined"!=typeof value&&(s[a]=o(value,t));n.keyFrames[i]=s}else{for(a=0;a<t.properties.length;a++)n.values[a]=o(t.values[a],e);n.keyFrames[i]={}}return n}(i);return V(t,i,a,e,n,s)}console.error("procesAnimation: invalid component parameter!")}},V=function(t,e,n,o,a,r){function _(){var i;if(i=k?T:N,p.isArray(n.origin)&&2===n.origin.length){var e=n.origin[0]+"% "+n.origin[1]+"%";t.setStyle(E,e)}r?t.setStyle(i,0):p.isString(n.durations)?t.setStyle(i,n.durations):p.isArray(n.durations)?t.setStyle(i,n.durations.join(", ")):t.setStyle(i,s.DEFAULT_DURATION),i=k?y:O,!r&&p.isNumber(n.delay)?t.setStyle(i,n.delay+"ms"):t.setStyle(i,"0"),i=k?v:I,p.isString(n.timings)?t.setStyle(i,n.timings):p.isArray(n.timings)?t.setStyle(i,n.timings.join(", ")):t.setStyle(i,s.EASE),k&&("infinite"===n.iterationCount?t.setStyle(S,"infinite"):n.iterationCount&&p.isNumber(n.iterationCount)?t.setStyle(S,n.iterationCount):t.setStyle(S,"1"),t.setStyle(A,"forwards"))}function l(){var e,s,o="",a=[];for(i=0;i<n.properties.length;i++)e=n.properties[i],s=n.values[i],"rotate"===e?(o+="rotate("+s+") ",e=R):"skew"===e?(o+="skew("+s+") ",e=R):g&&"translate"===e?(o+="translate3d("+s+") ",e=R):"translate"===e?(o+="translate("+s+") ",e=R):"translateX"===e?(o+="translateX("+s+") ",e=R):"translateY"===e?(o+="translateY("+s+") ",e=R):"rotateX"===e?(o+="rotateX("+s+") ",e=R):"rotateY"===e?(o+="rotateY("+s+") ",e=R):"scale"===e?(o+="scale("+s+") ",e=R):t.setStyle(e,s),-1==a.indexOf(e)&&a.push(e);o&&(n.additive&&(o=t.getCTM().toString()+" "+o),f(t.view,o)),t.setStyle(x,a.join(","))}function m(){_();var i,p,u=function(r){if(r.currentTarget===t.view){L||t.view.removeEventListener(D,u,!1),k&&l(),t.view.style.removeProperty(T),t.view.style.removeProperty(y),(i=t.getStyle(w))&&(i=i.replace(d,""),t.setStyle(w,i));try{data=s.__css_animations[d],data&&2===data.length&&(h.getElementsByTagName("head")[0].removeChild(data[0]),delete s.__css_animations[d])}catch(t){return t.stack&&console.log(t.stack),console.error(t),!1}if(e.delegate&&e.delegate.taskDidEnd)try{e.delegate.taskDidEnd(n)}catch(t){t.stack&&console.log(t.stack),console.error(t)}o&&o.call(a||P)}};p=parseFloat(t.view.style.getPropertyValue(T)),(r||0===p)&&(L=!0),L?c.scheduleAction(function(){u({currentTarget:t.view})}):t.view.addEventListener(D,u,!1),(i=t.getStyle(w))?i+=", "+d:i=d,t.setStyle(w,i)}{if(n&&t&&t.view){var d=u.createId(),k=!!n.keyFrames["0%"],L=!1,P=this;return k?c.scheduleAction(function(){var i,e,o,a,r,_,l=h.createElement("style");l.type="text/css";var c="";for(e in n.keyFrames){if(r="",i=n.keyFrames[e],o="",p.isArray(i))for(var u=0;u<i.length;u++)null!=(_=i[u])&&void 0!==_&&(a=n.properties[u])&&("rotate"===a?r+="rotate("+_+") ":"skew"===a?r+="skew("+_+") ":g&&"translate"===a?r+="translate3d("+_+") ":"translate"===a?r+="translate("+_+") ":"translateX"===a?r+="translateX("+_+") ":"translateY"===a?r+="translateY("+_+") ":"rotateX"===a?r+="rotateX("+_+") ":"rotateY"===a?r+="rotateY("+_+") ":"scale"===a?r+="scale("+_+") ":"perspective"===a?r+="perspective("+_+") ":o+=a+":"+_+";");else for(u=0;u<n.properties.length;u++)_=n.values[u],(a=n.properties[u])&&("rotate"===a?r+="rotate("+_+") ":"skew"===a?r+="skew("+_+") ":g&&"translate"===a?r+="translate3d("+_+") ":"translate"===a?r+="translate("+_+") ":"translateX"===a?r+="translateX("+_+") ":"translateY"===a?r+="translateY("+_+") ":"rotateX"===a?r+="rotateX("+_+") ":"rotateY"===a?r+="rotateY("+_+") ":"scale"===a?r+="scale("+_+") ":"perspective"===a?r+="perspective("+_+") ":o+=a+":"+_+";");r&&(n.additive&&(r=t.getCTM().toString()+" "+r),o+=R+": "+r+";"),c+=e+" { "+o+" } "}var f=h.createTextNode("@"+C+" "+d+" { "+c+" }");l.appendChild(f),h.getElementsByTagName("head")[0].appendChild(l),s.__css_animations[d]=[l,t],m()}):c.scheduleAction(function(){_();var i,s;i=function(s){if(s.currentTarget===t.view){if(L||t.view.removeEventListener(b,i,!1),t.view.style.removeProperty(N),t.view.style.removeProperty(O),e.delegate&&e.delegate.taskDidEnd)try{e.delegate.taskDidEnd(n)}catch(t){t.stack&&console.log(t.stack),console.error(t)}o&&o.call(a||P)}},s=parseFloat(t.view.style.getPropertyValue(N)),(r||0===s)&&(L=!0),L?c.scheduleAction(function(){i({currentTarget:t.view})}):t.view.addEventListener(b,i,!1),l()}),d}console.error("procesAnimation: invalid component parameter!")}};s.__css_animations={},s.DEFAULT_DURATION="0.3s",s.DEFAULT_TIMING=s.EASE,s.prototype={properties:null,values:null,durations:null,timings:null,origin:null,iterationCount:1,delay:0,keyFrames:null,additive:!0,setAnimations:function(t){var i,e,n,s;for(this.properties=[],this.values=[],this.timings=[],this.keyFrames={},this.origin=null,this.durations=null,this.timings=null,i=0;i<t.length;i++)s=t[i],p.isArray(s)&&2===s.length?(e=s[0],n=s[1],p.isString(e)&&p.isString(n)?(this.properties.push(e),this.values.push(n)):console.warn("vs.fx.Animation, invalid constructor argument option: ["+e+", "+n+"]")):console.warn("vs.fx.Animation, invalid animations")},addKeyFrame:function(t,i){i&&("from"!==t?"to"!==t?!p.isNumber(t)||t<0||t>100||(this.keyFrames[t+"%"]=i):this.keyFrames["100%"]=i:this.keyFrames["0%"]=i)},process:function(t,i,e,n){return U(t,this,i,e,n)},_clone:function(t,i){u.Object.prototype._clone.call(this,t,i);var e,n;if(t.keyFrames={},t.keyFrames["100%"]=t,this.properties?t.properties=this.properties.slice():t.properties=[],this.values?t.values=this.values.slice():t.values=[],this.durations&&(t.durations=this.durations),this.timings?t.timings=this.timings.slice():t.timings=[],this.origin&&(t.origin=this.origin.slice()),this.keyFrames)for(e in this.keyFrames)"100%"!==e&&(n=this.keyFrames[e],p.isArray(n)?t.keyFrames[e]=n.slice():t.keyFrames[e]=c.util.clone(n));t.iterationCount=this.iterationCount,t.delay=this.delay},start:function(t){return this.process(t)}},p.extendClass(s,u.Task),p.defineClassProperties(s,{duration:{set:function(t){t&&(this.durations=[t])},get:function(){return this.durations&&this.durations.length?this.durations[0]:s.DEFAULT_DURATION}},timing:{set:function(t){t&&(this.timings=[t])},get:function(){return this.timings&&this.timings.length?this.timings[0]:s.EASE}}}),s.EASE="ease",s.LINEAR="linear",s.EASE_IN="ease-in",s.EASE_OUT="ease-out",s.EASE_IN_OUT="ease-in-out",TranslateAnimation=function(t,i,e){this.parent=s,arguments.length?(g?this.parent(["translate","${x}px,${y}px,${z}px"]):this.parent(["translate","${x}px,${y}px"]),p.isNumber(t)&&(this.x=t),p.isNumber(i)&&(this.y=i),p.isNumber(e)&&(this.z=e)):this.parent(),this.constructor=TranslateAnimation},TranslateAnimation.prototype={x:0,y:0,z:0,_clone:function(t,i){s.prototype._clone.call(this,t,i),t.x=this.x,t.y=this.y,t.z=this.z}},p.extendClass(TranslateAnimation,s),RotateAnimation=function(t){this.parent=s,arguments.length?(this.parent(["rotate","${deg}deg"]),p.isNumber(t)&&(this.deg=t)):this.parent(),this.constructor=RotateAnimation},RotateAnimation.prototype={deg:0,_clone:function(t,i){s.prototype._clone.call(this,t,i),t.deg=this.deg}},p.extendClass(RotateAnimation,s),RotateXYZAnimation=function(t,i,e){this.parent=s,arguments.length?(this.parent(["rotateX","${degX}deg"],["rotateY","${degY}deg"],["rotate","${degZ}deg"]),p.isNumber(t)&&(this.degX=t),p.isNumber(i)&&(this.degY=i),p.isNumber(e)&&(this.degZ=e)):this.parent(),this.constructor=RotateXYZAnimation},RotateXYZAnimation.prototype={degX:0,degY:0,degZ:0,_clone:function(t,i){s.prototype._clone.call(this,t,i),t.degX=this.degX,t.degY=this.degY,t.degZ=this.degZ}},p.extendClass(RotateXYZAnimation,s),ScaleAnimation=function(t,i,e){this.parent=s,arguments.length?p.isNumber(i)||p.isNumber(i)?(this.parent(["scaleX","${sx}"],["scaleY","${sy}"],["scaleZ","${sz}"]),p.isNumber(t)&&(this.sx=t),p.isNumber(i)&&(this.sy=i),p.isNumber(e)&&(this.sz=e)):(this.parent(["scale","${sx}"]),this.sx=t,this.sy=t):this.parent(),this.constructor=ScaleAnimation},ScaleAnimation.prototype={sx:1,sy:1,sz:1,_clone:function(t,i){s.prototype._clone.call(this,t,i),t.sx=this.sx,t.sy=this.sy,t.sz=this.sz}},p.extendClass(ScaleAnimation,s),SkewAnimation=function(t,i){this.parent=s,arguments.length?(this.parent(["skew","${ax}deg,${ay}deg"]),p.isNumber(t)&&(this.ax=t),p.isNumber(i)&&(this.ay=i)):this.parent(),this.constructor=SkewAnimation},SkewAnimation.prototype={ax:0,ay:0,_clone:function(t,i){s.prototype._clone.call(this,t,i),t.ax=this.ax,t.ay=this.ay}},p.extendClass(SkewAnimation,s),OpacityAnimation=function(t){this.parent=s,arguments.length?(this.parent(["opacity","${value}"]),p.isNumber(t)&&(this.value=t)):this.parent(),this.constructor=OpacityAnimation},OpacityAnimation.prototype={value:1,_clone:function(t,i){s.prototype._clone.call(this,t,i),t.value=this.value}},p.extendClass(OpacityAnimation,s),s.SlideOutRight=new s(["translateX","$width"]),s.SlideOutRight.addKeyFrame(0,["0px"]),s.SlideOutLeft=new s(["translateX","-$width"]),s.SlideOutLeft.addKeyFrame(0,["0px"]),s.SlideOutTop=new s(["translateY","-$height"]),s.SlideOutTop.addKeyFrame(0,["0px"]),s.SlideOutBottom=new s(["translateY","$height"]),s.SlideOutBottom.addKeyFrame(0,["0px"]),s.SlideInRight=new s(["translateX","0px"]),s.SlideInRight.addKeyFrame(0,["$width"]),s.SlideInLeft=new s(["translateX","0px"]),s.SlideInLeft.addKeyFrame(0,["-$width"]),s.SlideInTop=new s(["translateY","0px"]),s.SlideInTop.addKeyFrame(0,["-$height"]),s.SlideInBottom=new s(["translateY","0px"]),s.SlideInBottom.addKeyFrame(0,["$height"]),s.FadeIn=new s(["opacity","1"]),s.FadeIn.addKeyFrame(0,["0"]),s.FadeOut=new s(["opacity","0"]),s.FadeOut.addKeyFrame(0,["1"]),d.Animation=s,d.cancelAnimation=function(t){if(!t)return!1;var i,t,e;if(!(e=s.__css_animations[t])||2!==e.length)return!1;if(!e[1]||!e[1].getStyle||!e[0])return!1;if(!(i=e[1].getStyle(w)))return!1;i=i.replace(t,""),e[1].setStyle(w,i);try{h.getElementsByTagName("head")[0].removeChild(e[0])}catch(t){return t.stack&&console.log(t.stack),console.error(t),!1}return delete s.__css_animations[t],!0},d.TranslateAnimation=TranslateAnimation,d.RotateAnimation=RotateAnimation,d.RotateXYZAnimation=RotateXYZAnimation,d.ScaleAnimation=ScaleAnimation,d.SkewAnimation=SkewAnimation,d.OpacityAnimation=OpacityAnimation;var X=c.core.createClass({parent:c.fx.StackController,_direction:0,_transition_out:null,_transition_in:null,properties:{direction:{set:function(t){t!==X.LEFT_OUT&&t!==X.RIGHT_OUT&&t!==X.BOTTOM_OUT&&t!==X.TOP_OUT||(this._direction=t,this._updateViewSize())},get:function(){return this._direction}},animationDuration:{set:function(t){t||(t=0),p.isNumber(t)&&(this._animation_duration=t,this._transition_out&&(this._transition_out.duration=this._animation_duration+"ms"),this._transition_in&&(this._transition_in.duration=this._animation_duration+"ms"))}}},constructor:function(t){this._super(t),t&&(this._transition_out=new s(["translate","${x}%,${y}%,0"]),this._transition_out.x=0,this._transition_out.y=0,this._transition_in=new s(["translate","${x}%,${y}%,0"]),this._transition_in.x=0,this._transition_in.y=0,this.animationDuration=X.ANIMATION_DURATION),this._direction=X.RIGHT_OUT},_updateViewSize:function(){this._transition_out&&(this._direction===X.LEFT_OUT?(this._transition_out.x=-100,this._transition_out.y=0):this._direction===X.RIGHT_OUT?(this._transition_out.x=100,this._transition_out.y=0):this._direction===X.BOTTOM_OUT?(this._transition_out.x=0,this._transition_out.y=100):(this._transition_out.x=0,this._transition_out.y=-100))},push:function(t,i,e,n){if(t){i||(i={});var s=o.prototype.push.call(this,t,i,e,n);if(s){if(this._states_array.push(s),1===++this.__nb_panels)return this.initialComponent=s,this._last_comp_id=s,s;if(this.addTransition(this._last_comp_id,s,l.NEXT),this.addTransition(s,this._last_comp_id,l.PRED),state=this._fsm._list_of_state[s],state)return this._last_comp_id===this._initial_component?(state.comp||(state.comp=this._owner.createAndAddComponent(state.comp_name,state.init_data,e),state.comp.configure(state.init_data),state.comp.setStyle("position","absolute"),state.comp&&state.comp.propertiesDidChange&&state.comp.propertiesDidChange(),state.comp.propertyChange()),state.comp.show(),state.comp.setStyle("z-index",this.__nb_panels),this.configureNewComponent(state.comp)):state.comp&&(state.comp.setStyle("z-index",this.__nb_panels),this.configureNewComponent(state.comp)),this._last_comp_id=s,s;console.error("Unknown error in vs.fx.CardController.push")}}},configureNewComponent:function(t){var i;i=g?"translate3d":"translate",this._direction===X.LEFT_OUT?i+="(-100%,0":this._direction===X.RIGHT_OUT?i+="(100%,0":this._direction===X.BOTTOM_OUT?i+="(0,100%":i+="(0,-100%",i+=g?",0)":")",t.view.style.webkitTransitionDuration="0",f(t.view,i)},handleEvent:function(t){var i,e,n,s,o,a=!1;t.type===u.POINTER_START?(this.__controller__._direction===X.LEFT_OUT||this.__controller__._direction===X.RIGHT_OUT?t.changedTouches?this.__pos=t.changedTouches[0].clientX:this.__pos=t.clientX:t.changedTouches?this.__pos=t.changedTouches[0].clientY:this.__pos=t.clientY,c.addPointerListener(h,u.POINTER_END,this,!0),c.addPointerListener(h,u.POINTER_MOVE,this,!0)):t.type===u.POINTER_MOVE?(t.preventDefault(),i=this.__controller__._fsm._list_of_state[this.__controller__._fsm._current_state],(o=this.__controller__._states_array.indexOf(this.__controller__._fsm._current_state))>0&&(e=this.__controller__._states_array[o-1]),this.__controller__._direction===X.LEFT_OUT||this.__controller__._direction===X.RIGHT_OUT?(t.changedTouches?this.__delta=t.changedTouches[0].clientX-this.__pos:this.__delta=t.clientX-this.__pos,s=g?"translate3d("+this.__delta+"px,0px,0)":"translate("+this.__delta+"px,0px)"):(t.changedTouches?this.__delta=t.changedTouches[0].clientY-this.__pos:this.__delta=t.clientY-this.__pos,s=g?"translate3d(0px,"+this.__delta+"px,0)":"translate(0px,"+this.__delta+"px)"),this.__controller__._direction===X.LEFT_OUT||this.__controller__._direction===X.TOP_OUT?this.__delta<0?(i.comp.view.style.webkitTransitionDuration=0,f(i.comp.view,s)):e&&(n=this.__controller__._fsm._list_of_state[e])&&n.comp&&(s=this.__controller__._direction===X.LEFT_OUT||this.__controller__._direction===X.RIGHT_OUT?g?"translate3d("+(this.__delta-this._size[0])+"px,0px,0)":"translate("+(this.__delta-this._size[0])+"px,0px)":g?"translate3d(0px,"+(this.__delta-this._size[1])+"px,0)":"translate(0px,"+(this.__delta-this._size[1])+"px)",n.comp.view.style.webkitTransitionDuration=0,f(n.comp.view,s)):this.__delta>0?(i.comp.view.style.webkitTransitionDuration=0,f(i.comp.view,s)):e&&(n=this.__controller__._fsm._list_of_state[e])&&n.comp&&(s=this.__controller__._direction===X.LEFT_OUT||this.__controller__._direction===X.RIGHT_OUT?g?"translate3d("+(this._size[0]+this.__delta)+"px,0px,0)":"translate("+(this._size[0]+this.__delta)+"px,0px)":g?"translate3d(0px,"+(this._size[1]+this.__delta)+"px,0)":"translate(0px,"+(this._size[1]+this.__delta)+"px)",n.comp.view.style.webkitTransitionDuration=0,f(n.comp.view,s))):t.type===u.POINTER_END&&(i=this.__controller__._fsm._list_of_state[this.__controller__._fsm._current_state],this.__controller__._direction===X.LEFT_OUT||this.__controller__._direction===X.TOP_OUT?this.__delta>50?a=this.__controller__.goToPreviousView():this.__delta<-50&&(a=this.__controller__.goToNextView()):this.__delta>50?a=this.__controller__.goToNextView():this.__delta<-50&&(a=this.__controller__.goToPreviousView()),a||((o=this.__controller__._states_array.indexOf(this.__controller__._fsm._current_state))>0&&(e=this.__controller__._states_array[o-1]),(this.__controller__._direction===X.LEFT_OUT||this.__controller__._direction===X.TOP_OUT)&&this.__delta<0?(s=g?"translate3d(0,0,0)":"translate(0,0)",i.comp.view.style.webkitTransitionDuration=this.__controller__._animation_duration+"ms",f(i.comp.view,s)):(this.__controller__._direction===X.RIGHT_OUT||this.__controller__._direction===X.BOTTOM_OUT)&&this.__delta>0?(s=g?"translate3d(0,0,0)":"translate(0,0)",i.comp.view.style.webkitTransitionDuration=this.__controller__._animation_duration+"ms",f(i.comp.view,s)):e&&(n=this.__controller__._fsm._list_of_state[e])&&n.comp&&(s=g?"translate3d":"translate",s=this.__controller__._direction===X.LEFT_OUT?"(-100%,0px":this.__controller__._direction===X.RIGHT_OUT?"(100%,0px":this.__controller__._direction===X.BOTTOM_OUT?"(0px,100%":"(0px,-100%",s+=g?",0)":")",n.comp.view.style.webkitTransitionDuration=this.__controller__._animation_duration+"ms",f(n.comp.view,s))),c.removePointerListener(h,u.POINTER_END,this,!0),c.removePointerListener(h,u.POINTER_MOVE,this,!0))},_stackAnimateComponents:function(t,i,e,n,s){var o,a,r,_;t>0?(o=this._transition_in,_=e):(o=this._transition_out,a=this._transition_in,_=i),a&&(r=a.durations,a.durations="0s");var l=this,h=function(){i.hide();try{l._delegate&&l._delegate.controllerAnimationDidEnd&&l._delegate.controllerAnimationDidEnd(i,e,l),n&&n.call(this.owner)}catch(t){t.stack&&console.log(t.stack),console.error(t)}},p=function(){a&&(a.durations=r);try{if(e.show(),s){var t=o.durations;o.durations="0s"}o.process(_,h,l),s&&(o.durations=t)}catch(t){t.stack&&console.log(t.stack),console.error(t)}};a?a.process(e,function(){c.scheduleAction(function(){p()})}):p()}});X.ANIMATION_DURATION=300,X.LEFT_OUT=0,X.RIGHT_OUT=1,X.TOP_OUT=2,X.BOTTOM_OUT=3,d.CardController=X,o.prototype={_delegate:null,_owner:null,_fsm:null,_initial_component:null,destructor:function(){this._owner&&(this._owner.__controller__=void 0,this._owner.remove=this._owner._ab_controller_remove,this._owner._ab_controller_remove=void 0),this._delegate=void 0,p.free(this._fsm),u.EventSource.prototype.destructor.call(this)},initComponent:function(){u.EventSource.prototype.initComponent.call(this),this._fsm&&this._fsm.init(),this._owner?this._owner.__controller__?console.error("The owner already use a controller"):(this._owner.__controller__=this,this._owner._ab_controller_remove=this._owner.remove,this._owner.remove=this.ab_controller_remove):console.error("Invalid vs.fx.Controller, owner is null vs.fx.Controller.id = '"+this._id+"'")},ab_controller_remove:function(t){t&&(state=this.__controller__._fsm._list_of_state[t.id],state?this.__controller__.remove(t):this._ab_controller_remove(t))},isStateExit:function(t){return!!this._fsm&&!!this._fsm._list_of_state[t]},add:function(t,i,e,n){return console.warn("vs.fx.Controller.add is deprecated. Use vs.fx.Controller.push"),this.push(t,i,e,n)},push:function(t,i,e,n){if(t&&this._fsm){i||(i={});var s,o,a,r=null;if(r=p.isString(t)&&i.id?i.id:!p.isString(t)&&t.id?t.id:u.createId(),!this.isStateExit(r)){if(this._fsm.addState(r),a=this._fsm._list_of_state[r],a.bindings={},n&&n.length)for(o=0;o<n.length;o++)(s=n[o])&&3===s.length?this.componentBind(r,s[0],s[1],s[2]):console.warn("vs.fx.Controller.push: invalid binding information");return this.setStateComponentInformation(r,t,e,i),r}}},remove:function(t){if(t&&this._owner&&this._fsm){var i=null;p.isString(t)?i=t:p.isString(t)||(i=t.id);var e=this._fsm._list_of_state[i];e&&e.comp&&this._owner._ab_controller_remove(e.comp),this._fsm.removeState(i)}},setStateComponentInformation:function(t,i,e,n){if(t&&this._fsm&&this._fsm.existState(t)&&i&&this._owner){n=n?p.clone(n):{};var s=this._fsm._list_of_state[t];s.init_data=n,p.isString(i)?(s.comp_name=i,s.comp=void 0):(s.comp_name="",s.comp=i,this._owner.isChild(i)||this._owner.add(i,e))}},addTransition:function(t,i,e,n,s){var o,a;if(t&&this._fsm&&this._fsm.existState(t)&&i&&this._fsm.existState(i)&&e){this._fsm.existInput(e)||this._fsm.addInput(e),this._fsm.addTransition(t,i,e);for(o in this._fsm._list_of_state[t].transitionEvents)(a=this._fsm._list_of_state[t].transitionEvents[o]).to===i&&(a.animation_out=n,a.animation_in=s)}},_animateComponents:function(t,i,e,n,s,o){var a=this,r=function(){try{s&&s.call(a._owner),a._delegate&&a._delegate.animationDidEnd&&(console.warn("animationDidEnd is deprecated. Please use 'controllerAnimationDidEnd'."),a._delegate.animationDidEnd(a)),a._delegate&&a._delegate.controllerAnimationDidEnd&&a._delegate.controllerAnimationDidEnd(t,i,a)}catch(t){t.stack&&console.log(t.stack),console.error(t)}},_=function(){try{if(i.show(),!n&&!e)return void r.call(a);if(o){if(n){var s=n.durations;n.durations="0s"}if(e){var _=e.durations;e.durations="0s"}}n&&!e?n.process(i,r,a):!n&&e?e.process(t,r,a):(n&&n.process(i,r,a),e&&e.process(t)),o&&(n&&(n.durations=s),e&&(e.durations=_))}catch(t){t.stack&&console.log(t.stack),console.error(t)}};c.scheduleAction(function(){_()})},componentBind:function(t,i,e,n){if(this._fsm){var s,o=this._fsm._list_of_state[t];o&&((s=o.bindings[i])||(s=[],o.bindings[i]=s),s.push([e,n]),t===this._current_state&&o.comp.bind(i,e,n))}},refresh:function(){},getCurrentState:function(){if(this._fsm)return this._fsm._current_state},configureNewComponent:function(t){},_beforeStateEnter:function(t,i){if(t&&(t.comp_name||t.comp)){var e,n,s,o,a,r;if(t.comp||(t.comp=this._owner.createAndAddComponent(t.comp_name,t.init_data,t.extension),t.comp.configure(t.init_data),t.comp&&t.comp.propertiesDidChange&&t.comp.propertiesDidChange(),t.comp.propertyChange(),this.configureNewComponent(t.comp)),r=i,t.data_adaptation_func&&(r=t.data_adaptation_func(i)),r){for(o in r)(t.comp.__lookupSetter__(o)||t.comp.hasOwnProperty(o))&&(t.comp[o]=r[o]);t.comp.propertyChange()}for(e in t.bindings)if(n=t.bindings[e])for(s=0;s<n.length;s++)(a=n[s])&&(a[1]?t.comp.bind(e,a[0],a[1]):t.comp.bind(e,a[0]))}},_beforeStateExit:function(t){if(t&&t.comp){var i,e,n,s;for(i in t.bindings)if(e=t.bindings[i])for(n=0;n<e.length;n++)(s=e[n])&&(s[1]?t.comp.unbind(i,s[0],s[1]):t.comp.bind(i,s[0]))}},goTo:function(t,i,e,n){var s,o,a=null;if(!t||!this._list_of_state[t])return console.warn("vs.fx.Controller.goTo unknown State id:"+t),!1;if(this._current_state&&(e&&(a=this._list_of_state[this._current_state].transitionEvents[e.on]),s=this._list_of_state[this._current_state],this.owner._beforeStateExit(s)),this._current_state=t,o=this._list_of_state[this._current_state],this.owner._beforeStateEnter(o,e?e.data:null),s&&s.comp&&s.comp.viewWillDisappear&&s.comp.viewWillDisappear(),o.comp.viewWillAppear&&o.comp.viewWillAppear(),a?this.owner._animateComponents(s.comp,o.comp,a.animation_out,a.animation_in,null,n):o.comp.show(),this.owner._delegate&&this.owner._delegate.controllerViewWillChange&&(s?this.owner._delegate.controllerViewWillChange(s.comp,o.comp,this.owner):this.owner._delegate.controllerViewWillChange(null,o.comp,this.owner)),i&&this._output_action[i]){var r=this._output_action[i];p.isFunction(r)?r.call(this._owner,e):p.isString(r)&&this._owner[this._output_action[i]](e)}return!0},notify:function(t,i){this._fsm&&t&&t.type&&this._fsm.fsmNotify(t.type,t.data,i)},clear:function(){this._fsm&&this._fsm.clear()}},p.extendClass(o,u.EventSource),p.defineClassProperties(o,{initialComponent:{set:function(t){this._fsm&&t?this._fsm.existState(t)&&(this._initial_component=t,this._fsm.initialState=t,this._fsm.goTo(t)):this._initial_component=void 0},get:function(){return this._initial_component}},delegate:{set:function(t){this._delegate=t}}}),d.Controller=o,a._translate_animation=new RotateXYZAnimation(-90,0,0),a._translate_animation.init(),a._translate_animation.addKeyFrame("from",{degX:0}),a._translate_animation.addKeyFrame(50,{degX:-92}),a._translate_animation.addKeyFrame(70,{degX:-84}),a._translate_animation.addKeyFrame(80,{degX:-90}),a._translate_animation.addKeyFrame(95,{degX:-88}),a._translate_animation.durations="2s",a.HORIZONTAL=0,a.VERTICAL=1,a.prototype={_orientation:a.HORIZONTAL,push:function(t,i,e){if(t){if(!p.isString(t)){var n=this._states_array.length;t.position=[0,0],t.setStyle("z-index",1e3-n)}return l.prototype.push.call(this,t,i,e)}},handleEvent:function(t){var i,e,n,s,o,r=!1;t.type===u.POINTER_START?(this.__layer._orientation===a.HORIZONTAL?t.changedTouches?this.__pos=t.changedTouches[0].clientX:this.__pos=t.clientX:t.changedTouches?this.__pos=t.changedTouches[0].clientY:this.__pos=t.clientY,c.addPointerListener(h,u.POINTER_END,this,!0),c.addPointerListener(h,u.POINTER_MOVE,this,!0),this.animationDuration=0):t.type===u.POINTER_MOVE?(t.preventDefault(),i=this.__layer._list_of_state[this.__layer._current_state],(o=this.__layer._states_array.indexOf(this.__layer._current_state))>0&&(e=this.__layer._states_array[o-1]),this.__layer._orientation===a.HORIZONTAL?(t.changedTouches?this.__delta=t.changedTouches[0].clientX-this.__pos:this.__delta=t.clientX-this.__pos,s=g?"translate3d("+this.__delta+"px,0px,0)":"translate("+this.__delta+"px,0px)"):(t.changedTouches?this.__delta=t.changedTouches[0].clientY-this.__pos:this.__delta=t.clientY-this.__pos,s=g?"translate3d(0px,"+this.__delta+"px,0)":"translate(0px,"+this.__delta+"px)"),this.__delta<0?(i.comp.view.style.webkitTransitionDuration=0,f(i.comp.view,s)):e&&(n=this.__layer._list_of_state[e])&&n.comp&&(s=this.__layer._orientation===a.HORIZONTAL?g?"translate3d("+(this.__delta-this._size[0])+"px,0px,0)":"translate("+(this.__delta-this._size[0])+"px,0px)":g?"translate3d(0px,"+(this.__delta-this._size[1])+"px,0)":"translate(0px,"+(this.__delta-this._size[1])+"px)",n.comp.view.style.webkitTransitionDuration=0,f(n.comp.view,s))):t.type===u.POINTER_END&&(i=this.__layer._list_of_state[this.__layer._current_state],this.__delta>50?r=this.__layer.goToPreviousView():this.__delta<-50&&(r=this.__layer.goToNextView()),r||((o=this.__layer._states_array.indexOf(this.__layer._current_state))>0&&(e=this.__layer._states_array[o-1]),this.__delta<0?(s=g?"translate3d(0,0,0)":"translate(0,0)",i.comp.view.style.webkitTransitionDuration=this.__layer._animation_duration+"ms",f(i.comp.view,s)):e&&(n=this.__layer._list_of_state[e])&&n.comp&&(s=this.__layer._orientation===a.HORIZONTAL?g?"translate3d("+this._size[0]+"px,0px,0)":"translate("+this._size[0]+"px,0px)":g?"translate3d(0px,-"+this._size[1]+"px,0)":"translate(0px,-"+this._size[1]+"px)",n.comp.view.style.webkitTransitionDuration=this.__layer._animation_duration+"ms",f(n.comp.view,s))),c.removePointerListener(h,u.POINTER_END,this,!0),c.removePointerListener(h,u.POINTER_MOVE,this,!0))},goTo:function(t,i,e){function n(t){var i=this._states_array[t],e=this._list_of_state[i];e&&(e.comp||(e.comp=this.owner.createAndAddComponent(e.comp_name,e.init_data,e.extension),e.comp.configure(e.init_data),e.comp.style("position","absolute"),e.comp&&e.comp.propertiesDidChange&&e.comp.propertiesDidChange(),e.comp.propertyChange()),e.view?__setPos(e.view,0,0):e.comp.position=[0,0],e.comp.show(),e.comp.style("z-index",1e3-t))}var s,o=this._states_array.indexOf(t),r=this._list_of_state[this._current_state];if(l.prototype.goTo.call(this,t,i,e),t&&(this.owner.animationDuration=this._animation_duration,(s=this._list_of_state[this._current_state]).comp.setStyle("position","absolute"),s.comp.position=[0,0],s.comp.setStyle("z-index",1e3-o),r&&s&&(r.comp.setStyle("-webkit-transform","scale3d(.835,.835,.835) translateZ(200px)"),s.comp.setStyle("-webkit-transform","scale3d(.835,.835,.835) rotateX(90deg) translateZ(200px)")),o>0&&n.call(this,o-1),o<this._states_array.length-1&&n.call(this,o+1),e&&e.on===l.NEXT&&r?(this._orientation,a.HORIZONTAL,a._translate_animation.process(this.owner)):e&&e.on===l.PRED&&s&&(a._translate_animation.x=0,a._translate_animation.y=0,a._translate_animation.process(s.comp)),i&&this._output_action[i])){var _=this._output_action[i];p.isFunction(_)?_.call(this.owner,e):p.isString(_)&&this.owner[this._output_action[i]](e)}}},p.extendClass(a,l),d.CubicController=a,r.NO_ANIMATION=0,r.CARD_ANIMATION=1,r.SLIDE_ANIMATION=2,r.DEFAULT_ANIMATION=r.SLIDE_ANIMATION,r.BACK="back",r.prototype={_nav_bar:null,__nav_bar_states:null,_animation_type:r.DEFAULT_ANIMATION,destructor:function(){o.prototype.destructor.call(this)},initComponent:function(){o.prototype.initComponent.call(this);this._owner.size;this.__translate_in_right=new TranslateAnimation(0),this.__translate_out_right=new s(["translate","100%,0,0"]),this.__translate_out_left=new s(["translate","-100%,0,0"]),this.__translate_in_left=new TranslateAnimation(0)},setNavigationBar:function(t){!t||!t instanceof m.NavigationBar||(this._nav_bar=t)},_updateViewSize:function(){},push:function(t,i,e){if(t){i||(i={});var n=o.prototype.push.call(this,t,i,null,e);if(n){var s=this._fsm._list_of_state[n];return s&&s.comp&&this.configureNewComponent(s.comp),n}}},configureNavigationBarState:function(t,i){var e,n,s,o,a=[],r={};if(this._fsm._list_of_state[t]&&i){for(n=0,s=i.length;n<s;n++)(o=i[n])&&(e=o.comp)&&(p.isString(e)&&(e=u.Object._obs[e]),!e instanceof c.ui.View||(a.push(e),o.properties&&(r[e.id]=o.properties)));this.__nav_bar_states[t]=r,this._nav_bar&&this._nav_bar.setStateItems(t,a)}},configureTransition:function(t,i,e){t&&this._fsm.existState(t)&&i&&this._fsm.existState(i)&&e&&(this._fsm.existInput(e)||this._fsm.addInput(e),this._animation_type===r.SLIDE_ANIMATION?(this.addTransition(t,i,e,this.__translate_out_left,this.__translate_in_right),this.addTransition(i,t,r.BACK,this.__translate_out_right,this.__translate_in_left),this.__translate_in_left.duration="300ms",this.__translate_out_left.duration="300ms",this.__translate_in_right.duration="300ms",this.__translate_out_right.duration="300ms"):this._animation_type===r.CARD_ANIMATION?(this.addTransition(t,i,e,null,this.__translate_in_right),this.addTransition(i,t,r.BACK,this.__translate_out_right,null),this.__translate_in_right.duration="300ms",this.__translate_out_right.duration="300ms"):(this.addTransition(t,i,e,null,this.__translate_in_right),this.addTransition(i,t,r.BACK,this.__translate_out_right,null),this.__translate_in_right.duration="0",this.__translate_out_right.duration="0"))},configureNewComponent:function(t){var i=this.__translate_out_right;i.duration;i.process(t,null,null,!0)},goTo:function(t,i,e,n){o.prototype.goTo.call(this,t,i,e,n)&&this.owner._nav_bar&&this.owner._nav_bar.changeState(t,this.owner.__nav_bar_states[t])},_animateComponents:d.Controller.prototype._animateComponents},p.extendClass(r,l),p.defineClassProperties(r,{viewSize:{set:function(t){t&&p.isArray(t)&&2===t.length&&p.isNumber(t[0])&&p.isNumber(t[1])&&(this._view_size||(this._view_size=[]),this._view_size[0]=t[0],this._view_size[1]=t[1],this._updateViewSize())},get:function(){return this._view_size?this._view_size.slice():this._owner.size}},initialComponent:{set:function(t){if(t){if(this._fsm.existState(t)){this._initial_component=t,this._fsm.initialState=t,this._fsm.goTo(t);var i=this._fsm._list_of_state[t],e=this.__translate_in_right;e.duration;i&&i.comp&&e.process(i.comp,null,null,!0)}}else this._initial_component=void 0},get:function(){return this._initial_component}}}),d.NavigationController=r,_._opacity_animation=new OpacityAnimation(1),_._opacity_animation.init(),_._opacity_animation.durations="0.2s",_.ANIMATION_DURATION=500,_.prototype={push:function(t,i,e){if(t){if(!p.isString(t)){var n=this._states_array.length;t.position=[0,0],t.setStyle("z-index",1e3-n)}l.prototype.push.call(this,t,i,e)}},goTo:function(t,i,e){function n(t){var i=this._states_array[t],e=this._list_of_state[i];e&&(e.comp||(e.comp=this.owner.createAndAddComponent(e.comp_name,e.init_data,e.extension),e.comp.configure(e.init_data),e.comp.setStyle("position","absolute"),e.comp&&e.comp.propertiesDidChange&&e.comp.propertiesDidChange(),e.comp.propertyChange()),e.view?__setPos(e.view,0,0):e.comp.position=[0,0],e.comp.show(),e.comp.setStyle("z-index",1e3-t))}var s,o=this._states_array.indexOf(t),a=this._list_of_state[this._current_state];if(l.prototype.goTo.call(this,t,i,e),t&&((s=this._list_of_state[this._current_state]).comp.setStyle("position","absolute"),s.comp.position=[0,0],s.comp.setStyle("z-index",1e3-o),o>0&&n.call(this,o-1),o<this._states_array.length-1&&n.call(this,o+1),e&&e.on===l.NEXT&&a?(_._opacity_animation.value=0,_._opacity_animation.process(a.comp)):e&&e.on===l.PRED&&s&&(_._opacity_animation.value=1,_._opacity_animation.process(s.comp)),i&&this._output_action[i])){var r=this._output_action[i];p.isFunction(r)?r.call(this.owner,e):p.isString(r)&&this.owner[this._output_action[i]](e)}}},p.extendClass(_,l),p.defineClassProperty(_,"animationDuration",{set:function(t){t||(t=0),p.isNumber(t)&&(this._animation_duration=t,_._opacity_animation.durations=t/1e3+"s")}}),d.OpacityController=_;var M=c.core.createClass({parent:c.fx.StackController,_delta:0,_orientation:0,_transition_out_left:null,_transition_out_right:null,_transition_in:null,_animation_mode:0,properties:{orientation:{set:function(t){t!==M.HORIZONTAL&&t!==M.VERTICAL||(this._orientation=t,this._updateViewSize())},get:function(){return this._orientation}},animationDuration:{set:function(t){t||(t=0),p.isNumber(t)&&(this._animation_duration=t,this._transition_out_left.duration=this._animation_duration+"ms",this._transition_out_right.duration=this._animation_duration+"ms",this._transition_in.duration=this._animation_duration+"ms")}},animationMode:{set:function(t){t||(t=0),t!==M.POURCENTAGE&&t!==M.PIXEL||this._animation_mode!==t&&(this._animation_mode=t,p.free(this._transition_out_right),p.free(this._transition_out_left),this._setUpAnimations(),this._updateViewSize())}}},constructor:function(t){this._super(t),this._orientation=M.HORIZONTAL,arguments.length&&(this._setUpAnimations(),this._transition_in=new s(["translate","0,0,0"]),this.animationDuration=M.ANIMATION_DURATION)},_setUpAnimations:function(){switch(this._animation_mode){case M.POURCENTAGE:this._transition_out_left=new s(["translate","${x}%,${y}%,0"]),this._transition_out_right=new s(["translate","${x}%,${y}%,0"]);break;case M.PIXEL:this._transition_out_left=new s(["translate","${x}px,${y}px,0"]),this._transition_out_right=new s(["translate","${x}px,${y}px,0"])}this._transition_out_left.x=0,this._transition_out_left.y=0,this._transition_out_left.duration=this._animation_duration+"ms",this._transition_out_right.duration=this._animation_duration+"ms"},_updateViewSize:function(){var t,i,e,n,s,o;switch(this._animation_mode){case M.POURCENTAGE:s=100,delta_str=s+"%";break;case M.PIXEL:o=this._owner.size,this._orientation===M.HORIZONTAL?s=o[0]:this._orientation===M.VERTICAL&&(s=o[1]),delta_str=s+"px"}for(this._orientation===M.HORIZONTAL?(this._transition_out_left.x=-s,this._transition_out_left.y=0,this._transition_out_right.x=s,this._transition_out_right.y=0):this._orientation===M.VERTICAL&&(this._transition_out_left.x=0,this._transition_out_left.y=-s,this._transition_out_right.x=0,this._transition_out_right.y=s),this._orientation===M.HORIZONTAL?n="translate3D(-"+delta_str+",0,0)":this._orientation===M.VERTICAL&&(n="translate3D(0,-"+delta_str+",0)"),t=0;t<this._states_array.length;t++)i=this._states_array[t],(e=this._fsm._list_of_state[i])&&e.comp&&(this._fsm._current_state!==i?(e.comp.view.style.webkitTransitionDuration="0",f(e.comp.view,n)):(this._orientation===M.HORIZONTAL?n="translate3D("+delta_str+",0,0)":this._orientation===M.VERTICAL&&(n="translate3D(0,"+delta_str+",0)"),e.comp.view.style.webkitTransitionDuration="0",f(e.comp.view,"translate3D(0,0,0)")))},push:function(t,i,e,n){if(t){i||(i={});var s=o.prototype.push.call(this,t,i,e,n);if(s){if(this._states_array.push(s),1===++this.__nb_panels)return this.initialComponent=s,this._last_comp_id=s,s;if(this.addTransition(this._last_comp_id,s,l.NEXT),this.addTransition(s,this._last_comp_id,l.PRED),state=this._fsm._list_of_state[s],state)return this._last_comp_id===this._initial_component?(state.comp||(state.comp=this._owner.createAndAddComponent(state.comp_name,state.init_data,e),state.comp.configure(state.init_data),state.comp.setStyle("position","absolute"),state.comp&&state.comp.propertiesDidChange&&state.comp.propertiesDidChange(),state.comp.propertyChange()),state.comp.show(),state.comp.setStyle("z-index",this.__nb_panels),this.configureNewComponent(state.comp)):state.comp&&(state.comp.setStyle("z-index",this.__nb_panels),this.configureNewComponent(state.comp)),this._last_comp_id=s,s;console.error("Unknown error in vs.fx.StackController.push")}}},configureNewComponent:function(t){var i,e,n;switch(this._animation_mode){case M.POURCENTAGE:e="100%";break;case M.PIXEL:n=this._owner.size,this._orientation===M.HORIZONTAL?e=n[0]+"px":this._orientation===M.VERTICAL&&(e=n[1]+"px")}this._orientation===M.HORIZONTAL?i="translate3D("+e+",0,0)":this._orientation===M.VERTICAL&&(i="translate3D(0,"+e+",0)"),t.view.style.webkitTransitionDuration="0",f(t.view,i),t.hide()},handleEvent:function(t){var i=!1,e=this.size,n=this.__controller__._animation_duration;t.type===u.POINTER_START?(this.__controller__._orientation===M.HORIZONTAL?t.changedTouches?this.__pos=t.changedTouches[0].clientX:this.__pos=t.clientX:t.changedTouches?this.__pos=t.changedTouches[0].clientY:this.__pos=t.clientY,c.addPointerListener(h,u.POINTER_END,this,!0),c.addPointerListener(h,u.POINTER_MOVE,this,!0),this.animationDuration=0,this.__delta=0):t.type===u.POINTER_MOVE?(t.preventDefault(),this.__controller__._orientation===M.HORIZONTAL?t.changedTouches?this.__delta=t.changedTouches[0].clientX-this.__pos:this.__delta=t.clientX-this.__pos:t.changedTouches?this.__delta=t.changedTouches[0].clientY-this.__pos:this.__delta=t.clientY-this.__pos):t.type===u.POINTER_END&&(this.__delta>50?i=this.__controller__.goToPreviousView():this.__delta<-50&&(i=this.__controller__.goToNextView()),i||(this.__controller__._orientation===M.HORIZONTAL?(n=Math.floor(n*this.__delta/e[0]),this.animationDuration=n):(n=Math.floor(n*this.__delta/e[1]),this.animationDuration=n)),c.removePointerListener(h,u.POINTER_END,this,!0),c.removePointerListener(h,u.POINTER_MOVE,this,!0))},refresh:function(){l.prototype.refresh.call(this),this._updateViewSize()},_stackAnimateComponents:function(t,i,e,n,s){var o,a,r,_=this._transition_in;t>0?(a=this._transition_out_right,o=this._transition_out_left):(a=this._transition_out_left,o=this._transition_out_right),r=a.durations,a.durations="0s";var l=this,h=function(){i.hide();try{l._delegate&&l._delegate.controllerAnimationDidEnd&&l._delegate.controllerAnimationDidEnd(i,e,l),n&&n.call(l._owner)}catch(t){t.stack&&console.log(t.stack),console.error(t)}},p=function(){a.durations=r;try{e.show(),e.refresh(),c.scheduleAction(function(){if(s){var t=_.durations;_.durations="0s";var n=o.durations;o.durations="0s"}_.process(e,h,l),o.process(i),s&&(_.durations=t,o.durations=n)})}catch(t){t.stack&&console.log(t.stack),console.error(t)}};a.process(e,function(){c.scheduleAction(function(){p()})})}});M.ANIMATION_DURATION=300,M.HORIZONTAL=0,M.VERTICAL=1,M.POURCENTAGE=0,M.PIXEL=1,d.SlideController=M,l.ANIMATION_DURATION=350,l.NEXT="next",l.PRED="pred",l.FIRST="first",l.LAST="last",l.prototype={_is_tactile:!1,_owner_handler_event_extended:!1,_owner_handler_event:null,_animation_duration:l.ANIMATION_DURATION,_last_comp_id:null,_states_array:null,__nb_panels:0,_view_size:null,destructor:function(){delete this._states_array,o.prototype.destructor.call(this)},initComponent:function(){o.prototype.initComponent.call(this),this.isTactile=this._is_tactile,this._updateViewSize()},push:function(t,i,e,n){if(t){i||(i={});var s=o.prototype.push.call(this,t,i,e,n);if(s){if(this._states_array.push(s),1===++this.__nb_panels)return this.initialComponent=s,this._last_comp_id=s,s;if(this.addTransition(this._last_comp_id,s,l.NEXT),this.addTransition(s,this._last_comp_id,l.PRED),this.addTransition(s,this._initial_component,l.FIRST),this._last_state=s,this._last_comp_id===this._initial_state){if(state=this._fsm._list_of_state[s],!state)return void console.error("Unknown error in vs.fx.StackController.push");state.comp||(state.comp=this._owner.createAndAddComponent(state.comp_name,state.init_data,e),state.comp.configure(state.init_data),state.comp.setStyle("position","absolute"),state.comp&&state.comp.propertiesDidChange&&state.comp.propertiesDidChange(),state.comp.propertyChange()),state.comp.show()}return this._last_comp_id=s,s}}},_updateViewSize:function(){},remove:function(t){if(t){var i=null;p.isString(t)?i=t:p.isString(t)||(i=t.id);var e=this._states_array.findItem(i);if(-1!==e){this._fsm.removeTransitionTo(i,l.NEXT),this._fsm.removeTransitionFrom(i,l.PRED),this._fsm.removeTransitionFrom(i,l.FIRST),this._states_array.remove(e),this.__nb_panels--;this._fsm._list_of_state[i];if(0===e&&this.__nb_panels>0){this._initial_component=this._states_array[0];for(var n in this._states_array)n!==i&&n!==this._initial_component&&(this._fsm.removeTransitionFrom(n,l.FIRST),this.addTransition(n,this._initial_component,l.FIRST))}0===this.__nb_panels&&(this._initial_component=void 0,this._fsm._current_state=void 0),this._initial_component&&(this._fsm._current_state===i?0===e?this._fsm.goTo(this._initial_component):(e===this._states_array.length&&e--,this._fsm.goTo(this._states_array[e])):this._fsm.goTo(this._fsm._current_state)),o.prototype.remove.call(this,t)}}},orientationDidChange:function(t){this._updateViewSize()},goToViewId:function(t,i,e){var n=this._states_array.findItem(t);if(-1===n)return!1;this.goToViewAt(n,i,e)},goToViewAt:function(t,i,e){if(t<0)return!1;if(t>this._states_array.length)return!1;var n=this._states_array.findItem(this._fsm._current_state);if(n===t)return!0;var s=this._fsm._list_of_state[this._fsm._current_state];if(t>n){for(;n<t-1;)this._fsm.fsmNotify(l.NEXT,null,!0),n++;this._fsm.fsmNotify(l.NEXT,null,!0);o=this._fsm._list_of_state[this._fsm._current_state];this._stackAnimateComponents(1,s.comp,o.comp,i,e)}else{for(;t+1<n;)this._fsm.fsmNotify(l.PRED,null,!0),n--;this._fsm.fsmNotify(l.PRED,null,!0);var o=this._fsm._list_of_state[this._fsm._current_state];this._stackAnimateComponents(-1,s.comp,o.comp,i,e)}},_stackAnimateComponents:function(t,i,e,n,s){},_animateComponents:function(t,i,e,n,s,o){},goToNextView:function(t,i){var e=this._fsm._list_of_state[this._fsm._current_state],n=this._fsm.fsmNotify(l.NEXT,null,!0),s=this._fsm._list_of_state[this._fsm._current_state];return n&&this._stackAnimateComponents(1,e.comp,s.comp,t,i),n},goToPreviousView:function(t,i){var e=this._fsm._list_of_state[this._fsm._current_state],n=this._fsm.fsmNotify(l.PRED,null,!0),s=this._fsm._list_of_state[this._fsm._current_state];return n&&this._stackAnimateComponents(-1,e.comp,s.comp,t,i),n},goToFirstView:function(t,i,e){var n=this._fsm._list_of_state[this._fsm._current_state],s=this._fsm.fsmNotify(l.FIRST,null,!0),o=this._fsm._list_of_state[this._fsm._current_state];return s&&this._stackAnimateComponents(e||-1,n.comp,o.comp,t,i),s},goToLastView:function(t,i,e){var n=this._fsm._list_of_state[this._fsm._current_state],s=this._fsm.goTo(this._last_state,null,{on:l.LAST,data:null},i),o=this._fsm._list_of_state[this._fsm._current_state];return s&&this._stackAnimateComponents(e||1,n.comp,o.comp,t,i),s},handleEvent:function(t){}},p.extendClass(l,o),p.defineClassProperties(l,{viewSize:{set:function(t){t&&p.isArray(t)&&2===t.length&&p.isNumber(t[0])&&p.isNumber(t[1])&&(this._view_size||(this._view_size=[]),this._view_size[0]=t[0],this._view_size[1]=t[1],this._updateViewSize())},get:function(){return this._view_size?this._view_size.slice():this._owner.size}},isTactile:{set:function(t){if(t){if(this._is_tactile=!0,!this._owner||!this._owner.view)return;this._owner_handler_event_extended||(this._owner_handler_event=this._owner.handleEvent,this._owner.handleEvent=this.handleEvent,c.addPointerListener(this._owner.view,u.POINTER_START,this._owner,!1)),this._owner_handler_event_extended=!0}else{if(this._is_tactile=!1,!this._owner||!this._owner.view)return;this._owner_handler_event_extended&&(c.removePointerListener(this._owner.view,u.POINTER_START,this._owner,!1),this._owner.handleEvent=this._owner_handler_event,this._owner_handler_event_extended=!1)}},get:function(){return this._is_tactile}},animationDuration:{set:function(t){t||(t=0),p.isNumber(t)&&(this._animation_duration=t)}}}),d.StackController=l;var Y=c.core.createClass({parent:c.fx.StackController,_is_circular:!1,_is_continuous_swipe:!1,__delta:0,__current_pos:0,_orientation:0,properties:{orientation:{set:function(t){t!==Y.HORIZONTAL&&t!==Y.VERTICAL||(this._orientation=t,this._updateViewSize())},get:function(){return this._orientation}},isTactile:{set:function(t){if(t){if(this._is_tactile=!0,!this._owner||!this._owner.view)return;this._owner_handler_event_extended||this.__drag_recognizer||(this.__drag_recognizer=new m.DragRecognizer(this),this._owner.addPointerRecognizer(this.__drag_recognizer)),this._owner_handler_event_extended=!0}else{if(this._is_tactile=!1,!this._owner||!this._owner.view)return;this._owner_handler_event_extended&&(this.__drag_recognizer&&(this._owner.removePointerRecognizer(this.__drag_recognizer),this.__drag_recognizer=null),this._owner_handler_event_extended=!1)}},get:function(){return this._is_tactile}},isCircular:{set:function(t){this._is_circular=!!t},get:function(){return this._is_circular}},isContinuousSwipe:{set:function(t){this._is_continuous_swipe=!!t},get:function(){return this._is_continuous_swipe}}},constructor:function(t){this._super(t),this._orientation=Y.HORIZONTAL,arguments.length&&(this.animationDuration=Y.ANIMATION_DURATION)},_updateViewSize:function(){var t,i,e,n,s=this._owner.size;for(this._orientation===Y.HORIZONTAL?n=s[0]:this._orientation===Y.VERTICAL&&(n=s[1]),t=0;t<this._states_array.length;t++)i=this._states_array[t],(e=this._fsm._list_of_state[i])&&e.comp&&(this._orientation===Y.HORIZONTAL?e.comp.translate(n*t,0,0):this._orientation===Y.VERTICAL&&e.comp.translate(0,n*t,0))},push:function(t,i,e,n){if(t){i||(i={});var s=o.prototype.push.call(this,t,i,e,n);if(s){if(this._states_array.push(s),1===++this.__nb_panels)return this.initialComponent=s,this._last_comp_id=s,s;if(this.addTransition(this._last_comp_id,s,l.NEXT),this.addTransition(s,this._last_comp_id,l.PRED),this.addTransition(s,this._initial_component,l.FIRST),this._last_state=s,state=this._fsm._list_of_state[s],state)return this._last_comp_id===this._initial_component?(state.comp||(state.comp=this._owner.createAndAddComponent(state.comp_name,state.init_data,e),state.comp.configure(state.init_data),state.comp.setStyle("position","absolute"),state.comp&&state.comp.propertiesDidChange&&state.comp.propertiesDidChange(),state.comp.propertyChange()),state.comp.show(),state.comp.setStyle("z-index",this.__nb_panels),this.configureNewComponent(state.comp)):state.comp&&(state.comp.setStyle("z-index",this.__nb_panels),this.configureNewComponent(state.comp)),this._last_comp_id=s,s;console.error("Unknown error in vs.fx.StackController.push")}}},configureNewComponent:function(t){var i=this._owner.size;this._orientation===Y.HORIZONTAL?state.comp.translate(i[0]*(this.__nb_panels-1),0,0):this._orientation===Y.VERTICAL&&state.comp.translate(0,i[1]*(this.__nb_panels-1),0)},didDrag:function(t,i){if(this._orientation===Y.HORIZONTAL?this.__delta=t.dx:this.__delta=t.dy,this._is_continuous_swipe){var e=this._owner._holes.children;e.style.webkitTransitionDuration="0ms",f(e,"translate3D("+(this.__delta+this.__current_pos)+"px,0,0)")}},didDragEnd:function(){function t(){var t=i._owner._holes.children;t.style.webkitTransitionDuration=i._animation_duration+"ms",i._orientation===Y.HORIZONTAL?f(t,"translate3D("+i.__current_pos+"px,0,0)"):f(t,"translate3D(0,"+i.__current_pos+"px,0)")}var i=this;this.__delta>50?(!this._fsm.getAccessibleStateOn(l.PRED)&&this._is_circular?this.goToLastView(null,null,-1):this.goToPreviousView())||t():this.__delta<-50?(!this._fsm.getAccessibleStateOn(l.NEXT)&&this._is_circular?this.goToFirstView(null,null,1):this.goToNextView())||t():this._is_continuous_swipe&&t()},refresh:function(){l.prototype.refresh.call(this),this._updateViewSize()},_stackAnimateComponents:function(t,i,e,n,s){var o=this._owner.size,a=this._owner._holes.children,r=this._states_array.indexOf(e.id);a.style.webkitTransitionDuration="0ms",this._orientation===Y.HORIZONTAL?this.__current_pos=r*-o[0]:this.__current_pos=r*-o[1];var _=this;!function(){try{e.show(),e.refresh(),c.scheduleAction(function(){a.style.webkitTransitionDuration=s?"0ms":_._animation_duration+"ms",_._orientation===Y.HORIZONTAL?f(a,"translate3D("+_.__current_pos+"px,0,0)"):f(a,"translate3D(0,"+_.__current_pos+"px,0)")})}catch(t){t.stack&&console.log(t.stack),console.error(t)}}()}});p.extend(Y.prototype,m.RecognizerManager),Y.ANIMATION_DURATION=300,Y.HORIZONTAL=0,Y.VERTICAL=1,Y.PIXEL=1,d.SwipeController=Y}(window);
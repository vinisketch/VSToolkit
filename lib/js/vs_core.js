!function(t,e){function i(){return"vs_id_"+w++}function n(){return"vs_id_"+(new Date).getTime()+Math.floor(1e6*Math.random())}function s(t){this.parent=x.core.Model,this.parent(t),this.constructor=x.core.Array}function r(t,e){var i,n,s,r={};for(var o in e){var a=e[o];if(C.isNumber(a))i=a,n={},s="_"+C.underscore(o),i&x.core.Object.PROPERTY_IN&&(n.set=function(t,e){return function(i){this[e]=i,this.propertyChange(t)}}(o,s)),i&x.core.Object.PROPERTY_OUT&&(n.get=function(t){return function(){return this[t]}}(s));else if(C.isString(a)){var _=W.exec(a);if(!_||3!=_.length)throw"Unvalid property path: "+a;(n={}).set=function(t,e){return function(i){for(var n=this,s=t.split(".");n&&s.length;)n=n[s.shift()];n&&(n[e]=i),this.propertyChange(e)}}(_[1],_[2]),n.get=function(t,e){return function(){for(var i=this,n=t.split(".");i&&n.length;)i=i[n.shift()];if(i)return i[e]}}(_[1],_[2])}else"object"==typeof a&&(n=a);r[o]=n}C.defineClassProperties(t,r)}function o(t){this.dataflow_node=[],this.dataflow_edges={},this.is_propagating=!1,this.__shouldnt_propagate__=0,this._list_node=[],this._edges_from={},t&&t.__df__&&t.__df__.push(this)}function a(t){this.parent=N.EventSource,this.parent(t),this.constructor=x.core.DataStorage,this.__models__={}}function _(){this.orientation=null,this.deviceId=null,this.browserDetect(),this.orientationDetect(),this.screenDetect()}function h(t){this.parent=O,this.parent(t),this.constructor=N.EventSource,this.__bindings__={},this.__node_binds__={}}function c(t){this.parent=a,this.parent(t),this.constructor=x.core.LocalStorage}function u(){}function d(t,e){if(t&&e){var i={handler_list:e,event:t};z.push(i),m()}}function f(t,e){t&&e&&(L={handler_list:e,event:t},m())}function p(t,e){function i(){--a<=0&&(e?J=!1:X=!1)}function n(t){if(t)try{C.isFunction(t.func_ptr)?t.func_ptr.call(t.obj,_):C.isString(t.func_name)&&C.isFunction(t.obj[t.func_name])?t.obj[t.func_name](_):C.isFunction(t.obj.notify)&&t.obj.notify(_)}catch(t){t.stack?console.error(t.stack):console.error(t)}i()}var s=t.handler_list,r=s.length,o=r,a=r,_=t.event;for(e?J=!0:X=!0,o||i(),o=0;o<r;o++)e?n(s[o]):function(t){q(function(){n(t)})}(s[o])}function g(){X||J||p(z.shift())}function S(){p(L,!0),L=null}function v(){var t=V;if(Z=!1,t.length){V=B,B=t;try{for(var e=0,i=t.length;e<i;e++)t[e].call()}catch(t){t.stack?console.error(t.stack):console.error(t)}t.length=0}}function m(){L&&S(),0===z.length&&0===V.length||Y||(X||J?q(function(){Y=!1,m()}):(V.length&&Q(),z.length&&g()))}function y(t){this.parent=h,this.parent(t),this.constructor=x.core.Model,this.__links__=[]}function O(t){this.constructor=N.Object,C.isString(t)?this._id=t:t&&t.id?this._id=t.id:this._id=i(),this.__df__=[],t&&(this.__config__=t)}function T(t){return t&&C.isFunction(t.clone)?t.clone():C.clone(t)}function E(t,e){C.isNumber(t)&&(this.x=t),C.isNumber(e)&&(this.y=e)}function P(t){this.parent=a,this.parent(t),this.constructor=P,this._xhrs={},this._headers={}}function b(t){this.parent=N.Object,this.parent(t),this.constructor=b}function k(t){this.parent=N.Task,this.parent(),this.constructor=k,this._tasksAndParams=[],this._state=b.STOPPED,arguments.length&&this.setTasks(arguments)}function R(t){this.parent=N.Task,this.parent(),this.constructor=R,this._tasksAndParams=[],this._state=b.STOPPED,arguments.length&&this.setTasks(arguments)}function D(t){this.parent=N.Task,this.parent(),this.constructor=D,this._state=b.STOPPED,this.time=t}var A=t.document,x=t.vs,C=x.util,N=x.core,w=0;N.createId=i,N.createUniqueId=n;var I=N.createClass({parent:N.EventSource,_url:"",_clb_param_name:"callback",__index:0,properties:{url:{set:function(t){C.isString(t)&&(this._url=t)}},clbParamName:{set:function(t){C.isString(t)&&(this._clb_param_name=t)}},responseJson:{get:function(){return this._response_json}}},send:function(){var e=this,i="jsonp"+e._id+e.__index++,n=this._clb_param_name+"="+i,s=e._url,r=s.length-1;"?"===s[r]?s+=n:"-1"!==s.indexOf("?")?s+="&"+n:"/"===s[r]?s=s.substr(0,r)+"?"+n:s+="?"+n;var o=C.importFile(s,null,null,"js"),a=function(){o&&(o.parentElement.removeChild(o),o=void 0)},_=setTimeout(function(){a(),i in t&&delete t[i],e.propagate("loaderror","Impossible to load data")},3e3);t[i]=function(n){clearTimeout(_),a(),delete t[i],n&&(n.error?e.propagate("loaderror",n.error):(e._response_json=n,e.outPropertyChange(),e.propagate("jsonload",n)))}}});N.AjaxJSONP=I,s.prototype={_data:null,_model_class:null,_index:null,_value:null,initComponent:function(){this._data=[],this.forEach=Array.prototype.forEach.bind(this._data)},forEach:function(){},item:function(t){if(C.isNumber(t)&&!(t<0||t>this._data.length))return this._data[t]},_instanciateModel:function(t){if(t instanceof x.core.Model)return t;if(t instanceof Object&&this._model_class)try{var e=new this._model_class(t);return e.init(),e}catch(t){t.stack&&console.log(t.stack),console.error(t)}return t},add:function(){for(var t=[],e=0;e<arguments.length;e++)t.push(this._instanciateModel(arguments[e]));return this._data.push.apply(this._data,t),this.hasToPropagateChange()&&this.change("add"),this.length},addAtIndex:function(){if(!(arguments.length<2)){for(var t=[],e=1;e<arguments.length;e++)t.push(this._instanciateModel(arguments[e]));this._data.splice.apply(this._data,t),this.hasToPropagateChange()&&this.change("add",{from:t[0],to:t.length-2})}},remove:function(t,e){this._data.remove(t,e),this.hasToPropagateChange()&&this.change("remove",{from:t,to:e})},removeAll:function(){this._data=[],this._index=-1,this._value=void 0,this.forEach=Array.prototype.forEach.bind(this._data),this.hasToPropagateChange()&&this.change("removeall")},clear:function(t){var e=0,i=this._data.length;if(t)for(;e<i;e++)x.util.free(this._data[e]);this.removeAll()},indexOf:function(){throw"method not yet implemented"},toJSON:function(){var t,e=this._toJSON(),i=0,n=this._data.length;for(e.data=[];i<n;i++)void 0!==(t=this._data[i])&&(t instanceof Date?t='"/Date('+t.getTime()+')/"':t&&t.toJSON&&(t=t.toJSON()),e.data.push(t));return e},parseData:function(t){function e(t){for(a._data=[],a.forEach=Array.prototype.forEach.bind(a._data),i=0;i<t.length;i++)o=t[i],(r=a._model_class?(new a._model_class).init():C.isArray(o)?(new s).init():C.isUndefined(o)||C.isString(o)||C.isNumber(o)||"boolean"==typeof o||null==o||o instanceof Date?null:(new y).init())?(r.parseData(o),a.add(r)):a.add(o)}var i,n,r,o,a=this;if(this.stopPropagation(),C.isArray(t))e(t);else for(n in t)"data"==n?e(t.data):this._parse_property(n,t[n]);this.change()}},C.extendClass(s,N.Model),C.defineClassProperties(s,{data:{set:function(t){if(!this.__i__)throw"Component not initialized";if(C.isArray(t))this._data=t.slice(),this.forEach=Array.prototype.forEach.bind(this._data);else{if(!(t instanceof s))return;this._data=t._data.slice(),this.forEach=Array.prototype.forEach.bind(this._data)}this.hasToPropagateChange()&&this.change("add")},get:function(){if(!this.__i__)throw"Component not initialized";return this._data.slice()}},length:{get:function(){if(!this.__i__)throw"Component not initialized";return this._data.length}},modelClass:{set:function(t){C.isFunction(t)&&(this._model_class=t)}},index:{set:function(t){C.isString(t)&&(t=parseInt(t,10)),C.isNumber(t)&&(t<0||t>this._data.length||(t=Math.floor(t),this._index=t,this._value=this._data[t],this.propertyChange("value")))},get:function(){return this._index}},value:{get:function(){return this._value}}}),N.Array=s;var j=Object.prototype.constructor;x.core.Object.PROPERTY_IN=1,x.core.Object.PROPERTY_OUT=2,x.core.Object.PROPERTY_IN_OUT=3;var W=/(\w+[.\w+]*)#(\w+)/;N.createClass=function(t){var e=null,i={},n=x.core.Object,s={};if(e=function(){this.parent=e.__spec.parent,e.__spec&&e.__spec._constructor?e.__spec._constructor.apply(this,arguments):e.__spec&&e.__spec.parent&&this.parent.apply(this,arguments),this.constructor=e},t&&t.parent&&(n=t.parent,delete t.parent),t&&t.properties&&(s=t.properties,delete t.properties),i.parent=n,t&&t.constructor&&t.constructor!==j&&(i._constructor=t.constructor,i._constructor._super_func_=n),e.__spec=i,t&&(e.prototype=t,t.constructor=e),n.prototype&&C.extendClass(e,n),t)for(key in t)if(t.hasOwnProperty(key)){var o=t[key],a=n.prototype[key];C.isFunction(o)&&C.isFunction(a)&&(o._super_func_=a)}return r(e,s),e};var F=function(t,e){this._base_object=t,this._previous_object=void 0,this.property_out=e};F.prototype.to=function(t,e,i){return x._default_df_.connect(this._base_object,this.property_out,t,e,i),this._previous_object=t,this},F.prototype.connect=function(t){var e=this._previous_object||this._base_object;return new F(e,t)};var M=1;o.__nb_propagation=0,o.prototype={propagate_values:function(e){var i,n,s,r,o,a,_=this.dataflow_edges[e._id],h=0,c=0,l=0,u=0,d=0,f=null;if(_)for(u=_.length,h=0;h<u;h++)if((i=_[h])&&(o=i[0])&&(n=i[2])&&n.length)for(c=0;c<n.length;c++){for(f=(r=n[c])[3],a=[],d=(s=r[1]).length,l=0;l<d;l++)a.push(s[l].call(e));if(f&&(a=f.apply(t,a),C.isArray(a)||(a=[a])),s=r[2],d=s.length,a.length!==d)return void console.error("Dataflow, invalid parameters");for(l=0;l<d;l++)s[l].call(o,a[l]);o.__input_property__did__change__=!0}},propagate:function(t,e,i){if(!this.is_propagating&&!this.__shouldnt_propagate__){this.is_propagating=!0,o.__nb_propagation++;var n=0,s=this.dataflow_node,r=s.length;if(t){for(;n<r&&s[n]!==t;)n++;if(n<r-1){if(!i&&t.propertiesDidChange&&t.propertiesDidChange())return o.__nb_propagation--,void(this.is_propagating=!1);this.propagate_values(t),n++}else n=0}for(;n<r;n++)if((t=s[n])&&t.__input_property__did__change__){if(t.__input_property__did__change__=!1,t.propertiesDidChange&&t.propertiesDidChange())continue;this.propagate_values(t)}o.__nb_propagation--,this.is_propagating=!1}},connect:function(t,e,i,n,s){var r,o,a,_,h,c,l,u,d,f,p=M++;if(r=C.isString(t)?t:t._id,t=O._obs[r]){if(-1===t.__df__.indexOf(this)&&t.__df__.push(this),o=C.isString(i)?i:i._id,C.isString(e))a=[e];else{if(!C.isArray(e))return void console.warn("DataFlow.connect, error");a=e}if(C.isString(n))_=[n];else{if(!C.isArray(n))return void console.warn("DataFlow.connect, error");_=n}if(s||_.length===a.length){for(-1===this._list_node.indexOf(r)&&this._list_node.push(r),-1===this._list_node.indexOf(o)&&this._list_node.push(o),(h=this._edges_from[r])||(h=[],this._edges_from[r]=h),l=h.length,c=0;c<l;c++)if((u=h[c])[0]===o){d=u[2];break}return d||(d=[],h.push([o,1,d])),f=[p,a.slice(),_.slice(),s],d.push(f),p}console.warn("DataFlow.connect, error")}},unconnect:function(){1===arguments.length?this._unconnect_by_id(arguments[0]):this._unconnect_by_params.apply(this,arguments)},_unconnect_by_params:function(t,e,i,n){function s(t,e){e.forEach(function(e){var i=t.indexOf(e);-1!==i&&t.remove(i)})}var r,o,a,_,h,c,l,u;M++;if(r=C.isString(t)?t:t._id,(h=this._edges_from[r])&&(t=O._obs[r])&&-1!==t.__df__.indexOf(this)){if(o=C.isString(i)?i:i._id,C.isString(e))a=[e];else{if(!C.isArray(e))return void console.warn("DataFlow.unconnect, error");a=e}if(C.isString(n))_=[n];else{if(!C.isArray(n))return void console.warn("DataFlow.unconnect, error");_=n}for(c=0;c<h.length;c++)if((l=h[c])[0]===o){u=l[2];for(var d,f=0;f<u.length;)d=u[f],properties_out_s=d[1],properties_in_s=d[2],s(properties_out_s,a),s(properties_in_s,_),0===properties_out_s.length||0===_.length?u.remove(f):f++;0===u.length?h.remove(c):c++}else c++}},_unconnect_by_id:function(t){for(var e in this._edges_from){var i=this._edges_from[e];if(i)for(var n=i.length,s=0;s<n;s++)for(var r,o=i[s][2],a=0,_=o.length;a<_;a++)if((r=o[a])&&r[0]===t)return void o.remove(a)}},_sort:function(){var t,e,i,n,s=this._list_node.length,r=[];for(t=0;t<s;t++)r[t]=0;for(i in this._edges_from)for(n=this._edges_from[i],e=0;e<n.length;e++)r[this._list_node.findItem(n[e][0])]++;for(var o=this._list_node.slice(),a=[],_=0;0!==o.length;){var h=this._array_min(r),c=r[h];r.remove(h);var l=o[h];if(o.remove(h),c>0&&_++,a.push(l),n=this._edges_from[l])for(e=0;e<n.length;e++){var u=o.findItem(n[e][0]);-1!==u&&r[u]--}}if(this._list_node=a,this.is_sorted=!0,this.is_cyclic=_>0,_>0){var d=Object.keys(this._edges_from).length;console.warn("WARNING: Cycles detected during topological sort.%d dependencies out of %d have been violated.\n",_,d)}return!this.is_cyclic},_array_min:function(t){var e=t.length;if(0===e)return-1;if(1===e)return 0;for(var i=0,n=t[i],s=1;s<t.length;s++)t[s]<n&&(n=t[s],i=s);return i},build:function(){this._sort(),this._data_optimize(this._edges_from,this._list_node)},pausePropagation:function(){this.__shouldnt_propagate__++},restartPropagation:function(){--this.__shouldnt_propagate__<0&&(this.__shouldnt_propagate__=0)},_data_optimize:function(t,e){if(e&&t){var i,n,s,r,o,a,_,h,c,l,u,d,f,p,g,S,v,m,y,T=[];for(i=0;i<e.length;i++)d=e[i],(p=O._obs[d])&&T.push(p);this.dataflow_node=T,T={};for(d in t)if((p=O._obs[d])&&(r=t[d],o=[],T[d]=o,r))for(i=0;i<r.length;i++)if(a=r[i],_=[3],o.push(_),f=a[0],g=O._obs[f])for(_[0]=g,_[1]=a[1],h=a[2],c=[],_[2]=c,n=0;n<h.length;n++){for(l=h[n],u=[4],c.push(u),u[0]=l[0],C.isFunction(l[3])&&(u[3]=l[3]),m=l[1],y=[],s=0;s<m.length;s++)S=m[s],(v=p.getPropertyDescriptor(S))&&(v.get?y.push(v.get):y.push(function(t){return function(){return this[t]}}("_"+C.underscore(S))));for(u[1]=y,m=l[2],y=[],s=0;s<m.length;s++)S=m[s],(v=g.getPropertyDescriptor(S))&&(v.set?y.push(v.set):y.push(function(t){return function(e){this[t]=e}}("_"+C.underscore(S))));u[2]=y}this.dataflow_edges=T}}},N.DataFlow=o,x._default_df_=new o,a.prototype={__models__:null,registerModel:function(t,e){t&&e&&(this.__models__[t]&&error.log("Model with the name already registered."),this.__models__[t]=e,e._sync_service_=this)},removeModel:function(t){t&&this.__models__[t]&&delete this.__models__[t]},save:function(t){},load:function(t){}},C.extendClass(a,N.EventSource),N.DataStorage=a,_.OS_UNKNOWN=0,_.OS_WINDOWS=1,_.OS_MACOS=2,_.OS_LINUX=4,_.OS_IOS=5,_.OS_WP7=6,_.OS_BLACK_BERRY=7,_.OS_SYMBIAN=8,_.OS_ANDROID=9,_.OS_MEEGO=10,_.OS_FIREFOX=11,_.SR_UNKNOWN=0,_.SR_QVGA=1,_.SR_WQVGA=2,_.SR_HVGA=4,_.SR_VGA=5,_.SR_WVGA=6,_.SR_FWVGA=7,_.SR_SVGA=8,_.SR_DVGA=9,_.SR_WDVGA=10,_.SR_XGA=11,_.SR_N_HD=12,_.SR_Q_HD=13,_.SR_WXGA=14,_.SR_QXGA=15,_.BROWSER_UNKNOWN=0,_.BROWSER_CHROME=1,_.BROWSER_SAFARI=2,_.BROWSER_OPERA=3,_.BROWSER_FIREFOX=4,_.BROWSER_MSIE=5,_.SS_UNKNOWN=0,_.SS_4_INCH=1,_.SS_7_INCH=2,_.SS_10_INCH=3,_.prototype={os:_.OS_UNKNOWN,browser:_.BROWSER_UNKNOWN,screenResolution:_.SR_UNKNOWN,screenRatio:0,screenSize:_.SS_UNKNOWN,virtualScreenSize:null,browserDetect:function(){function t(t){for(var e=t.length;e--;){var i=t[e].string,n=t[e].prop;if(i){if(i.match(t[e].subString))return t[e].identity}else if(n)return t[e].identity}}this.browser=t(_._data_browser)||_.BROWSER_UNKNOWN,this.os=t(_._data_OS)||_.OS_UNKNOWN},orientationDetect:function(){t.orientation?this.orientation=t.orientation:t.outerWidth>t.outerHeight?this.orientation=90:this.orientation=0},_getScreenSize:function(){return t.device&&t.device.width?[t.device.width,t.device.height]:this.os>=_.OS_IOS&&this.os<=_.OS_MEEGO?[t.screen.width,t.screen.height]:[t.outerWidth,t.outerHeight]},screenDetect:function(){var e,i=t.devicePixelRatio;if(i||(i=1),(e=this._getScreenSize())[0]>e[1]){var n=e[0];e[0]=e[1],e[1]=n}this.screenResolution=_._getScreenResolutionCode(e[0],e[1]),this.screenRatio=e[1]/e[0];var s=160*i;t.device&&t.device.dpi&&(s=device.dpi);var r=Math.sqrt(e[0]*e[0]+e[1]*e[1])/s;r<6?this.screenSize=_.SS_4_INCH:r<9?this.screenSize=_.SS_7_INCH:r<11&&(this.screenSize=_.SS_10_INCH)},getOrientation:function(){return this.orientation},setDeviceId:function(t){C.isString(t)&&(this.screenResolution=_.SR_UNKNOWN,this.deviceId=t,-1!=t.indexOf("wp7")?(this.os=_.OS_WP7,this.screenResolution=_.SR_WVGA,this.screenRatio=1.6,this.screenSize=_.SS_4_INCH):-1!=t.indexOf("iphone")?(this.os=_.OS_IOS,this.screenResolution=_.SR_HVGA,-1!=t.indexOf("_3_2")?this.screenRatio=1.5:-1!=t.indexOf("_16_9")&&(this.screenRatio=16/9),this.screenSize=_.SS_4_INCH):-1!=t.indexOf("ipad")?(this.os=_.OS_IOS,this.screenResolution=_.SR_XGA,this.screenRatio=4/3,this.screenSize=_.SS_10_INCH):-1!=t.indexOf("ffos")?this.os=_.OS_FIREFOX:-1!=t.indexOf("android")&&(this.os=_.OS_ANDROID,-1!=t.indexOf("_3_2")?this.screenRatio=1.5:-1!=t.indexOf("_16_10")?this.screenRatio=1.6:-1!=t.indexOf("_16_9")&&(this.screenRatio=16/9),-1!=t.indexOf("android_4")?this.screenSize=_.SS_4_INCH:-1!=t.indexOf("android_7")?this.screenSize=_.SS_7_INCH:-1!=t.indexOf("android_10")&&(this.screenSize=_.SS_10_INCH)))},generateDeviceId:function(e){if(e&&this.deviceId)return this.deviceId;this.orientationDetect(),this.screenDetect();var i="";switch(this.os){case _.OS_IOS:screenSize=this._getScreenSize(),320!==screenSize[0]&&480!==screenSize[0]||(i+="iphone"),640!==screenSize[0]&&960!==screenSize[0]||(i+="iphone"),768!==screenSize[0]&&1024!==screenSize[0]||(i+="ipad"),1536!==screenSize[0]&&2048!==screenSize[0]||(i+="ipad");break;case _.OS_ANDROID:i+="android";break;case _.OS_FIREFOX:i+="ffos";break;case _.OS_WP7:i+="wp7";break;case _.OS_BLACK_BERRY:i+="blackberry"}switch(this.screenSize){case _.SS_4_INCH:i+="_3";break;case _.SS_7_INCH:i+="_7";break;case _.SS_10_INCH:i+="_10"}switch(Math.abs(t.deviceConfiguration.screenRatio-1.5)<.1?i+="_3_2":Math.abs(t.deviceConfiguration.screenRatio-4/3)<.1?i+="_4_3":Math.abs(t.deviceConfiguration.screenRatio-1.6)<.1?i+="_16_10":Math.abs(t.deviceConfiguration.screenRatio-16/9)<.1&&(i+="_16_9"),this.orientation){case 90:case-90:i+="_l";break;case 0:case 180:i+="_p"}return i},setOrientation:function(e,i){var n,s,r,o,a=t.innerWidth,_=t.innerHeight;a>_&&(o=_,_=a,a=o);for(s in N.Object._obs)(r=N.Object._obs[s])&&(r._orientationWillChange&&r._orientationWillChange(e),r.orientationWillChange&&r.orientationWillChange(e));this.targetId&&(n=(n=this.targetId.replace("_p","")).replace("_l",""),n+=0===e||180===e?"_p":"_l",this.targetId=n,this.setActiveStyleSheet(this.targetId)),this.orientation=e,this.virtualScreenSize&&cordova&&cordova.exec&&cordova.exec(null,null,"VSD_Application","setAppSize",[{width:this.virtualScreenSize[0],height:this.virtualScreenSize[1]}]);var h=function(){var t,i;for(t in N.Object._obs)(i=N.Object._obs[t])&&i.orientationDidChange&&i.orientationDidChange(e)};i?h.call(this):setTimeout(h,100)},setActiveStyleSheet:function(t){C.setActiveStyleSheet(t)},registerTargetId:function(t,e){}},_._getScreenResolutionCode=function(e,i){return e*=t.devicePixelRatio,i*=t.devicePixelRatio,240===e&&320===i?_.SR_QVGA:240===e&&400===i?_.SR_WQVGA:320===e&&480===i?_.SR_HVGA:480===e&&640===i?_.SR_VGA:480===e&&800===i?_.SR_WVGA:320===e&&854===i?_.SR_WFVGA:600===e&&800===i?_.SR_SVGA:640===e&&960===i?_.SR_DVGA:640===e&&1136===i?_.SR_WDVGA:768===e&&1024===i?_.SR_XGA:360===e&&640===i?_.SR_N_HD:540===e&&960===i?_.SR_Q_HD:720===e&&1280===i?_.SR_WXGA:768===e&&1280===i?_.SR_WXGA:800===e&&1280===i?_.SR_WXGA:1536===e&&2048===i?_.SR_QXGA:void 0},_._estimateScreenSize=function(t){var e=t.width/t.xdpi,i=t.height/t.ydpi,n=Math.sqrt(e*e+i*i);return n<5?3:n<8?7:10},_._data_browser="undefined"!=typeof navigator?[{string:navigator.userAgent,subString:"Chrome",identity:_.BROWSER_CHROME},{string:navigator.vendor,subString:"Apple",identity:_.BROWSER_SAFARI,versionSearch:"Version"},{prop:t.opera,identity:_.BROWSER_OPERA,versionSearch:"Version"},{string:navigator.userAgent,subString:"Firefox",identity:_.BROWSER_FIREFOX},{string:navigator.userAgent,subString:"MSIE",identity:_.BROWSER_MSIE,versionSearch:"MSIE"}]:[],_._data_OS="undefined"!=typeof navigator?[{string:navigator.platform,subString:"Win",identity:_.OS_WINDOWS},{string:navigator.platform,subString:"Mac",identity:_.OS_MACOS},{string:navigator.platform,subString:"Linux",identity:_.OS_LINUX},{string:navigator.userAgent,subString:"iPad|iPhone|iPod",identity:_.OS_IOS},{string:navigator.userAgent,subString:"Android",identity:_.OS_ANDROID},{string:navigator.userAgent,subString:"Firefox",identity:_.OS_FIREFOX}]:[],void 0===t||t.deviceConfiguration||(t.deviceConfiguration=new _),N.DeviceConfiguration=_,N.FORCE_EVENT_PROPAGATION_DELAY=!1;t.navigator.msPointerEnabled;N.POINTER_START=x.POINTER_START,N.POINTER_MOVE=x.POINTER_MOVE,N.POINTER_END=x.POINTER_END,N.POINTER_CANCEL=x.POINTER_CANCEL,N.GESTURE_START=x.GESTURE_START,N.GESTURE_CHANGE=x.GESTURE_CHANGE,N.GESTURE_END=x.GESTURE_END;var G=function(t,e,i){this.src=t,this.srcTarget=t,this.type=e,this.data=i};G.prototype={src:null,srcTarget:null,type:"",data:null,destructor:function(){delete this.src,delete this.srcTarget,delete this.type,delete this.data}},N.Event=G,N.EVENT_SUPPORT_GESTURE=!1,h.prototype={__bindings__:null,__node_binds__:null,destructor:function(){var t,e;for(var i in this.__bindings__)!function(t){if(t)for(var e,i=t.length;i--;)e=t[i],u.release(e)}(this.__bindings__[i]),delete this.__bindings__[i];delete this.__bindings__;for(i in this.__node_binds__)if(void 0!==(e=this.__node_binds__[i]))for(t=0;t<e.length;t++)data=e[t],data.n.removeEventListener(event,data.h);else console.warn("vs.core.Object.destructor, no bind <"+i+" exists.");delete this.__node_binds__,O.prototype.destructor.call(this)},_clone:function(t,e){O.prototype._clone.call(this,t,e),t.__bindings__={},t.__node_binds__={}},bind:function(t,e,i){if(t&&e){var n=u.retain(),s=this.__bindings__[t];return n.configure(e,i),s||(s=[],this.__bindings__[t]=s),s.push(n),n}},unbind:function(t,e,i){!function(t){if(t)for(var n,s=0;s<t.length;)(n=t[s]).obj===e?C.isString(i)||C.isFunction(i)?n.func_name===i||n.func_ptr===i?(t.remove(s),u.release(n)):s++:(t.remove(s),u.release(n)):s++}(this.__bindings__[t])},propagate:function(t,e,i){var n,s=this.__bindings__[t];s&&0!==s.length?(n=new G(this,t,e),i&&(n.srcTarget=i),d(n,s)):this.__parent&&(i||(i=this),this.__parent.propagate(t,e,i))},notify:function(t){this.propagate(t.type,t.data)},nodeBind:function(t,e,i,n){if(t&&C.isString(e)){var s,r,o=this,a=null,_=null;if(void 0===i)i="notify";else if(C.isString(i)){if(!C.isFunction(this[i]))return void console.warn("vs.core.Object.nodeBind, unknown function named: "+i)}else{if(!C.isFunction(i))return void console.error("vs.core.Object.nodeBind, invalid func parameter");i=(a=i).name}_=n&&n!==U.ANY_MASK?function(t){try{if(!n&&(t.altKey||t.ctrlKey||t.shiftKey||t.metaKey))return;if(n===U.ALT&&!t.altKey)return;if(n===U.CTRL&&!t.ctrlKey)return;if(n===U.SHIFT&&!t.shiftKey)return;if(n===U.META&&!t.metaKey)return;t.src=t.currentTarget,t.data=t,a||(a=o[i]),a.call(o,t)}catch(t){t.stack&&console.log(t.stack),console.error(t)}}:function(t){try{t.src=t.currentTarget,t.data=t,a||(a=o[i]),a.call(o,t)}catch(t){t.stack&&console.log(t.stack),console.error(t)}},r=e+i,this.__node_binds__?(void 0===(s=this.__node_binds__[r])&&(s=[],this.__node_binds__[r]=s),s.push({n:t,h:_}),x.addPointerListener(t,e,_,!1)):console.error("nodeBind impossible")}},nodeUnbind:function(t,e,i){if(t&&C.isString(e)){var n,s,r,o;if(void 0===i)i="notify";else if(C.isString(i)){if(!C.isFunction(this[i]))return void console.warn("vs.core.Object.nodeUnbind, unknown function named: "+i)}else{if(!C.isFunction(i))return void console.error("vs.core.Object.nodeBind, invalid func parameter");i=i.name}if(s=e+i,void 0!==(r=this.__node_binds__[s])){for(n=0;n<r.length;)(o=r[n]).n===t?(x.removePointerListener(t,e,o.h,!1),r.remove(n)):n++;t._object_=void 0}else console.warn("vs.core.Object.nodeUnbind, no bind <"+e+","+i+"> exists.")}}},C.extendClass(h,O),N.EventSource=h;var H=function(t){this.parent=N.EventSource,this.parent(i()),this.constructor=H,this.owner=t,this._list_of_state={},this._list_input=new Array,this._list_output=new Array,this._initial_state="",this._current_state="",this._inputs={},this._output_action={}};H.prototype={destructor:function(){delete this._list_of_state,this.owner=void 0,delete this._list_of_state,delete this._list_input,delete this._list_output,delete this._inputs,delete this._output_action,N.EventSource.prototype.destructor.call(this)},_clone:function(t,e){h.prototype._clone.call(this,t,e),t.owner=t.__config__.owner,t._current_state="",t._inputs={},t._output_action={}},initWithData:function(t,e,i,n){if(t&&e&&i&&n){for(s=0;s<t.length;s++)this.addState(t[s]);for(s=0;s<e.length;s++)this.addInput(e[s]);for(s=0;s<i.length;s++)this.addOutput(i[s]);for(var s=0;s<n.length;s++)this.addTransition(n[s].from,n[s].to,n[s].on,n[s].output)}},initWithMatrix:function(t){for(e=1;e<t[0].length;e++)this.addState(t[0][e]);for(var e=1;e<t.length;e++)for(var i=t[e][0],n=1;n<t[0].length;n++){var s=t[0][n],r=t[e][n];if(r){var o=r.split("/");o[0]&&this.addInput(o[0]),o[1]&&this.addOutput(o[1]),this.addTransition(i,s,o[0],o[1])}}},addInput:function(t){t&&!this.existInput(t)&&this._list_input.push(t)},getInputs:function(){return this._list_input.slice()},existInput:function(t){if(t)return this._list_input.findItem(t)>-1},addOutput:function(t){t&&!this.existOutput(t)&&this._list_output.push(t)},getOutputs:function(){return this._list_output.slice()},existOutput:function(t){if(t)return this._list_output.findItem(t)>-1},addState:function(t){if(!t||this.existState(t))return!1;var e={};return e.transitionEvents={},this._list_of_state[t]=e,!0},removeState:function(t){return!(!t||!this.existState(t))&&(delete this._list_of_state[t],!0)},renameState:function(t,e){if(!t||!this.existState(t))return!1;if(!e||this.existState(e))return!1;this._list_of_state[e]=this._list_of_state[t],delete this._list_of_state[t],this._initial_state===t&&(this._initial_state=e);for(var i in this._list_of_state){var n=this._list_of_state[i];if(null!==n)for(var s in n.transitionEvents){var r=n.transitionEvents[s];r.to===t&&(r.to=e)}}return!0},getListState:function(){var t=[];for(var e in this._list_of_state)t.push(e);return t},existState:function(t){return!!t&&!!this._list_of_state[t]},addTransition:function(t,e,i,n){if(t&&this.existState(t)&&e&&this.existState(e)&&i&&this.existInput(i)){var s={on:i,to:e,output:n};this._list_of_state[t].transitionEvents[i]=s}},removeTransitionFrom:function(t,e){if(t&&this.existState(t)&&e&&this.existInput(e)){var i=this._list_of_state[t];i.transitionEvents[e]&&delete i.transitionEvents[e]}},removeTransitionTo:function(t,e){if(t&&this.existState(t)&&e&&this.existInput(e))for(var i in this._list_of_state){var n=this._list_of_state[i],s=n.transitionEvents[e];s&&s.to===t&&delete n.transitionEvents[e]}},getTransionsToState:function(t){if(this.existState(t)){var e=[];for(var i in this._list_of_state){var n=this._list_of_state[i];if(null!==n)for(var s in n.transitionEvents){var r=n.transitionEvents[s];if(r.to===t){var o=C.clone(r);o.from=i,e.push(o)}}}return e}},getTransionsFromState:function(t){if(this.existState(t)){var e=[],i=this._list_of_state[t];if(null===i)return null;for(var n in i.transitionEvents){var s=i.transitionEvents[n],r=C.clone(s);r.from=t,e.push(r)}return e}},switchStates:function(t,e){if(t!==e&&this.existState(t)&&this.existState(e)){for(var i=this.getTransionsToState(t),n=this.getTransionsFromState(t),s=this.getTransionsToState(e),r=this.getTransionsFromState(e),o=0;o<i.length;)(a=i[o]).from===e?i.remove(a):o++;for(o=0;o<n.length;)(a=n[o]).to===e?n.remove(a):o++;for(o=0;o<i.length;o++){a=i[o];this.removeTransitionFrom(a.from,a.on)}for(o=0;o<n.length;o++){a=n[o];this.removeTransitionFrom(a.from,a.on)}for(o=0;o<s.length;o++){a=s[o];this.removeTransitionFrom(a.from,a.on)}for(o=0;o<r.length;o++){var a=r[o];this.removeTransitionFrom(a.from,a.on)}for(o=0;o<i.length;o++){_=(a=i[o]).from===e?t:a.from;this.addTransition(_,e,a.on,a.output)}for(o=0;o<n.length;o++){h=(a=n[o]).from===e?t:a.to;this.addTransition(e,h,a.on,a.output)}for(o=0;o<s.length;o++){var _=(a=s[o]).from===t?e:a.from;this.addTransition(_,t,a.on,a.output)}for(o=0;o<r.length;o++){var h=(a=r[o]).to===t?e:a.to;this.addTransition(t,h,a.on,a.output)}this._initial_state===t?this._initial_state=e:this._initial_state===e&&(this._initial_state=t)}},setInput:function(t,e,i){if(t&&e&&i){if(e.bind)e.bind(i,this);else{if(!e.addEventListener)return;this.nodeBind(e,i)}var n=this._inputs[e];n||(n=[],this._inputs[e]=n),n.push([i,t,e])}},setOutput:function(t,e){t&&e&&(this._output_action[t]=e)},activate:function(){return!(!this._initial_state||!this._list_of_state[this._initial_state])&&(this.goTo(this._initial_state),!0)},goTo:function(t,e,i){if(!this.existState(t))return!1;if(this._current_state&&this._list_of_state[this._current_state],this._current_state=t,e&&this._output_action[e]){var n=this._output_action[e];C.isFunction(n)?n.call(this.owner,i):C.isString(n)&&this.owner[this._output_action[e]](i)}return!0},clear:function(){this._list_of_state={},delete this._list_input,delete this._list_output,this._list_input=new Array,this._list_output=new Array,this._initial_state="";for(var t in this._inputs)for(var e=this._inputs[t],i=0;i<e.length;i++){var n=e[i][2],s=e[i][0];n.bind?n.unbind(s,this):n.addEventListener&&this.nodeUnbind(n,s)}this._current_state=""},notify:function(t){var e=this._inputs[t.src];if(e)for(var i=0;i<e.length;i++){var n=e[i][0],s=e[i][1];t.type===n&&(this._list_of_state[this._current_state]&&this.fsmNotify(s,t.data))}},getAccessibleStateOn:function(t){if(this._list_of_state[this._current_state]){var e=this._list_of_state[this._current_state].transitionEvents[t];if(e)return this._list_of_state[e.to]}},fsmNotify:function(t,e,i){if(this._list_of_state[this._current_state]){var n=this._list_of_state[this._current_state].transitionEvents[t];return!!n&&(this.goTo(n.to,n.output,{on:t,data:e},i),!0)}}},C.extendClass(H,h),C.defineClassProperty(H,"initialState",{set:function(t){t?this.existState(t)&&(this._initial_state=t):this._initial_state=void 0},get:function(){return this._initial_state}}),N.Fsm=H,HTTPRequest=function(t){this.parent=N.EventSource,this.parent(t),this.constructor=HTTPRequest,this._headers={},this.__xhrs=[]},HTTPRequest.prototype={_url:"",_method:"GET",_login:"",_password:"",_content_type:"",_headers:null,__xhrs:null,destructor:function(){this.__xhrs.forEach(function(t){t&&t.onload&&t.onabort()}),this.__xhrs=null,this._headers=null,h.prototype.destructor.call(this)},setHeaders:function(t){if(t)for(var e in t)this._headers[e]=t[e]},send:function(t){var e=new XMLHttpRequest;try{this._response_text=null,this._response_xml=null,e.open(this._method,this._url,!0,this._login||null,this._password||null),e.setRequestHeader("Cache-Control","no-cache"),e.setRequestHeader("Pragma","no-cache");for(var i in this._headers)e.setRequestHeader(i,this._headers[i]);this._headers={},this._content_type&&e.setRequestHeader("Content-Type",this._content_type);var n=this;e.onabort=function(t){e.onload=e.onerror=e.onabort=null,delete e,n.propagate("loaderror",{status:"aborted"})},e.onerror=function(t){e.onload=e.onerror=e.onabort=null,delete e,n.propagate("loaderror",{status:"failed",response:t})},e.onload=function(){function t(t){return n.propagate("loaderror",t),delete e,!1}return e.onload=e.onerror=e.onabort=null,4!==e.readyState?t(xkr.statusText):200===e.status?(n._response_text=e.responseText,n._response_xml=e.responseXML,n.propagateChange(),n.propagate("textload",n._response_text),n._response_xml&&n.propagate("xmlload",n._response_xml),delete e,!0):t({status:e.statusText,response:e.response})},e.send(t),this.__xhrs.push(e)}catch(t){return e.onload=e.onerror=e.onabort=null,delete e,void this.propagate("loaderror",t)}}},C.extendClass(HTTPRequest,N.EventSource),C.defineClassProperties(HTTPRequest,{url:{set:function(t){C.isString(t)&&(this._url=t)}},method:{set:function(t){"GET"!=t&&"POST"!=t||(this._method=t)}},login:{set:function(t){C.isString(t)&&(this._login=t)}},password:{set:function(t){C.isString(t)&&(this._password=t)}},contentType:{set:function(t){C.isString(t)&&(this._content_type=t)}},responseText:{get:function(){return this._response_text}},responseXML:{get:function(){return this._response_xml}}}),N.HTTPRequest=HTTPRequest;var U=new h("__KEYBOARD__");U._handler_set_down=!1,U._handler_set_up=!1,U.managePrevent=function(t,e){var i,n=this.__bindings__[t];if(n)for(i=0;i<n.length;i++)if(n[i].prevent)return void e.preventDefault()},U.KEY_UP=1e3,U.ESC=27,U.ENTER=13,U.SPACE=32,U.BACKSPACE=8,U.SHIFT=16,U.CTRL=17,U.ALT=18,U.NUMLOCK=144,U.LEFT_ARROW=37,U.UP_ARROW=38,U.RIGHT_ARROW=39,U.DOWN_ARROW=40,U.L=76,U.S=83,U.Z=90,U.META=2e3,U.ANY_MASK=3e3,U.UNDO=256,U.REDO=257,U.SAVE=258,N.KEYBOARD=U,N.KEYBOARD.bind=function(t,e,i,n){var s=h.prototype.bind.call(this,t,e,i),r=this;return n&&(s.prevent=!0),t>U.KEY_UP?this._handler_set_up||(A.documentElement.addEventListener("keyup",function(t){r.managePrevent(t.keyCode,t),r.propagate(t.keyCode+U.KEY_UP,t)},!1),this._handler_set_up=!0):this._handler_set_down||(A.documentElement.addEventListener("keydown",function(t){!t.ctrlKey&&!t.metaKey||t.shiftKey||t.keyCode!==U.Z?(t.ctrlKey||t.metaKey)&&t.shiftKey&&t.keyCode===U.Z?(r.propagate(U.REDO),t.preventDefault()):!t.ctrlKey&&!t.metaKey||t.shiftKey||t.keyCode!==U.S?(t.ctrlKey||t.metaKey)&&!t.shiftKey&&t.keyCode?(r.managePrevent(U.META+t.keyCode,t),r.propagate(U.META+t.keyCode)):(r.managePrevent(t.keyCode,t),r.propagate(t.keyCode,t)):(r.propagate(U.SAVE),t.preventDefault()):(r.propagate(U.UNDO),t.preventDefault())},!1),this._handler_set_down=!0),s},c.prototype={save:function(t){function e(t){var e,n=i.__models__[t];if(n){try{e=JSON.stringify(n)}catch(t){t.stack&&console.log(t.stack),error.log(t),i.propagate("error",t)}localStorage.setItem(t,e)}}var i=this;if(t)e(t);else for(var t in this.__models__)e(t);i.propagate("save")},load:function(t){function e(t){try{var e=i.__models__[t];if(!e)return;var n=localStorage.getItem(t);e.parseJSON(n)}catch(t){t.stack&&console.log(t.stack),console.error("LocalStorate.load failed. "+t.toString())}}var i=this;if(t)e(t);else for(var t in this.__models__)e(t);i.propagate("load")}},C.extendClass(c,a),N.LocalStorage=c;var K=[];u.prototype.configure=function(t,e){this.obj=t,this.func_name=null,this.func_ptr=null,C.isFunction(e)?this.func_ptr=e:C.isString(e)&&(this.func_name=e)},u.retain=function(){return K.length?K.pop():new u},u.release=function(t){K.push(t)};var z=[],L=null,V=[],B=[],X=!1,J=!1,Y=!1;x.setImmediate;var q,Q;if(t.setImmediate)x.setImmediate=q=t.setImmediate.bind(t);else{var Z=!1;Q=t.postMessage?function(){var e="vs.scheduler"+Math.random();return t.addEventListener&&t.addEventListener("message",function(t){t.data===e&&v()},!1),function(){t.postMessage(e,"*")}}():function(){setTimeout(v,0)},t.setImmediate=x.setImmediate=q=function(t,e){V.push(t),Z||(Z=!0,Q())}.bind(t)}var $="__on_next_frame__";C.extend(x,{scheduleAction:function(t,e){C.isFunction(t)&&(e&&C.isNumber(e)?setTimeout(t,e):e===$?x.requestAnimationFrame(t):q(t))},ON_NEXT_FRAME:$}),y.prototype={__links__:null,__should_propagate_changes__:!0,_sync_service_:null,bindChange:function(t,e,i){e&&this.bind(t?"change:"+t:"change",e,i)},unbindChange:function(t,e,i){this.unbind(t?"change:"+t:"change",e,i)},stopPropagation:function(){this.__should_propagate_changes__=!1},hasToPropagateChange:function(){return this.__should_propagate_changes__},change:function(t,e,i){var n;this.__should_propagate_changes__=!0,n=new G(this,t=t?"change:"+t:"change",e);try{if(!i)for(var s=this.__links__.length;s--;)this.__links__[s].configure(this);"change"!==t&&f(n,this.__bindings__[t]),f(n,this.__bindings__.change)}catch(t){t.stack&&console.error(t.stack),console.error(t)}},clear:function(t){var e,i=this;this.getModelProperties().forEach(function(n){e="_"+C.underscore(n),t&&x.util.free(i[e]),i[e]=void 0})},propagate:function(t,e,i){this.__should_propagate_changes__=!0,h.prototype.propagate.call(this,t,e,i)},linkTo:function(t){t instanceof x.core.Object&&-1===this.__links__.indexOf(t)&&this.__links__.push(t)},unlinkTo:function(t){t instanceof x.core.Object&&this.__links__.remove(t)},propertyChange:function(t){if(x._default_df_&&x._default_df_.propagate(this,t),this.__should_propagate_changes__){var e=this.__links__.length;if(t)for(;e--;)this.__links__[e][t]=this[t];else for(;e--;)this.__links__[e].configure(this);this.change(null,null,!0)}},parseData:function(t){var e;this.stopPropagation();for(e in t)this._parse_property(e,t[e]);this.change()},_parse_property:function(t,e){var i,n,r=this.getModelProperties(),o="_"+C.underscore(t);e&&e.data||C.isArray(e)?(n=new s({id:e.id}).init()).parseData(e):n=e,-1===r.indexOf(t)&&(i={},o="_"+C.underscore(t),i.set=function(t,e){return function(i){this[e]=i,this.propertyChange(t)}}(t,o),i.get=function(t){return function(){return this[t]}}(o),this.defineProperty(t,i)),this[o]=n}},C.extendClass(y,h),N.Model=y,O.prototype={_id:"",__i__:!1,__input_property__did__change__:!1,__config__:null,__df__:null,init:function(t){if(this.__i__)return this;if(this._id||(this._id=i()),O._obs[this._id]){console.warn("Impossible to create an object with an already used id.");var e=this._id;this._id=n(),console.warn('The id "'+e+'" is replaced by "'+this._id+'".')}return O._obs[this._id]=this,t||this.initComponent(),this.__i__=!0,!t&&this.vsdInit&&this.vsdInit(),this.__config__&&(this.configure(this.__config__),this.__config__=null),this.componentDidInitialize&&this.componentDidInitialize(),this.initSkin&&(console.warn("Your application shouldn't use initSkin anymore.\n        You should rename by componentDidInitialize."),O.prototype.initSkin=function(){},this.initSkin(),O.prototype.initSkin=void 0),this},initComponent:function(){},componentDidInitialize:function(){},createId:function(){return console.warn("this.createId is deprecated, Use the static method vs.core.createId instead"),i()},configure:function(t){if("object"==typeof t){var e,i,n,s,r=!1;if(this.__df__&&this.__df__.forEach(function(t){t.pausePropagation()}),this.__configuration_process=!0,t instanceof y)if((s=this.getPropertyDescriptor("model"))&&s.set)this.model=t,r=!0;else for(e=t.getModelProperties(),n=0;n<e.length;n++)"id"!==(i=e[n])&&(this[i]=t[i],r=!0);else if(t)for(i in t)"id"!==i&&"node"!==i&&"node_ref"!==i&&"view"!==i&&(this[i]=t[i],r=!0);this.__configuration_process=!1,this.__df__&&this.__df__.length?this.__df__.forEach(function(t){t.restartPropagation(),r&&t.propagate(this)}):r&&this.propertiesDidChange&&this.propertiesDidChange()}},propertiesDidChange:function(){return!1},toJSON:function(){return this._toJSON()},parseJSON:function(t){try{this.parseData(t&&C.parseJSON(t)||{})}catch(t){t.stack&&console.log(t.stack),console.error("vs.core.Object.parseJSON failed. "+t.toString())}},parseData:function(t){var e,i;for(e in t)i=t[e],this["_"+C.underscore(e)]=i;this.inPropertyDidChange()},_toJSON:function(t){var e,i,n,s={},r=this.getModelProperties();if(!r)return s;for(var o=0;o<r.length;o++)e=r[o],void 0!==(i=this["_"+C.underscore(e)])&&(n=i instanceof Date?'"/Date('+i.getTime()+')/"':i&&i.toJSON?i.toJSON():i,s[e]=n);return s},destructor:function(){delete O._obs[this._id],this.__i__=!1},isDeleted:function(){return!this.__i__},propertyChange:function(t){this.__input_property__did__change__=!0,self=this,this.__df__&&this.__df__.forEach(function(t){t.propagate(self)})},inPropertyDidChange:function(){this.__input_property__did__change__=!0,o.__nb_propagation>0||this.__configuration_process||this.propertiesDidChange&&this.propertiesDidChange()},outPropertyChange:function(t){this.__input_property__did__change__=!0,self=this,this.__df__&&this.__df__.forEach(function(t){t.propagate(self,!1,!0)})},propagateChange:function(t){this.propertyChange(t)},connect:function(t){return new F(this,t)},link:function(t){if(!(t instanceof x.core.Model))throw"vs.core.Object.link; parameter is not a vs.core.Model";this.__model&&this.__model.unlinkTo(this),this.__model=t,this.__model.linkTo(this),this.configure(this.__model)},unlink:function(){if(this.__model){if(this.__model){this.__model.unlinkTo(this);var t=this.__model.getModelProperties();for(l=t.length,config={};l--;)config[t[l]]=null;this.configure(config)}this.__model=void 0}},clone:function(t,e){var n,s;if(e||(e={}),e[this._id])return e[this._id];if(t||(t={}),t.id||(t.id=i()),!C.isFunction(this.constructor))return console.warn("impossible to clone this object."),null;n=new this.constructor(t),e[this._id]=n;var r=Object.defineProperty?function(t,e,i){var n=e.getOwnPropertyDescriptor(t),s=i.getOwnPropertyDescriptor(t);if(n&&(n.get||n.set))s||(C.defineProperty(i,t,n),i.__properties__||(i.__properties__=[]),i.__properties__.push(t));else{var r=e[t];C.isArray(r)?i[t]=r.slice():i[t]=e[t]}}:function(t,e,i){var n=e.__lookupGetter__(t),s=e.__lookupSetter__(t),r=i.__lookupGetter__(t),o=i.__lookupSetter__(t);if(n&&!r&&i.__defineGetter__(t,n),s&&!o&&i.__defineSetter__(t,s),s||n)i.__properties__||(i.__properties__=[]),i.__properties__.push(t);else{var a=e[t];C.isArray(a)?i[t]=a.slice():i[t]=e[t]}};for(s in this)"parent"!==s&&"_id"!==s&&"constructor"!==s&&0!==s.indexOf("__")&&this.getPropertyDescriptor(s)&&(C.isFunction(this[s])&&!C.isFunction(n[s])?n[s]=this[s]:!n.isProperty(s)&&this.isProperty(s)&&r(s,this,n));return n.__i__=!1,n.init(),this._clone(n,e),this._clone_properties_value(n,e),this.__model&&(e&&e[this.__model._id]?n.link(e[this.__model._id]):n.link(this.__model)),n},_clone_properties_value:function(t,e){var i;for(i in this)"id"!=i&&this.isProperty(i)&&tt(i,this,t)},_clone:function(t,e){},getModelProperties:function(){var t=[];return this.__properties__&&(t=t.concat(this.__properties__)),this.constructor.__properties__&&(t=t.concat(this.constructor.__properties__)),t},isProperty:function(t){return!(!this.__properties__||-1===this.__properties__.indexOf(t))||-1!==this.constructor.__properties__.indexOf(t)},defineProperty:function(t,e){C.defineProperty(this,t,e),this.__properties__||(this.__properties__=[]),-1===this.__properties__.indexOf(t)&&this.__properties__.push(t)},getOwnPropertyDescriptor:function(t){return Object.getOwnPropertyDescriptor(this,t)},getPropertyDescriptor:function(t){function e(t,i){if(!t)return null;var n=Object.getPrototypeOf(t);if(!n)return null;var s=Object.getOwnPropertyDescriptor(n,i);return s||e(n,i)}var i=Object.getOwnPropertyDescriptor(this,t);return i||e(this,t)},_super:function(){var t=this._super.caller._super_func_;t&&t.apply(this,arguments)}},C.defineClassProperty(O,"id",{get:function(){return this._id}});var tt=Object.defineProperty?function(t,e,i){var n=e.getPropertyDescriptor(t),s=i.getPropertyDescriptor(t),r="_"+C.underscore(t);n&&s&&(n.get||n.set)&&(s.set?i[t]=T(e[r]):i[r]=T(e[r]))}:function(t,e,i){var n=e.__lookupGetter__(t),s=e.__lookupSetter__(t),r=i.__lookupSetter__(t),o="_"+C.underscore(t);(s||n)&&(r?i[t]=T(e[o]):i[o]=T(e[o]))};O._obs={},O.__propertyCloneValue=tt,N.Object=O,E.prototype={x:0,y:0,matrixTransform:function(t){var e=new x.CSSMatrix;e=e.translate(this.x,this.y,this.z||0);var i=new E((t=t.multiply(e)).m41,t.m42);return delete e,delete t,i}},x.Point=E,P.XHR=0,P.JSONP=1,P.prototype={_xhrs:null,_mode:0,_headers:null,_url:"",initComponent:function(){a.prototype.initComponent.call(this)},destructor:function(){a.prototype.destructor.call(this)},setHeaders:function(t){if(t){this._headers={};for(var e in t)this._headers[e]=t[e]}},save:function(t){function e(t){var e,n=i.__models__[t];if(n){try{e=JSON.stringify(n)}catch(t){t.stack&&console.log(t.stack),error.log(t),i.propagate("error",t)}P.setItem(t,e)}}var i=this;if(t)e(t);else for(var t in this.__models__)e(t);i.propagate("save")},load:function(t){this._mode===P.XHR&&this._load_xhr(t),this._mode===P.JSONP&&this._load_jsonp(t)},_load_xhr:function(t){function e(t){try{var e=i.__models__[t];if(!e)return;var n=i._url+t,s=e.getModelProperties(),r=0;if(s&&s.length){n+="?";for(var o=0;o<s.length;o++){var a=s[o],_=e["_"+C.underscore(a)];"id"!==a&&"modelClass"!==a&&((C.isString(_)||C.isNumber(_))&&(r++&&(n+="&"),n+=a+"="+escape(_)))}}var h=(new HTTPRequest).init();i._xhrs[h.id]=t,h.bind("textload",i,i._process_xhr_result),h.setHeaders(i._headers),h.url=n,h.method="GET",h.contentType="application/json",h.send()}catch(t){t.stack&&console.log(t.stack),console.error("LocalStorate.load failed. "+t.toString())}}var i=this;if(t)e(t);else for(var t in this.__models__)e(t)},_load_jsonp:function(t){function e(t){try{var e=i.__models__[t];if(!e)return;var n=i._url+t+".json",s=e.getModelProperties(),r=0;if(s&&s.length){n+="?";for(var o=0;o<s.length;o++){var a=s[o],_=e["_"+C.underscore(a)];"id"!==a&&"modelClass"!==a&&((C.isString(_)||C.isNumber(_))&&(r++&&(n+="&"),n+=a+"="+escape(_)))}}var h=(new I).init();i._xhrs[h.id]=t,h.bind("jsonload",i,i._process_json_result),h.url=n,h.send()}catch(t){t.stack&&console.log(t.stack),console.error("LocalStorate.load failed. "+t.toString())}}var i=this;if(t)e(t);else for(var t in this.__models__)e(t)},_sync:function(t,e,i){},_process_xhr_result:function(t){var e=t.data,i=t.src,n=this._xhrs[i.id];if(i.unbind("textload",this,this._process_xhr_result),x.util.free(i),delete this._xhrs[i.id],!e)return console.error("Failed to parse rss document that is null."),!1;var s=this.__models__[n];s&&(s.parseJSON(e),s.change(),this.propagate("load",s))},_process_json_result:function(t){var e=t.data,i=t.src,n=this._xhrs[i.id];i.unbind("textload",this,this._process_json_result),x.util.free(i),delete this._xhrs[i.id];var s=this.__models__[n];s&&(s.parseData(e),s.change(),this.propagate("load",s))}},x.util.extendClass(P,a),x.util.defineClassProperties(P,{url:{set:function(t){x.util.isString(t)&&(this._url=t)},get:function(t){return this._url}},mode:{set:function(t){0!==t&&1!==t||(this._mode=t)}}}),x.core.RestStorage=P,b.STARTED=1,b.STOPPED=0,b.PAUSED=2,b.prototype={delegate:null,_state:b.STOPPED,destructor:function(){this.stop(),N.Object.prototype.destructor.call(this)},_clone:function(t,e){N.Object.prototype.destructor._clone.call(this,t,e),t._state=this._state},start:function(t){},stop:function(){},pause:function(){}},C.extendClass(b,N.Object),C.defineClassProperty(b,"state",{get:function(){return this._state}}),x.par=function(){if(0!==arguments.length){var t=new k;return t.setTasks(arguments),t}},k.prototype={_tasksAndParams:null,_tasksWillEnded:null,setTasks:function(t){if(this._state!==b.STOPPED)return!1;var e,i,n,s;for(this._tasksAndParams=[],e=0;e<t.length;e++)(i=t[e])&&(s=null,n=null,C.isArray(i)?1===i.length?n=i[0]:2===i.length&&(n=i[0],s=i[1]):(n=i,s=null),n?n.start&&n.stop&&n.pause?this._tasksAndParams.push([n,s]):console.warn("Invalid task: "+n.toString()):console.warn("Undefined task"))},start:function(t){if(this._state===b.STARTED)return!1;this._tasksWillEnded=this._tasksAndParams.length,this._state=b.STARTED;var e,i;for(i=0;i<this._tasksAndParams.length;i++)(e=this._tasksAndParams[i])[0].delegate=this,e[0].start(e[1]?e[1]:t);return!0},stop:function(){if(this._state===b.STOPPED)return!1;this._state=b.STOPPED;var t;for(t=0;t<this._tasksAndParams.length;t++)this._tasksAndParams[t][0].stop();return!0},pause:function(){if(this._state===b.PAUSED)return!1;this._state=b.PAUSED;var t;for(t=0;t<this._tasksAndParams.length;t++)this._tasksAndParams[t][0].pause();return!0},taskDidStop:function(t){if(this._state=b.STOPPED,0===--this._tasksWillEnded&&this.delegate&&this.delegate.taskDidStop)try{this.delegate.taskDidStop(this)}catch(t){t.stack&&console.log(t.stack),console.error(t)}},taskDidPause:function(t){if(this._state=b.STOPPED,0===--this._tasksWillEnded&&this.delegate&&this.delegate.taskDidPause)try{this.delegate.taskDidPause(this)}catch(t){t.stack&&console.log(t.stack),console.error(t)}},taskDidEnd:function(t){if(this._state=b.STOPPED,0===--this._tasksWillEnded&&this.delegate&&this.delegate.taskDidEnd)try{this.delegate.taskDidEnd(this)}catch(t){t.stack&&console.log(t.stack),console.error(t)}}},C.extendClass(k,b),x.seq=function(){if(0!==arguments.length){var t=new R;return t.setTasks(arguments),t}},R.prototype={_tasksAndParams:null,_nextTaskToStart:0,_startParam:null,setTasks:function(t){if(this._state!==b.STOPPED)return!1;var e,i,n,s;for(this._tasksAndParams=[],e=0;e<t.length;e++)(i=t[e])&&(s=null,n=null,C.isArray(i)?1===i.length?n=i[0]:2===i.length&&(n=i[0],s=i[1]):(n=i,s=null),n?n.start&&n.stop&&n.pause?this._tasksAndParams.push([n,s]):console.warn("Invalid task: "+n.toString()):console.warn("Undefined task"))},start:function(t){if(this._state===b.STARTED)return!1;var e=this._tasksAndParams[this._nextTaskToStart];return this._nextTaskToStart++,e?(this._state=b.STARTED,this._startParam=t,e[0].delegate=this,e[0].start(e[1]?e[1]:t),!0):(this._nextTaskToStart=0,this._state=b.STOPED,!1)},stop:function(){if(this._state===b.STOPPED)return!1;this._state=b.STOPPED;var t=this._tasksAndParams[this._nextTaskToStart-1];return this._nextTaskToStart=0,!!t&&(t[0].stop(),!0)},pause:function(){if(this._state===b.PAUSED)return!1;this._state=b.PAUSED;var t=this._tasksAndParams[this._nextTaskToStart-1];return!!t&&(t[0].pause(),!0)},taskDidStop:function(t){if(this._state=b.STOPPED,this._nextTaskToStart=0,this.delegate&&this.delegate.taskDidStop)try{this.delegate.taskDidStop(this)}catch(t){t.stack&&console.log(t.stack),console.error(t)}},taskDidPause:function(t){if(this._state=b.PAUSED,this._nextTaskToStart=this._nextTaskToStart-1,this.delegate&&this.delegate.taskDidPause)try{this.delegate.taskDidPause(this)}catch(t){t.stack&&console.log(t.stack),console.error(t)}},taskDidEnd:function(t){if(this._state=b.STOPPED,this._nextTaskToStart<this._tasksAndParams.length)this.start(this._startParam);else if(this._nextTaskToStart=0,this.delegate&&this.delegate.taskDidEnd)try{this.delegate.taskDidEnd(this)}catch(t){t.stack&&console.log(t.stack),console.error(t)}}},C.extendClass(R,b),D.prototype={_time:0,_left_time:0,_timer:null,_start_time:0,start:function(){var t=this,e=this._time;if(this._state===b.STARTED)return!1;this._state===b.PAUSED?e=this._left_time:this._left_time=e,this._state=b.STARTED,this._start_time=(new Date).getTime();t=this;return this._timer=setTimeout(function(){if(t._state=b.STOPPED,t.delegate&&t.delegate.taskDidEnd)try{t.delegate.taskDidEnd(t)}catch(t){t.stack&&console.log(t.stack),console.error(t)}},e),!0},stop:function(){if(this._state===b.STOPPED)return!1;if(this._state=b.STOPPED,clearTimeout(this._timer),this._timer=null,this._left_time=this._time,this.delegate&&this.delegate.taskDidStop)try{this.delegate.taskDidStop(this)}catch(t){t.stack&&console.log(t.stack),console.error(t)}return!0},pause:function(){if(this._state===b.PAUSED)return!1;if(this._state=b.PAUSED,this._left_time=this._left_time-(new Date).getTime()+this._start_time,this.delegate&&this.delegate.taskDidPause)try{this.delegate.taskDidPause(this)}catch(t){t.stack&&console.log(t.stack),console.error(t)}return!0}},C.extendClass(D,b),C.defineClassProperty(D,"state",{set:function(t){C.isNumber(t)&&(this._time=t)}}),C.extend(N,{Task:b,Task_PAR:k,Task_SEQ:R,TaskWait:D})}(window);
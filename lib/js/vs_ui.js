!function(window,undefined){function Template(t){this._str=t}function _resolveClass(t){if(!t)return null;for(var e=t.split("."),i=window;i&&e.length;)i=i[e.shift()];return i}function _instrument_component(obj,shadow_view,node){var _create_node_property=function(view,prop_name,nodes){var desc={},_prop_name="_"+util.underscore(prop_name);desc.set=function(nodes,prop_name,_prop_name){return function(v){var i=0,node,l=nodes.length,r;for(this[_prop_name]=v;i<l;i++)3===(node=nodes[i]).nodeType?node.data=v:2===node.nodeType&&(r=eval(node.__attr_eval_str),"value"==node.name&&"INPUT"==node.ownerElement.tagName?node.ownerElement.value=r:node.value=r);"_$_"==prop_name?this.propertyChange():this.propertyChange(prop_name)}}(nodes,prop_name,_prop_name),desc.get=function(t){return function(){return this[t]}}(_prop_name),view.defineProperty(prop_name,desc)},_create_iterate_property=function(t,e,i,s){var o={},n="_"+util.underscore(e);o.set=function(t,e,i,s){return function(o){if(util.isArray(o)){var n,r=0,a=o.length;for(this[e]=o,util.removeAllElementChild(s);r<a;r++)n=_instanciate_shadow_view(i,o[r]),s.appendChild(n.view);this.propertyChange(t)}}}(e,n,i,s),o.get=function(t){return function(){return this[t]}}(n),t.defineProperty(e,o)},_createPropertiesToObject=function(t,e,i){for(var s=[],o=e.__all_properties.length;o--;){var n=e.__all_properties[o],r=e.__prop_nodes[o];r&&(a=_getPaths(e.__node,r),l=_evalPaths(i,a),s.push([n,r]),"@"===n?_create_node_property(t,"_$_",l):_create_node_property(t,n,l))}for(o=e.__all_properties.length;o--;){var a,l,n=e.__all_properties[o],_=e.__list_iterate_prop[n];_&&(path=_getPath(e.__node,_.__parent_node),node_cloned=_evalPath(i,path),_create_iterate_property(t,n,_,node_cloned))}t.__node__ref__=s};_createPropertiesToObject(obj,shadow_view,node)}function _instanciate_shadow_view(t,e){var i=t.__node.cloneNode(!0),s=new t.__class({node:i});return _instrument_component(s,t,i),s.init(),e&&s.configure(e),s.isProperty("_$_")&&(s._$_=e),s}function _pre_compile_shadow_view(t,e){function i(e,i){if(e)for(var s=e.length;s--;){var o,n,r=e.item(s),a=r.value,l=[];if(t._regexp_index.lastIndex=0,o=t._regexp_index.exec(a)){for(;o;)n=parseInt(o[1],10),l.push(n),i.__prop_nodes[n]?i.__prop_nodes[n].push(r):i.__prop_nodes[n]=[r],o=t._regexp_index.exec(a);r.value="";for(var _=0;_<l.length;_++)n=l[_],a=a.replace("${*"+n+"*}",'"+this._'+util.underscore(i.__all_properties[n])+'+"');r.__attr_eval_str='"'+a+'"'}}}function s(e,o){var n=e.getAttribute("data-iterate");if(n){var r=e.parentElement;r.removeChild(e),-1===o.__all_properties.indexOf(n)&&o.__all_properties.push(n);var a={};o.__list_iterate_prop[n]=a,a.__prop_nodes=[],a.__list_iterate_prop={},a.__parent_node=r,a.__node=e,a.__all_properties=o.__all_properties,a.__class=ui.View,o=a}i(e.attributes,o),function(i,o){if(i)for(var n=i.length;n--;){var r=i.item(n);if(3===r.nodeType){var a,l,_,h=r.data,c=0;for(t._regexp_index.lastIndex=0,r.data=" ",a=t._regexp_index.exec(h);a;)a.index&&(_=document.createTextNode(h.substring(c,a.index)),e.insertBefore(_,r)),l=parseInt(a[1],10),o.__prop_nodes[l]?o.__prop_nodes[l].push(r):o.__prop_nodes[l]=[r],c=a.index+a[0].length,(a=t._regexp_index.exec(h))&&(_=document.createTextNode(" "),r.nextSibling?e.insertBefore(_,r.nextSibling):e.appendChild(_),r=_);var d=h.substring(c);d&&(_=document.createTextNode(d),r.nextSibling?e.insertBefore(_,r.nextSibling):e.appendChild(_))}else 1===r.nodeType&&s(r,o)}}(e.childNodes,o)}var o={};o.__prop_nodes=[],o.__list_iterate_prop={},o.__all_properties=[],o.__class=_resolveClass(e),util.isFunction(o.__class)||(o.__class=ui.View),t._regexp_templ.lastIndex=0;var n=t._str.replace(t._regexp_templ,function(t,e,i,s,n,r){var a=o.__all_properties.indexOf(e);return-1===a&&(a=o.__all_properties.length,o.__all_properties.push(e)),"${*"+a+"*}"});return o.__node=Template.parseHTML(n),s(o.__node,o),o}function getScreenSize(t){switch(t){case DeviceConfiguration.SS_7_INCH:return devicePixelRatio<=1.2?[600,960]:devicePixelRatio<=1.4?[800,1280]:devicePixelRatio<=1.7?[900,1440]:[1200,1920];case DeviceConfiguration.SS_4_INCH:return devicePixelRatio<=1.2?[320,540]:devicePixelRatio<=1.4?[427,720]:devicePixelRatio<=1.7?[480,800]:[720,1080]}}function preventBehavior(t){if("touchstart"!=t.type||"INPUT"!=t.target.tagName&&"input"!=t.target.tagName&&"TEXTAREA"!=t.target.tagName&&"textarea"!=t.target.tagName)return t.preventDefault(),!1}function Button(t){this.parent=View,this.parent(t),this.constructor=Button}function Canvas(t){this.parent=View,this.parent(t),this.constructor=Canvas}function CheckBox(t){this.__inputs=[],this.__labels=[],this.parent=AbstractList,this.parent(t),this.constructor=CheckBox,this._selected_indexes=new Array}function ComboBox(t){this._data=new Array,this._items={},this.parent=View,this.parent(t),this.constructor=ComboBox}function ImageView(t){this.parent=View,this.parent(t),this.constructor=ImageView}function InputField(t){this.parent=View,this.parent(t),this.constructor=InputField}function AbstractList(t){this.parent=ScrollView,this.parent(t),this.constructor=AbstractList}function DefaultListItem(){this.parent=AbstractListItem,this.parent(),this.constructor=AbstractListItem}function SimpleListItem(t){this.parent=View,this.parent(t),this.constructor=SimpleListItem}function buildSection(t,e,i,s){for(var o,n,r=document.createElement("li"),a=document.createElement("div"),l=document.createElement("ul"),_=t._model;i<_.length&&(o=_.item(i),!util.isString(o));)o=_.item(i),n=t.__template_class?(new t.__template_class).init():t.__template_obj?t.__template_obj.clone():(new DefaultListItem).init(),o instanceof core.Model?n.link(o):n.configure(o),n.index=i,s&&vs.addPointerListener(n.view,core.POINTER_START,t),l.appendChild(n.view),t.__item_obs.push(n),n.__parent=t,i++;if(e){var h=window.deviceConfiguration.os;if(h==DeviceConfiguration.OS_MEEGO||h==DeviceConfiguration.OS_SYMBIAN){a.appendChild(document.createElement("div"));var c=document.createElement("div");c.appendChild(document.createTextNode(e)),a.appendChild(c)}else util.setElementInnerText(a,e);r.appendChild(a)}return l.childElementCount>0&&r.appendChild(l),[r,i]}function blockListRenderData(t){if(this._model){var e,i,s,o,n=this._list_items;if(n){this._freeListItems(),util.removeAllElementChild(n),SUPPORT_3D_TRANSFORM?setElementTransform(n,"translate3d(0,0,0)"):setElementTransform(n,"translate(0,0)");var r=n.parentElement;for(r.removeChild(n),e=0,util.setElementVisibility(n,!1);e<this._model.length;)i=this._model.item(e),s=null,util.isString(i)&&(s=i,e++),o=buildSection(this,s,e,t),n.appendChild(o[0]),e=o[1];r.appendChild(n),n.style.width="auto",util.setElementVisibility(n,!0)}}}function tabListRenderData(t){if(this._model){var e,i,s,o,n=this._list_items,r=this._direct_access;if(n){this._freeListItems(),this.__direct_access_letters=[],util.removeAllElementChild(n),r&&util.removeAllElementChild(r),SUPPORT_3D_TRANSFORM?util.setElementTransform(n,"translate3d(0,0,0)"):util.setElementTransform(n,"translate(0,0)");var a=n.parentElement;a.removeChild(n),r&&this.view.removeChild(r),e=0,util.setElementVisibility(n,!1);for(var l=0;e<this._model.length;){if(i=this._model.item(e),s=null,util.isString(i)){s=i,e++;var _=document.createElement("div"),h=s[0];util.setElementInnerText(_,h),this.__direct_access_letters.push(h),_._index_=l++,r&&r.appendChild(_)}o=buildSection(this,s,e,t),n.appendChild(o[0]),e=o[1]}a.appendChild(n),r&&this.view.appendChild(r),n.style.width="auto",util.setElementVisibility(n,!0)}}}function defaultListRenderData(t){if(this._model){var e,i,s,o=this._list_items;if(o){this._freeListItems(),util.removeAllElementChild(o),SUPPORT_3D_TRANSFORM?setElementTransform(o,"translate3d(0,0,0)"):setElementTransform(o,"translate(0,0)");var n=o.parentElement;for(n.removeChild(o),e=0,util.setElementVisibility(o,!1);e<this._model.length;)i=this._model.item(e),s=this.__template_class?(new this.__template_class).init():this.__template_obj?this.__template_obj.clone():(new DefaultListItem).init(),i instanceof core.Model?s.link(i):s.configure(i),s.index=e,t&&vs.addPointerListener(s.view,core.POINTER_START,this),o.appendChild(s.view),this.__item_obs.push(s),s.__parent=this,e++;n.appendChild(o),o.style.width="auto",util.setElementVisibility(o,!0)}}}function List(t){this.parent=AbstractList,this.parent(t),this.constructor=List,this.__item_obs=new Array}function NavigationBar(t){this.parent=View,this.parent(t),this.constructor=NavigationBar,this._states={}}function Picker(t){this.parent=View,this.parent(t),this.constructor=Picker}function PopOver(t){this.parent=View,this.parent(t),this.constructor=PopOver}function ProgressBar(t){this.parent=View,this.parent(t),this.constructor=ProgressBar,this._range=[0,100]}function RadioButton(t){this.__inputs=[],this.__labels=[],this.parent=AbstractList,this.parent(t),this.constructor=RadioButton}function DragRecognizer(t){this.parent=PointerRecognizer,this.parent(t),this.constructor=DragRecognizer}function PinchRecognizer(t){this.parent=PointerRecognizer,this.parent(t),this.constructor=PinchRecognizer}function PointerRecognizer(t){this.constructor=PointerRecognizer,this.delegate=t}function RotationRecognizer(t){this.parent=PointerRecognizer,this.parent(t),this.constructor=RotationRecognizer}function TapRecognizer(t){this.parent=PointerRecognizer,this.parent(t),this.constructor=TapRecognizer}function ScrollImageView(t){this.parent=ScrollView,this.parent(t),this.constructor=ScrollImageView}function ScrollView(t){this.parent=View,this.parent(t),this.constructor=ScrollView,this.__ab_view_t_o=[50,50]}function SegmentedButton(t){this.parent=View,this.parent(t),this.constructor=SegmentedButton}function Slider(t){this.parent=View,this.parent(t),this.constructor=Slider,this._range=[0,100]}function SVGView(t){this.parent=View,this.parent(t),this.constructor=SVGView}function load_svg_doc(t,e,i){if(t&&i){var s=SVG_DOCUMENTS_TO_LOAD[t];if(s)s.push({elem_id:e,svg_obj:i});else{(s=[]).push({elem_id:e,svg_obj:i}),SVG_DOCUMENTS_TO_LOAD[t]=s;var o=document.createElement("object");o.data=t,o.type="image/svg+xml",o.width="0",o.height="0",o.style.visibility="hidden",o.onload=function(){var e=o.getSVGDocument();if(e){var i=e.querySelector("svg");if(!SVG_DEFS){var s=document.createElementNS("http://www.w3.org/2000/svg","svg");s.setAttribute("width","0"),s.setAttribute("height","0"),document.body.appendChild(s),SVG_DEFS=document.createElementNS("http://www.w3.org/2000/svg","defs"),s.appendChild(SVG_DEFS)}SVG_DEFS.appendChild(i),document.body.removeChild(o),SVG_DOCUMENTS[t]=i;var n=SVG_DOCUMENTS_TO_LOAD[t];if(n){delete SVG_DOCUMENTS_TO_LOAD[t];for(var r=0;r<n.length;r++){var a=n[r];a.svg_obj.__set_svg_doc(i,a.elem_id)}}}},document.body.appendChild(o)}}}function Switch(t){this.parent=View,this.parent(t),this.constructor=Switch}function TextArea(t){this.parent=View,this.parent(t),this.constructor=TextArea}function TextLabel(t){this.parent=View,this.parent(t),this.constructor=TextLabel}function ToolBar(t){this.parent=View,this.parent(t),this.constructor=ToolBar,this._items={}}function Scrollbar(t,e,i,s){this.dir=t,this.fade=i,this.shrink=s,this.id=core.createId(),this.bar=document.createElement("div");var o,n;this.bar.className="scrollbar "+t,this.wrapper=document.createElement("div"),this.wrapper.className="wrapper_scrollbar "+t,this.wrapper.style.position="absolute",this.wrapper.style["-webkit-mask"]="-webkit-canvas("+this.id+")",this.wrapper.style["-webkit-transition-duration"]=i?"300ms":"0",this.wrapper.appendChild(this.bar),e.appendChild(this.wrapper),"horizontal"===this.dir?(o=this.wrapper.offsetWidth,(n=document.getCSSCanvasContext("2d",this.id,o,5)).fillStyle="rgb(0,0,0)",n.beginPath(),n.arc(2.5,2.5,2.5,Math.PI/2,-Math.PI/2,!1),n.lineTo(o-2.5,0),n.arc(o-2.5,2.5,2.5,-Math.PI/2,Math.PI/2,!1),n.closePath(),n.fill()):(o=this.wrapper.offsetHeight,(n=document.getCSSCanvasContext("2d",this.id,5,o)).fillStyle="rgb(0,0,0)",n.beginPath(),n.arc(2.5,2.5,2.5,Math.PI,0,!1),n.lineTo(5,o-2.5),n.arc(2.5,o-2.5,2.5,0,Math.PI,!1),n.closePath(),n.fill())}function _findNodeRef(t,e){if(!t.getAttribute)return!1;if(t.getAttribute("x-hag-ref")===e)return t;if(t.getAttribute("x-hag-comp")===e)return t;for(var i,s=t.firstElementChild;s;){if(i=_findNodeRef(s,e))return i;s=s.nextElementSibling}return!1}function View(t){this.parent=core.EventSource,this.parent(t),this.constructor=View,this.__pointer_recognizers=[],this._pos=[-1,-1],this._size=[-1,-1],this._translation=[0,0,0],this._rotation=[0,0,0],this._transform_origin=[0,0],this._autosizing=[4,4]}function getDeviceCSSCode(){var t,e=document.createElement("div");return e.className="device_test",document.body.appendChild(e),t=document.defaultView.getComputedStyle(e,null).getPropertyValue("margin-top"),document.body.removeChild(e),parseInt(t||0,10)}var document=window.document,vs=window.vs,util=vs.util,core=vs.core,ui=vs.ui,fx=vs.fx,setElementTransform=util.setElementTransform,getElementTransform=util.getElementTransform,DeviceConfiguration=core.DeviceConfiguration,SUPPORT_3D_TRANSFORM=vs.SUPPORT_3D_TRANSFORM;Template.prototype={_str:null,_regexp_templ:/\$\{((([\w\-]+)(\.([\w\.]*)+)?)|@)\}/g,_regexp_index:/\$\{\*([\d]+)\*\}/g,_shadow_view:null,toString:function(){return this._str},compileView:function(t,e){this._shadow_view||(this._shadow_view=_pre_compile_shadow_view(this,t));var i=_instanciate_shadow_view(this._shadow_view,e);return i.__shadow_view=this._shadow_view,i.clone=_template_view_clone.bind(i),i._clone=_template_view__clone.bind(i),i},__extend_component:function(t){this._shadow_view||(this._shadow_view=_pre_compile_shadow_view(this));var e=this._shadow_view.__node.cloneNode(!0);return t.view=e,_instrument_component(t,this._shadow_view,e),t.__shadow_view=this._shadow_view,t.clone=_template_view_clone.bind(t),t._clone=_template_view__clone.bind(t),e},apply:function(t){return t?this._str.replace(this._regexp_templ,function(e,i,s,o,n,r){var i,a,l,_,h=t[i];if(n)for(l=1,_=(a=s.split(".")).length,h=t[a[0]];h&&l<_;)h=h[a[l++]];return h}):this._str}};var _template_view_clone=function(t,e){return t||(t={}),t.node=this.__shadow_view?this.__shadow_view.__node.cloneNode(!0):t.node?t.node:this.view.cloneNode(!0),core.EventSource.prototype.clone.call(this,t,e)},_template_view__clone=function(t,e){ui.View.prototype._clone.call(this,t,e),_instrument_component(t,this.__shadow_view,t.view),t.__shadow_view=this.__shadow_view,t.clone=_template_view_clone.bind(t),t._clone=_template_view__clone.bind(t)},_getPaths=function(t,e){for(var i,s=[],o=0,n=e.length;o<n;o++)i=e[o],s.push([_getPath(t,i),i.__attr_eval_str]);return s},_getPath=function(t,e,i){var s=1;if(i=i||[],2===e.nodeType)return e.ownerElement&&(i=_getPath(t,e.ownerElement,i)),i.push([2,e.nodeName.toLowerCase()]),i;if(t===e)return i;e.parentNode&&(i=_getPath(t,e.parentNode,i));for(var o=e.previousSibling;o;)1!==o.nodeType&&3!==o.nodeType||o.nodeName!=e.nodeName||s++,o=o.previousSibling;return i.push([1,e.nodeName.toLowerCase(),s]),i},_evalPaths=function(t,e){for(var i,s,o=[],n=0,r=e.length;n<r;n++)i=e[n],(s=_evalPath(t,i[0])).__attr_eval_str=i[1],o.push(s);return o},_evalPath=function(t,e){if(!e||!e.length||!t)return t;var i,s,o,n,r,a=e.shift(),l=a[0],_=a[1];if(2===l){for(s=(i=t.attributes).length;s--;)if((o=i.item(s)).nodeName.toLowerCase()==_)return o;return null}if(1===l)for(n=t.firstChild,s=a[2],r=1;n;){if(n.nodeName.toLowerCase()===_){if(s===r)return _evalPath(n,e);r++}n=n.nextSibling}return null};Template.parseHTML=function(t){var e=document.createElement("div");try{util.safeInnerHTML(e,t),(e=e.firstElementChild)&&e.parentElement.removeChild(e)}catch(t){return console.error("vs.ui.Template.parseHTML failed:"),t.stack&&console.log(t.stack),console.error(t),undefined}return e},vs.ui.Template=Template;var Application=function(t){this._layout=undefined,this.parent=View,this.parent(t),this.constructor=Application};Application.CSS_DEFAULT=0,Application.CSS_IOS=5,Application.CSS_ANDROID=9,Application.CSS_MEEGO=10,Application.CSS_WP7=6,Application.CSS_SYMBIAN=8,Application.CSS_BLACKBERRY=7,Application.CSS_PURE=100,Application.CSS_FLAT=101,Application.CSS_HOLO=102,Application.CSS_IOS7=103;var Application_applications={},ORIENTATION_CHANGE_EVT="onorientationchange"in window?"orientationchange":"resize";vs.Application_applications=Application_applications,Application.prototype={_prevent_scroll:!0,initComponent:function(){if(Application_applications[this.id]=this,View.prototype.initComponent.call(this),this.preventScroll=!0,this.view instanceof HTMLHtmlElement){var t=this.view;if(t._comp_=undefined,this.view=t.querySelector("body"),!this.view)return void console.error("Invalid Application view");this.view._comp_=this,t.removeAttribute("id"),t.removeAttribute("x-hag-ref"),t.removeAttribute("x-hag-comp")}this.view.setAttribute("id",this.id),this.view.setAttribute("x-hag-ref",this.id),this.view.setAttribute("x-hag-comp",this.id);var e=this;window.addEventListener(ORIENTATION_CHANGE_EVT,function(t){var i=window.orientation;util.isNumber(i)||(i=window.outerWidth>=window.outerHeight?90:0);var s=window.deviceConfiguration.setOrientation(i);s&&e.propagate("deviceChanged",s,null,!0)})},exit:function(){Application.exit()},applicationStarted:function(){},_updateSizeAndPos:function(){this.view.style.width=this._size[0]+"px",this.view.style.height=this._size[1]+"px",this.view.style.right="auto",this.view.style.bottom="auto",this.view.style.left=this._pos[0]+"px",this.view.style.top=this._pos[1]+"px",this.view.style.right="auto",this.view.style.bottom="auto"},setActiveStyleSheet:function(t){Application.setActiveStyleSheet(t),this.propagate("deviceChanged",t,null,!0)},orientationWillChange:function(t){},buildDataflow:function(){vs._default_df_.build()},loadScript:function(t){var e=this;util.importFile(t,document,function(t){t&&e.propagate("scriptloaded",t)},"js")},loadCSS:function(t){var e=this;util.importFile(t,document,function(t){t&&e.propagate("cssloaded",t)},"css")}},util.extendClass(Application,View),util.defineClassProperties(Application,{size:{set:function(t){t&&util.isArray(t)&&2===t.length&&util.isNumber(t[0])&&util.isNumber(t[1])&&(this._size[0]=t[0],this._size[1]=t[1],this.view&&(this._updateSizeAndPos(),window.resizeTo(this._size[0],this._size[1])))},get:function(){return this.view&&this.view.parentNode&&(this._size[0]=this.view.offsetWidth,this._size[1]=this.view.offsetHeight),this._size.slice()}},preventScroll:{set:function(t){t?(this._prevent_scroll=!0,document.preventScroll=t):(this._prevent_scroll=!1,document.preventScroll=t)},get:function(){return this._prevent_scroll=document.preventScroll,this.__prevent_scroll}}}),Application.exit=function(){window.close&&window.close()},Application.configureDevice=function(){function t(){function t(t,e){var i=document.createElement("link");i.setAttribute("rel","stylesheet"),i.setAttribute("type","text/css"),i.setAttribute("href",t),i.setAttribute("media","screen"),e?document.head.insertBefore(i,e):document.head.appendChild(i)}var e=window.target_css?window.target_css[window.deviceConfiguration.targetId]:"";e||(e="default");for(var i,s=document.head.querySelectorAll("link"),o=0;o<s.length;o++){if(-1!==(i=s.item(o)).getAttribute("href").indexOf("vs_ui.css")){i=i.nextElementSibling;break}i=null}if("default"==e)switch(window.deviceConfiguration.os){case DeviceConfiguration.OS_IOS:t("lib/css/vs_ui_ios.css",i);break;case DeviceConfiguration.OS_ANDROID:t("lib/css/vs_ui_android.css",i)}else t("lib/css/vs_ui_"+e+".css",i)}var e,i,s=window.deviceConfiguration.generateDeviceId(!0);if(window.deviceConfiguration.deviceId=s,window.deviceConfiguration.virtualScreenSize=null,window.target_device_ids)for(e in window.target_device_ids)if(-1!==window.target_device_ids[e].indexOf(s))return window.deviceConfiguration.targetId=e,window.deviceConfiguration.setOrientation(window.orientation||0,!0),void t();return deviceConfiguration.screenSize===DeviceConfiguration.SS_4_INCH&&(e="phone3_4"),deviceConfiguration.screenSize===DeviceConfiguration.SS_7_INCH&&(e="tablet7"),deviceConfiguration.screenSize===DeviceConfiguration.SS_10_INCH&&(e="phone10"),0!==deviceConfiguration.orientation&&90!==deviceConfiguration.orientation||(e+="_p"),180!==deviceConfiguration.orientation&&-180!==deviceConfiguration.orientation||(e+="_l"),window.target_device_ids&&window.target_device_ids[e]?(window.deviceConfiguration.targetId=e,window.deviceConfiguration.setOrientation(window.orientation||0,!0),void t()):(i=getScreenSize(DeviceConfiguration.SS_7_INCH),deviceConfiguration.screenSize===DeviceConfiguration.SS_10_INCH&&(e="tablet7"),0!==deviceConfiguration.orientation&&90!==deviceConfiguration.orientation||(e+="_p"),180!==deviceConfiguration.orientation&&-180!==deviceConfiguration.orientation||(e+="_l"),window.target_device_ids&&window.target_device_ids[e]?(window.deviceConfiguration.targetId=e,window.deviceConfiguration.virtualScreenSize=i,window.deviceConfiguration.setOrientation(window.orientation||0,!0),void t()):(e="phone3_4",i=getScreenSize(DeviceConfiguration.SS_4_INCH),0!==deviceConfiguration.orientation&&90!==deviceConfiguration.orientation||(e+="_p"),180!==deviceConfiguration.orientation&&-180!==deviceConfiguration.orientation||(e+="_l"),window.target_device_ids&&window.target_device_ids[e]?(window.deviceConfiguration.targetId=e,window.deviceConfiguration.virtualScreenSize=i,window.deviceConfiguration.setOrientation(window.orientation||0,!0),void t()):void 0))},Application.getOrientation=function(){return window.deviceConfiguration.getOrientation()},Application.start=function(){var t,e;for(t in Application_applications)(e=Application_applications[t]).propertyChange(),e.applicationStarted(),vs.scheduleAction(function(){e.refresh()});vs.scheduleAction(function(){vs._default_df_.build()})},Application.stop=function(){for(t in Application_applications)e=Application_applications[t],util.free(e);Application_applications={};for(var t in vs.core.Object._obs){var e=vs.core.Object._obs[t];vs.util.free(e)}},Application.sendStart=function(){console.log("Application.sendStart is deprecated. Please use Application.start"),Application.start()},Application.propagate=function(t,e){var i,s;for(i in Application_applications)(s=Application_applications[i])&&s.propagate(t,e)},Application.preloadTemplates=function(t){for(var e=0;e<t.length;e++)util.preloadTemplate(t[e])};var ImagePreloader=function(t){for(var e=0;e<t.length;e++)this.preload(t[e])};window.ImagePreloader=ImagePreloader,ImagePreloader.__image_path={},ImagePreloader.prototype.preload=function(t){ImagePreloader.__image_path[t]||((new Image).src=t,ImagePreloader.__image_path[t]=!0)},Application.prototype.mainViewVisibility=function(t){Application.mainViewVisibility(t)},Application.prototype.setImageBackground=function(t,e,i){Application.setImageBackground(t,e,i)},Application.prototype.loadingStart=function(t){Application.loadingStart(t)},Application.prototype.loadingStop=function(){Application.loadingStop()},Application.mainViewVisibility=function(t){},Application.setImageBackground=function(t,e,i){},Application.loadingStart=function(t){},Application.loadingStop=function(){},ui.Application=Application,Button.DEFAULT_TYPE="default",Button.DEFAULT_STYLE="default_style",Button.GREEN_STYLE="green",Button.RED_STYLE="red",Button.GREY_STYLE="grey",Button.NAVIGATION_TYPE="nav",Button.NAVIGATION_BACK_TYPE="nav_back",Button.NAVIGATION_FORWARD_TYPE="nav_forward",Button.BLUE_STYLE="blue_style",Button.BLACK_STYLE="black_style",Button.SILVER_STYLE="silver_style",Button.prototype={__tap_recognizer:null,_style:Button.DEFAULT_STYLE,_type:Button.DEFAULT_TYPE,_selected:!1,_text:"",_released_image:"",_selected_image:"",_disabled_image:"",didTouch:function(){this.addClassName("pressed"),this._selected=!0},didUntouch:function(){this.removeClassName("pressed"),this._selected=!1},didTap:function(){this.propagate("select")},destructor:function(){this.__tap_recognizer&&(this.removePointerRecognizer(this.__tap_recognizer),this.__tap_recognizer=null),View.prototype.destructor.call(this)},initComponent:function(){View.prototype.initComponent.call(this),this.text_view=this.view.firstElementChild,this.__tap_recognizer||(this.__tap_recognizer=new TapRecognizer(this),this.addPointerRecognizer(this.__tap_recognizer)),this._text?this.text=this._text:this.text="",this.view.name=this.id,this._style&&this.addClassName(this._style),this._type&&this.addClassName(this._type)}},util.extendClass(Button,View),util.defineClassProperties(Button,{text:{set:function(t){if(null===t||void 0===t)t="";else if(util.isNumber(t))t=""+t;else if(!util.isString(t)){if(!t.toString)return;t=t.toString()}this._text=t,this.text_view&&util.setElementInnerText(this.text_view,this._text)},get:function(){return this._text}},style:{set:function(t){util.isString(t)&&(t=t.replace("_ios",""),this._style&&this.removeClassName(this._style),this._style=t,this.addClassName(this._style))},get:function(){return this._style}},type:{set:function(t){util.isString(t)&&(this._type&&this.removeClassName(this._type),this._type=t,this.addClassName(this._type))},get:function(){return this._type}}}),ui.Button=Button,Canvas.prototype={canvas_ctx:null,canvas_node:null,destructor:function(){View.prototype.destructor.call(this)},initComponent:function(){View.prototype.initComponent.call(this),this.canvas_node=this.view.firstChild,this.canvas_node&&(this.canvas_ctx=this.canvas_node.getContext("2d"),this.canvas_node.width=this._size[0],this.canvas_node.height=this._size[1],this.draw(0,0,this._size[0],this._size[1]))},getContext:function(){return this.canvas_ctx},c_drawRect:function(t,e,i,s,o,n){if(4===arguments.length)this.c_rect(t,e,i,s).stroke();else if(n){Math.sin(n),Math.cos(n);var r=[t,e],a=this.rotatePoint(i,0,n);r.push(t+a[0],e+a[1]),a=this.rotatePoint(i,s,n),r.push(t+a[0],e+a[1]),a=this.rotatePoint(0,s,n),r.push(t+a[0],e+a[1]),o&&r.push(o),this.c_polygon.apply(this,r)}else this.c_polygon(t,e,t+i,e,t+i,e+s,t,e+s,o);return this},rotatePoint:function(t,e,i){return[t*Math.cos(i)-e*Math.sin(i),e*Math.cos(i)+t*Math.sin(i)]},c_polygon:function(){if(arguments.length<6)throw new Error("not enough arguments");var t,e,i,s,o;if(this.c_beginPath(),arguments.length%2==0)for(this.c_moveTo(arguments[0],arguments[1]),t=2;t<arguments.length;t+=2)this.c_lineTo(arguments[t],arguments[t+1]);else{for(e=arguments[arguments.length-1],s=(arguments[2*(i=(arguments.length-1)/2)-2]+arguments[0])/2,o=(arguments[2*i-1]+arguments[1])/2,this.c_moveTo(s,o),t=0;t<i-1;t++)this.c_arcTo(arguments[2*t],arguments[2*t+1],arguments[2*t+2],arguments[2*t+3],e);this.c_arcTo(arguments[2*i-2],arguments[2*i-1],arguments[0],arguments[1],e)}return this.c_closePath(),this.c_moveTo(arguments[0],arguments[1]),this.c_stroke(),this},c_ellipse:function(t,e,i,s,o,n,r,a){o===undefined&&(o=0),n===undefined&&(n=0),r===undefined&&(r=2*Math.PI),a===undefined&&(a=!1);var l=this.rotatePoint(i*Math.cos(n),s*Math.sin(n),o),_=t+l[0],h=e+l[1],c=this.rotatePoint(i*Math.cos(r),s*Math.sin(r),o);c[0],c[1];return this.c_moveTo(_,h),this.c_translate(t,e),this.c_rotate(o),this.c_scale(i/s,1),this.c_arc(0,0,s,n,r,a),this.c_scale(s/i,1),this.c_rotate(-o),this.c_translate(-t,-e),this.c_stroke(),this},load:function(t){var e=window.innerWidth-25;this.__iframe=document.createElement("iframe"),this.__iframe.id="canvas_load_iframe",this.__iframe.height="10px",this.__iframe.width=e+"px",this.__iframe.style.visibility="hidden",this.__iframe.src=t,this.nodeBind(this.__iframe,"load","remotePageLoaded"),document.body.appendChild(this.__iframe)},remotePageLoaded:function(){var t=this.__iframe.contentWindow,e=window.innerWidth-25,i=window.innerHeight;this.c_clearRect(0,0,this._size[0],this._size[1]),this.c_save(),this.c_scale(this._size[0]/e,this._size[1]/i),this.canvas_ctx.drawWindow(t,0,0,e,i,"rgb(255,255,255)"),this.c_restore()},draw:function(t,e,i,s){t||(t=0),e||(e=0),i||(i=this._size[0]),s||(s=this._size[1]),this.c_clearRect(t,e,i,s),this.c_lineWidth=3,this.c_shadowColor="white",this.c_shadowBlur=1;var o,n,r,a,l;for(o=0;o<10;o++)this.c_strokeStyle="rgb("+Math.floor(255*Math.random())+","+Math.floor(255*Math.random())+","+Math.floor(255*Math.random())+")",n=Math.floor(Math.random()*i),r=Math.floor(Math.random()*s),a=Math.floor(Math.random()*i),l=Math.floor(Math.random()*s),this.c_beginPath(),this.c_moveTo(n,r),this.c_lineTo(a,l),this.c_closePath(),this.c_stroke()}},util.extendClass(Canvas,View),Canvas.methods=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createImageData","createLinearGradient","createRadialGradient","createPattern","drawFocusRing","drawImage","fill","fillRect","fillText","getImageData","isPointInPath","lineTo","measureText","moveTo","putImageData","quadraticCurveTo","rect","restore","rotate","save","scale","setTransform","stroke","strokeRect","strokeText","transform","translate"],Canvas.props=["canvas","fillStyle","font","globalAlpha","globalCompositeOperation","lineCap","lineJoin","lineWidth","miterLimit","shadowOffsetX","shadowOffsetY","shadowBlur","shadowColor","strokeStyle","textAlign","textBaseline"],Canvas.setup=function(){var t,e,i;for(t=0;t<Canvas.methods.length;t++)e=Canvas.methods[t],Canvas.prototype["c_"+e]=function(t){return function(){return this.canvas_ctx[t].apply(this.canvas_ctx,arguments),this}}(e);for(t=0;t<Canvas.props.length;t++){i=Canvas.props[t];var s={};s.enumerable=!0,s.set=function(t){return function(e){this.canvas_ctx[t]=e}}(i),s.get=function(t){return function(){return this.canvas_ctx[t]}}(i),util.defineProperty(Canvas.prototype,"c_"+i,s)}},Canvas.setup(),util.defineClassProperty(Canvas,"size",{set:function(t){if(t&&util.isArray(t)&&2===t.length&&util.isNumber(t[0])&&util.isNumber(t[1])&&(this._size[0]=t[0],this._size[1]=t[1],this.view)){if(this._updateSizeAndPos(),!this.canvas_node){if(this.canvas_node=this.view.firstChild,!this.canvas_node)return void console.error("Uncompatible canvas view");this.canvas_ctx=this.canvas_node.getContext("2d")}this.canvas_node.width=this._size[0],this.canvas_node.height=this._size[1],this.draw(0,0,this._size[0],this._size[1])}},get:function(){return this.view&&this.view.parentNode&&(this._size[0]=this.view.offsetWidth,this._size[1]=this.view.offsetHeight),this._size.slice()}}),ui.Canvas=Canvas,CheckBox.prototype={_selected_indexes:null,__inputs:null,__labels:null,selectItem:function(t){if(util.isNumber(t)&&!(t<0||t>=this.__inputs.length)){var e=this.__inputs[t];if(e){for(var i=0;i<this._selected_indexes.length;i++)if(this._selected_indexes[i]===t)return this._selected_indexes.remove(i),void(e.checked=!1);this._selected_indexes.push(t),e.checked=!0}}},clean_gui:function(){var t;for(this.__scroll_start=0,util.removeAllElementChild(this._list_items);this.__inputs.length;)t=this.__inputs[0],vs.removePointerListener(t,core.POINTER_START,this),t.removeEventListener("click",this),this.__inputs.remove(0),this.__labels.remove(0)},_renderData:function(){if(this._model){var t,e,i,s,o;if(this._list_items){this._selected_indexes=[],this.clean_gui();window.deviceConfiguration.os;for(t=0,e=this._model.length;t<e;t++)i=this._model.item(t),(o=document.createElement("input")).type="checkbox",o.name=this._id,o.id=this._id+"_l"+t,o.value=t,this._list_items.appendChild(o),this.__inputs[t]=o,vs.addPointerListener(o,core.POINTER_START,this),o.addEventListener("click",this),(s=document.createElement("label")).value=t,s.setAttribute("for",this._id+"_l"+t),vs.addPointerListener(s,core.POINTER_START,this),s.addEventListener("click",this),util.setElementInnerText(s,i),this._list_items.appendChild(s),this.__labels[t]=s;this.selectedItem=this._selected_indexes}else console.error("vs.ui.CheckBox uncorrectly initialized.")}},_touchItemFeedback:function(t){var e=t.value,i=this.__inputs[e],s=this.__labels[e];util.addClassName(i,"pressed"),util.addClassName(s,"pressed")},_untouchItemFeedback:function(t){var e=t.value,i=this.__inputs[e],s=this.__labels[e];util.removeClassName(i,"pressed"),util.removeClassName(s,"pressed")},_updateSelectItem:function(t){var e=parseInt(t.value);if(t._comp_&&t._comp_.didSelect&&t._comp_.didSelect(),e>=0||e<this.__inputs.length){for(this.selectItem(e),this.outPropertyChange(),items=new Array,i=0,l=this._selected_indexes.length;i<l;i++)items.push(this._model.item(this._selected_indexes[i]));this.propagate("change",{indexes:this._selected_indexes.slice(),items:items})}}},util.extendClass(CheckBox,AbstractList),util.defineClassProperty(CheckBox,"selectedIndexes",{set:function(t){if(util.isArray(t)){var e,i,s,o;for(this._selected_indexes=[],s=0;s<t.length;s++)e=t[s],util.isNumber(e)&&this._selected_indexes.push(e);for(s=0;s<this.__inputs.length;s++)(o=this.__inputs[s])&&(o.checked=!1);for(i=this._selected_indexes.length,s=0;s<i;s++)(o=this.__inputs[this._selected_indexes[s]])&&(o.checked=!0)}},get:function(){return this._selected_indexes.slice()}}),ui.CheckBox=CheckBox,ComboBox.NORMAL_MODE=1,ComboBox.NATIVE_MODE=2,ComboBox.prototype={_mode:ComboBox.NORMAL_MODE,_data:null,_selected_item:null,_items:null,destructor:function(){this._mode===ComboBox.NATIVE_MODE?(vs.removePointerListener(this.view,core.POINTER_START,this),vs.removePointerListener(this.view,core.POINTER_END,this)):(this.nodeUnbind(this._select,"change"),this.nodeUnbind(this._select,"blur")),View.prototype.destructor.call(this)},update_gui_combo_box:function(){if(util.isArray(this._data))if(this._mode===ComboBox.NORMAL_MODE){util.removeAllElementChild(this._select),this._items={};var t,e;for(t=0;t<this._data.length;t++)(e=document.createElement("option")).appendChild(document.createTextNode(this._data[t])),this._items[this._data[t]]=e,this._select.appendChild(e);this._selected_item?this._select.value=this._selected_item:this._select.selectedIndex=0}else util.setElementInnerText(this._select,this._selected_item)},initComponent:function(){View.prototype.initComponent.call(this),window.cordova&&(window.deviceConfiguration.os===DeviceConfiguration.OS_IOS||window.deviceConfiguration.os===DeviceConfiguration.OS_ANDROID)&&window.plugins.combo_picker?(this._mode=ComboBox.NATIVE_MODE,this._select=document.createElement("div"),this.view.appendChild(this._select),vs.addPointerListener(this.view,core.POINTER_START,this),vs.addPointerListener(this.view,core.POINTER_END,this)):(this._mode=ComboBox.NORMAL_MODE,this._select=document.createElement("select"),this.view.appendChild(this._select),this.nodeBind(this._select,"change"),this.nodeBind(this._select,"blur")),this.update_gui_combo_box()},handleEvent:function(t){t.preventDefault(),t.stopPropagation(),t.type===core.POINTER_START&&(this.setFocus(),window.plugins.combo_picker.show(this,this._data,this._selected_item))},setFocus:function(){this._mode===ComboBox.NATIVE_MODE?this.addClassName("focus"):this._select.focus()},setBlur:function(){this._mode===ComboBox.NATIVE_MODE?this.removeClassName("focus"):this._select.blur()},notify:function(t){"change"===t.type?(this._selected_item=this._select.value,this.outPropertyChange(),this.propagate("change",this._selected_item)):"blur"===t.type&&window.scrollTo(0,0)}},util.extendClass(ComboBox,View),util.defineClassProperties(ComboBox,{selectedItem:{set:function(t){util.isString(t)&&(this._selected_item=t,this._mode===ComboBox.NORMAL_MODE?this._selected_item?this._select.value=this._selected_item:this._select.selectedIndex=0:util.setElementInnerText(this._select,this._selected_item))},get:function(){return this._selected_item}},data:{set:function(t){util.isArray(t)&&(this._data=t.slice(),this.update_gui_combo_box())}}}),ui.ComboBox=ComboBox,ImageView.prototype={_src:null,destructor:function(){this.view&&(this.view.src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="),View.prototype.destructor.call(this)},initComponent:function(){View.prototype.initComponent.call(this),this.view.ondragstart=function(t){return t.preventDefault(),!1},this.view.src?this._src=this.view.getAttribute("src"):this.view.src=this._src,this.view.setAttribute("width","100%"),this.view.setAttribute("height","100%")}},util.extendClass(ImageView,View),util.defineClassProperties(ImageView,{src:{set:function(t){util.isString(t)&&(this._src=t,this.view&&(this.view.src=this._src))},get:function(){return this._src}},size:{set:function(t){(util.isArray(t)||2===t.length||util.isNumber(t[0])&&util.isNumber(t[1]))&&(this.view&&(this.view.setAttribute("width",t[0]),this.view.setAttribute("height",t[1])),this._size[0]=t[0],this._size[1]=t[1],this._updateSizeAndPos())},get:function(){return this.view&&this.view.parentNode&&(this._size[0]=this.view.offsetWidth,this._size[1]=this.view.offsetHeight),this._size.slice()}}}),ui.ImageView=ImageView,InputField.TEXT="text",InputField.PASSWORD="password",InputField.SEARCH="search",InputField.prototype={_text_field:null,_clear_button:null,_value:"",_placeholder:"type ...",_type:InputField.TEXT,destructor:function(){this._text_field.removeEventListener("focus",this),this._text_field.removeEventListener("blur",this),this._text_field.removeEventListener("change",this),this._text_field.removeEventListener("input",this),this._clear_button&&this.nodeUnbind(this._clear_button,core.POINTER_START,"cleanData"),delete this._text_field,View.prototype.destructor.call(this)},initComponent:function(){View.prototype.initComponent.call(this),this._text_field=this.view.querySelector("input"),this._text_field.name=this.id,this._clear_button=this.view.querySelector(".clear_button"),this._clear_button&&this.nodeBind(this._clear_button,core.POINTER_START,"cleanData"),this.type=this._type,this.value=this._value,this.placeholder=this._placeholder,this._text_field.addEventListener("focus",this),this._text_field.addEventListener("blur",this),this._text_field.addEventListener("change",this),this._text_field.addEventListener("input",this)},cleanData:function(t){this._text_field.value="",this._value="",this._activateDelete(!1),this.outPropertyChange(),this.propagate("continuous_change",this._value),this.propagate("change",this._value)},changeData:function(){this._value=this._text_field.value,this._value?this._activateDelete(!0):this._activateDelete(!1)},_activateDelete:function(t){this._clear_button&&(t?util.setElementVisibility(this._clear_button,!0):util.setElementVisibility(this._clear_button,!1))},onkeydown:function(t){var e=(t=fixEvent(t)).target;if(t.keyCode===TAB||t.keyCode===ENTER)return e.blur(),!1},setFocus:function(){this._text_field.focus()},setBlur:function(){this._text_field.blur()},setPointerEvents:function(t){this._text_field.style.pointerEvents=t?"none":"auto"},_didEnable:function(){this._enable?this._text_field.removeAttribute("disabled"):this._text_field.setAttribute("disabled",!0)},handleEvent:function(t){function e(t){if(t.target!==i.view&&t.target!==i._text_field){if(t.target===i._clear_button)return i.cleanData(),t.stopPropagation(),void t.preventDefault();vs.removePointerListener(document,core.POINTER_START,e,!0),i.setBlur()}}var i=this;"change"===t.type?(this.changeData(),this.outPropertyChange(),this.propagate("change",this._value)):"input"===t.type?(this.changeData(),this.outPropertyChange(),this.propagate("continuous_change",this._value)):"focus"===t.type?(this.addClassName("focus"),this._value=this._text_field.value,this._value?this._activateDelete(!0):this._activateDelete(!1),vs.addPointerListener(document,core.POINTER_START,e,!0),this.propagate("focus")):"blur"===t.type&&(this.removeClassName("focus"),this._activateDelete(!1),window.scrollTo(0,0),this.propagate("blur"))}},util.extendClass(InputField,View),util.defineClassProperties(InputField,{value:{set:function(t){if(null===t||void 0===t)t="";else if(util.isNumber(t))t=""+t;else if(!util.isString(t)){if(!t.toString)return;t=t.toString()}this._value=t,this._text_field&&(this._text_field.value=this._value,this._value&&""!==this._value?this._activateDelete(!0):this._activateDelete(!1))},get:function(){return this._value=this._text_field.value,this._value}},type:{set:function(t){t!==InputField.TEXT&&t!==InputField.PASSWORD&&t!==InputField.SEARCH||this.view&&(this.removeClassName(this._type),this._type=t,this.addClassName(this._type),this._text_field&&(this._type===InputField.PASSWORD?this._text_field.setAttribute("type","password"):this._type===InputField.SEARCH?this._text_field.setAttribute("type","search"):this._text_field.setAttribute("type","text")))}},placeholder:{set:function(t){if(null===t||void 0===t)t="";else if(util.isNumber(t))t=""+t;else if(!util.isString(t)){if(!t.toString)return;t=t.toString()}this._placeholder=t,this._text_field&&this._text_field.setAttribute("placeholder",this._placeholder)}}}),ui.InputField=InputField,AbstractList.prototype={__tap_recognizer:null,_items_selectable:!0,_scroll:0,_model:null,__elem:null,__scroll_start:0,add:function(){},remove:function(t){},destructor:function(){ScrollView.prototype.destructor.call(this),this.__tap_recognizer&&(this.removePointerRecognizer(this.__tap_recognizer),this.__tap_recognizer=null),this._model.unbindChange(null,this,this._modelChanged),this._model_allocated&&util.free(this._model),this._model_allocated=!1},initComponent:function(){ScrollView.prototype.initComponent.call(this),this._model=new vs.core.Array,this._model.init(),this._model_allocated=!0,this._model.bindChange(null,this,this._modelChanged),this._holes.item_children||(this._holes.item_children=this.view.querySelector("ul")),this._list_items=this._sub_view=this._holes.item_children,this.__tap_recognizer||(this.__tap_recognizer=new TapRecognizer(this),this.addPointerRecognizer(this.__tap_recognizer)),this.refresh()},refresh:function(){this.__iscroll__&&this.__iscroll__.refresh(),ScrollView.prototype.refresh.call(this)},_modelChanged:function(){this._renderData(this._items_selectable),this.refresh()},propertiesDidChange:function(){return this._modelChanged(),!0},_renderData:function(){},_touchItemFeedback:function(t){},_untouchItemFeedback:function(t){},_updateSelectItem:function(t){},didTouch:function(t,e,i){if(!this._items_selectable)return!1;e!==this._sub_view&&e!==this.view?(this.__elem=e,this._unselect_item(),e&&(this.__elem_to_unselect=e,this._touchItemFeedback(e))):this.__elem=null},didUntouch:function(t,e,i){this._unselect_item(),this.__elem=null},didTap:function(t,e,i,s){this._unselect_item(),i&&this._updateSelectItem(i)},_unselect_item:function(){this.__elem_to_unselect&&(this._untouchItemFeedback(this.__elem_to_unselect),this.__elem_to_unselect=null)},scrollToElementAt:function(t,e){if(this.__iscroll__){util.isNumber(e)||(e=200);var i=this.__item_obs[t];if(i){var s=this.__iscroll__._offset(i.view);s.top+=this.__iscroll__.wrapperOffsetTop,s.top=s.top>this.__iscroll__.minScrollY?this.__iscroll__.minScrollY:s.top<this.__iscroll__.maxScrollY?this.__iscroll__.maxScrollY:s.top,this.__iscroll__.scrollTo(0,s.top,200)}}}},util.extendClass(AbstractList,ScrollView),util.defineClassProperties(AbstractList,{scroll:{set:function(t){t?(this._scroll=ScrollView.VERTICAL_SCROLL,this._setup_iscroll()):(this.__iscroll__&&(this.__iscroll__.destroy(),this.__iscroll__=undefined),this._scroll=!1)},get:function(){return!!this._scroll}},model:{set:function(t){t&&(util.isArray(t)?(this._model.removeAll(),this._model.add.apply(this._model,t)):t.toJSON&&t.propertyChange&&(this._model_allocated&&(this._model.unbindChange(null,this,this._modelChanged),util.free(this._model)),this._model_allocated=!1,this._model=t,this._model.bindChange(null,this,this._modelChanged)),this.inPropertyDidChange())},get:function(){return this._model}},data:{set:function(t){util.isArray(t)&&(this._model_allocated?this._model.removeAll():(this._model=new vs.core.Array,this._model.init(),this._model_allocated=!0,this._model.bindChange(null,this,this._modelChanged)),this._model.add.apply(this._model,t),this.inPropertyDidChange())},get:function(){return this._model._data.slice()}}}),ui.AbstractList=AbstractList;var AbstractListItem=function(t){this.parent=View,this.parent(t),this.constructor=AbstractListItem};AbstractListItem.prototype={_index:0,_pressed:!1,_visible:!0,didSelect:function(){}},util.extendClass(AbstractListItem,View),util.defineClassProperties(AbstractListItem,{pressed:{set:function(t){this.view&&(t?(this.addClassName("pressed"),this._pressed=!0):(this.removeClassName("pressed"),this._pressed=!1))},get:function(){return this._pressed}},index:{set:function(t){this._index=t},get:function(){return this._index}}}),DefaultListItem.prototype={_title:"",_label:"",set title(t){if(null===t||void 0===t)t="";else if(util.isNumber(t))t=""+t;else if(!util.isString(t)){if(!t.toString)return;t=t.toString()}this._title=t,this.view&&(util.setElementInnerText(this.view,this._title),this.view.appendChild(this._label_view))},set label(t){if(null===t||void 0===t)t="";else if(util.isNumber(t))t=""+t;else if(!util.isString(t)){if(!t.toString)return;t=t.toString()}this._label=t,this.view&&util.setElementInnerText(this._label_view,this._label),this._label&&!this._label_view.parentNode&&this.view.appendChild(this._label_view),!this._label&&this._label_view.parentNode&&this.view.removeChild(this._label_view)},initComponent:function(){this.__config__||(this.__config__={}),this.__config__.id=this.id,this.__config__.node||(this.__config__.node=document.createElement("li")),AbstractListItem.prototype.initComponent.call(this),this._label_view=document.createElement("span")}},util.extendClass(DefaultListItem,AbstractListItem),SimpleListItem.prototype={_title:"",set title(t){if(null===t||void 0===t)t="";else if(util.isNumber(t))t=""+t;else if(!util.isString(t)){if(!t.toString)return;t=t.toString()}this._title=t,this.view&&util.setElementInnerText(this.title_view,this._title)},initComponent:function(){if(this.__config__||(this.__config__={}),this.__config__.id=this.id,!this.__config__.node){this.__config__.node=document.createElement("div"),this.__config__.node.className="simplelist_item";var t=document.createElement("div");t.className="title",this.__config__.node.appendChild(t)}AbstractListItem.prototype.initComponent.call(this),this._label_view=document.createElement("span"),this.title_view=this.view.querySelector(".title")}},util.extendClass(SimpleListItem,View),List.FILTER_EXACTS=0,List.FILTER_CONTAINS=1,List.FILTER_STARTS_WITH=2,List.BLOCK_LIST="BlockList",List.TAB_LIST="TabList",List.DEFAULT_LIST="DefaultList",List.prototype={_type:List.DEFAULT_LIST,_selected_index:0,_selected_item:0,_filters:null,_has_arrow:!0,__item_obs:null,__elem:null,__template_obj:null,__template_class:null,add:function(t,e){this.setItemTemplate(t)},setItemTemplate:function(t){t&&(util.isFunction(t)?(this.__template_obj=null,this.__template_class=t):t.constructor&&(this.__template_obj=t,this.__template_class=null))},setItemTemplateName:function(t){return this.createAndAddComponent(t,{},"item_children")},remove:function(t){},destructor:function(){this._freeListItems(),AbstractList.prototype.destructor.call(this)},initComponent:function(){AbstractList.prototype.initComponent.call(this),this.addClassName(this._type),this.refresh()},getItems:function(){return this.__item_obs?this.__item_obs.slice():[]},applyFilters:function(){if(this._filters&&this.__item_obs){var t,e,i;for(t=0;t<this.__item_obs.length;t++)e=this.__item_obs[t],i=this._model.item(e.index),this.appyFiltersOnObj(e,i)}},appyFiltersOnObj:function(t,e){if(this._filters&&t&&e){var i,s,o,n,r,a=this._filters.length;if(0!==a)for(i=0;i<a;i++)if((s=this._filters[i]).property&&s.value){switch(o=!1,n=e[s.property],r=s.value,!1===s.strict&&(n=n.toLowerCase(),r=r.toLowerCase()),s.matching){case undefined:case null:case List.FILTER_EXACTS:n!==r&&(o=!0);break;case List.FILTER_STARTS_WITH:0!==n.indexOf(r)&&(o=!0);break;case List.FILTER_CONTAINS:-1===n.indexOf(r)&&(o=!0)}o?t.hide():t.show()}else t.show();else t.show()}},_freeListItems:function(){var t,e;for(t=0;t<this.__item_obs.length;t++)(e=this.__item_obs[t]).__parent=undefined,util.free(e);this.__item_obs=[]},_renderData:defaultListRenderData,_modelChanged:function(t){this._renderData(this._items_selectable),this.refresh()},_touchItemFeedback:function(t){t._comp_.pressed=!0},_untouchItemFeedback:function(t){t._comp_.pressed=!1},_updateSelectItem:function(t){this._selected_index=t._comp_.index,this._selected_item=this._model.item(this._selected_index),t._comp_&&t._comp_.didSelect&&t._comp_.didSelect(),this.outPropertyChange(),this.propagate("itemselect",{index:this._selected_index,item:this._selected_item})},init_directAccessBar:function(){function t(t){if(!i||!s)return 0;var e=t-s.y;e<0?e=0:e>i.height&&(e=i.height-1);var n=o._direct_access.childElementCount;return Math.floor(e*n/i.height)}function e(t){if(0!==t.targetPointerList.length){t.stopPropagation(),t.preventDefault(),util.setElementTransform(o._list_items,""),o.__max_scroll=o.size[1]-o._list_items.offsetHeight,vs.addPointerListener(document,core.POINTER_MOVE,n,!1),vs.addPointerListener(document,core.POINTER_END,r,!1);var e=t.targetPointerList[0].target._index_;if(util.isNumber(e)&&o._acces_index!==e){if(o._acces_index=e,o.__iscroll__){var a=o.getTitleItem(e);o.__iscroll__.scrollToElement(a,0)}else{var l=-o.getTitlePosition(e);l<o.__max_scroll&&(l=o.__max_scroll),o.__scroll_start=l,SUPPORT_3D_TRANSFORM?util.setElementTransform(o._list_items,"translate3d(0,"+l+"px,0)"):util.setElementTransform(o._list_items,"translate(0,"+l+"px)")}(i=util.getElementDimensions(o._direct_access)).height-=10,(s=util.getElementAbsolutePosition(o._direct_access)).y+=5;var _=o.__direct_access_letters[e];o._direct_access_value.style.opacity=1,o._direct_access_value.innerHTML=_,o._startScrolling&&o._startScrolling()}}}this._direct_access=document.createElement("div"),this._direct_access.className="direct_access",this.view.appendChild(this._direct_access),this._direct_access_value=document.createElement("div"),this._direct_access_value.className="direct_access_value",this.view.appendChild(this._direct_access_value),this._acces_index=0;var i,s,o=this;this.__access_bar_start=e;var n=function(e){e.stopPropagation(),e.preventDefault();var i=t(e.pageY);if(util.isNumber(i)&&o._acces_index!==i){if(o._acces_index=i,o.__iscroll__){var s=o.getTitleItem(i);o.__iscroll__.scrollToElement(s,0)}else{var n=-o.getTitlePosition(i);n<o.__max_scroll&&(n=o.__max_scroll),o.__scroll_start=n,SUPPORT_3D_TRANSFORM?util.setElementTransform(o._list_items,"translate3d(0,"+n+"px,0)"):util.setElementTransform(o._list_items,"translate(0,"+n+"px)")}var r=o.__direct_access_letters[i];o._direct_access_value.innerHTML=r}},r=function(t){vs.removePointerListener(document,core.POINTER_MOVE,n),vs.removePointerListener(document,core.POINTER_END,r),o._direct_access_value.style.opacity=0};vs.addPointerListener(this._direct_access,core.POINTER_START,e,!1)},remove_directAccessBar:function(){vs.removePointerListener(this._direct_access,core.POINTER_START,this.__access_bar_start,!1),this.view.removeChild(this._direct_access),this._direct_access=undefined,this.view.removeChild(this._direct_access_value),this._direct_access_value=undefined},getTitlePosition:function(t){var e=this.getTitleItem(t);return e?e.offsetTop:0},getTitleItem:function(t){var e=this.view.querySelectorAll("ul > li > div").item(t);if(e)return e.parentElement}},util.extendClass(List,AbstractList),util.defineClassProperties(List,{itemsSelectable:{set:function(t){if((!t||!this._items_selectable)&&(t||this._items_selectable))if(t)for(this._items_selectable=!0,i=0;i<this.__item_obs.length;i++)obj=this.__item_obs[i],vs.addPointerListener(obj.view,core.POINTER_START,this,!0);else for(this._items_selectable=!1,i=0;i<this.__item_obs.length;i++)obj=this.__item_obs[i],vs.removePointerListener(obj.view,core.POINTER_START,this,!0)}},selectedIndex:{get:function(){return this._selected_index}},selectedItem:{get:function(){return this._selected_item}},type:{set:function(t){util.isString(t)&&(t!==List.BLOCK_LIST&&t!==List.TAB_LIST&&t!==List.DEFAULT_LIST||(this.removeClassName(this._type),this._type=t,this.addClassName(this._type),this._type===List.BLOCK_LIST&&(this._renderData=blockListRenderData,this._direct_access&&this.remove_directAccessBar()),this._type===List.TAB_LIST&&(this._renderData=tabListRenderData,this._direct_access||this.init_directAccessBar()),this._type===List.DEFAULT_LIST&&(this._renderData=defaultListRenderData,this._direct_access&&this.remove_directAccessBar()),this._renderData(this._items_selectable)))}},hasArrow:{set:function(t){t?(this._has_arrow=!0,this.addClassName("arrow")):(this._has_arrow=!1,this.removeClassName("arrow"))}},filters:{set:function(t){util.isArray(t)&&(this._filters=t,this.applyFilters(),this.refresh())},get:function(){return this._filters}}}),ui.List=List,ui.AbstractListItem=AbstractListItem,ui.DefaultListItem=DefaultListItem,ui.SimpleListItem=SimpleListItem,NavigationBar.DEFAULT_STYLE="blue_style",NavigationBar.BLACK_TRANSLUCIDE_STYLE="black_translucide_style",NavigationBar.BLACK_STYLE="black_style",NavigationBar.prototype={_hide_animation:null,_show_animation:null,_style:NavigationBar.DEFAULT_STYLE,_states:null,_current_state:null,destructor:function(){View.prototype.destructor.call(this)},initComponent:function(){View.prototype.initComponent.call(this),window.deviceConfiguration.os==DeviceConfiguration.OS_SYMBIAN?this._hide_animation=new vs.fx.Animation(["translateY","-50px"]):this._hide_animation=new vs.fx.Animation(["translateY","-44px"]),this._show_animation=new vs.fx.Animation(["translateY","0px"]),this.style=this._style},setStateItems:function(t,e){var i;if(t&&util.isString(t)&&e&&util.isArray(e))if(this._states[t]=e.slice(),this._current_state===t){for(key in this.__children)if(children=this.__children[key],util.isArray(children))for(i=0;i<children.length;i++)obj=children[i],e.findItem(obj)>=0||obj&&obj.hide&&obj.hide();else children.hide&&children.hide();for(i=0;i<e.length;i++)obj=e[i],this.isChild(obj)||this.add(obj,"children"),obj.show()}else for(i=0;i<e.length;i++)obj=e[i],this.isChild(obj)||this.add(obj,"children")},getStateItems:function(t,e){return t&&util.isString(t)&&this._states[t]?this._states[t].slice():undefined},changeState:function(t,e){if(t){var i,s,o,n,r,a,l=0;this._current_state=t,(o=this._states[this._current_state])||(o=[]),i=o.length;for(r in this.__children)if(s=this.__children[r],util.isArray(s))for(l=0;l<s.length;l++)n=s[l],o.findItem(n)>=0||n&&n.hide&&n.hide();else s.hide&&s.hide();for(l=0;l<i;l++){if(n=o[l],e&&e[n.id]){a=e[n.id];for(r in a)r&&(n[r]=a[r])}n&&n.show()}}},handleEvent:function(t){var e=t.currentTarget;switch(t.type){case core.POINTER_START:util.addClassName(e,"active"),vs.addPointerListener(t.currentTarget,core.POINTER_END,this,!0),vs.addPointerListener(t.currentTarget,core.POINTER_MOVE,this,!0);break;case core.POINTER_END:vs.removePointerListener(t.currentTarget,core.POINTER_END,this),vs.removePointerListener(t.currentTarget,core.POINTER_MOVE,this),util.removeClassName(e,"active"),this.propagate("buttonselect",t.currentTarget.spec);break;case core.POINTER_MOVE:t.preventDefault(),util.removeClassName(e,"active"),vs.removePointerListener(t.currentTarget,core.POINTER_END,this),vs.removePointerListener(t.currentTarget,core.POINTER_MOVE,this)}},remove:function(t){var e,i;View.prototype.remove.call(this,t);for(e in this._states)-1!==(i=this._states[e]).indexOf(t)&&i.remove(t)}},util.extendClass(NavigationBar,View),util.defineClassProperties(NavigationBar,{style:{set:function(t){util.isString(t)&&(this._style&&this.removeClassName(this._style),this._style=t,this.addClassName(this._style))},get:function(){return this._style}},position:{set:function(t){},get:function(){return[this.view.offsetLeft,this.view.offsetTop]}},size:{set:function(t){},get:function(){return[this.view.offsetWidth,this.view.offsetHeight]}}}),ui.NavigationBar=NavigationBar,Picker.NUMBERS={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9},Picker.prototype={_mode:Application.CSS_DEFAULT,_cell_height:44,_friction:.003,_data:null,_slots_elements:null,_current_values:null,_selected_keys:null,_selected_values:null,destructor:function(){vs.removePointerListener(this.view,core.POINTER_START,this,!1),vs.removePointerListener(document,core.POINTER_START,this,!1),vs.removePointerListener(document,core.POINTER_MOVE,this,!1),util.removeAllElementChild(this._slots_view),delete this._data,delete this._slots_elements,delete this._frame_view,delete this._slots_view,delete this._current_values,View.prototype.destructor.call(this)},initComponent:function(){switch(View.prototype.initComponent.call(this),this._data=[],this._slots_elements=[],this._mode=vs.ui.View.getDeviceCSSCode(),this._slots_view=this.view.querySelector(".slots"),this._frame_view=this.view.querySelector(".frame"),this._mode){case Application.CSS_BLACKBERRY:this._cell_height=50;case Application.CSS_DEFAULT:default:vs.addPointerListener(this.view,core.POINTER_START,this),this._frame_border_width=0;break;case Application.CSS_WP7:this._cell_height=83;case Application.CSS_ANDROID:this._frame_view.parentElement.removeChild(this._frame_view)}},removeAllSlots:function(){delete this._data,this._data=[],this._remove_all_slots()},_remove_all_slots:function(){util.removeAllElementChild(this._slots_view),delete this._slots_elements,this._slots_elements=[],this._active_slot=null},_render_slots:function(){for(var t=0;t<this._data.length;t++)this._render_a_slot(t)},_render_a_slot:function(t){var e,i,s,o,n=this._data[t];if(n){var r=0,a=window.deviceConfiguration.os;n.length&&a==DeviceConfiguration.OS_WP7&&(r=Math.floor(100/n.length)),(s=document.createElement("ul")).index=t,r&&util.setElementStyle(s,{width:r+"%"}),i="";for(e in n.values)i+="<li>"+n.values[e]+"</li>";if(util.safeInnerHTML(s,i),this._mode===Application.CSS_ANDROID){o=document.createElement("div");var l=this._generate_button(t);o.appendChild(l[0]);var _=document.createElement("div");_.className=n.style,_.appendChild(s),o.appendChild(_),o.appendChild(l[1])}else(o=document.createElement("div")).className=n.style,o.appendChild(s);switch(this._slots_view.appendChild(o),s.slotPosition=t,s.slotYPosition=0,this._mode){case Application.CSS_WP7:s.slotMaxScroll=this.view.clientHeight-s.clientHeight,vs.addPointerListener(s,core.POINTER_START,this,!0)}s.style.webkitTransitionTimingFunction="cubic-bezier(0, 0, 0.2, 1)",SUPPORT_3D_TRANSFORM?setElementTransform(s,"translate3d(0,0,0)"):setElementTransform(s,"translate(0,0)"),this._slots_elements.push(s),n.defaultValue&&this.scrollToValue(t,n.defaultValue)}},_generate_button:function(t){var e=this._data[t].style.match("readonly"),i=document.createElement("div");e?i.className="button_incr readonly":(i.className="button_incr",util.setElementInnerText(i,"+"),i.slotPosition=t),e||(vs.addPointerListener(i,core.POINTER_START,this),vs.addPointerListener(i,core.POINTER_END,this),vs.addPointerListener(i,core.POINTER_CANCEL,this));var s=document.createElement("div");return e?s.className="button_decr readonly":(s.className="button_decr",util.setElementInnerText(s,"-"),s.slotPosition=t),e||(vs.addPointerListener(s,core.POINTER_START,this),vs.addPointerListener(s,core.POINTER_END,this),vs.addPointerListener(s,core.POINTER_CANCEL,this)),[i,s]},_buttonSelected:function(t){var e=t.target.slotPosition;switch(t.type){case core.POINTER_START:util.addClassName(t.target,"active");break;case core.POINTER_END:var i,s=this._slots_elements[e],o=s.slotYPosition;util.hasClassName(t.target,"button_decr")?(o+=44)>0&&(o=0):(o-=44)<(i=this.getSlotMaxScroll(s))&&(o=i),this._scrollTo(e,o);case core.POINTER_CANCEL:util.removeClassName(t.target,"active")}},addSlot:function(t,e,i){e||(e="");var s={};s.values=t,s.style=e,s.defaultValue=i,this._data.push(s),this._render_a_slot(this._data.length-1)},getSelectedValues:function(){if(this._current_values)return this._current_values;var t,e,i,s,o,n;for(this._selected_keys=[],this._selected_values=[],i=0;i<this._slots_elements.length;i++)if(o=this._slots_elements[i]){o.removeEventListener(vs.TRANSITION_END,this,!1),o.style.setProperty(vs.TRANSITION_DURATION,"0"),n=this.getSlotMaxScroll(o),o.slotYPosition>0?this._setPosition(i,0):o.slotYPosition<n&&this._setPosition(i,n),t=-Math.round(o.slotYPosition/this._cell_height),e=0;for(s in this._data[i].values){if(e==t){this._selected_keys.push(s),this._selected_values.push(this._data[i].values[s]);break}e++}}return this._current_values={keys:this._selected_keys,values:this._selected_values},this._current_values},_getSelectedValues:function(){if(this._current_values)return this._current_values;var t,e,i,s,o;for(this._selected_keys=[],this._selected_values=[],i=0;i<this._slots_elements.length;i++)if(o=this._slots_elements[i]){t=-Math.round(o.slotYPosition/this._cell_height),e=0;for(s in this._data[i].values){if(e==t){this._selected_keys.push(s),this._selected_values.push(this._data[i].values[s]);break}e++}}return this._current_values={keys:this._selected_keys,values:this._selected_values},this._current_values},scrollToValue:function(t,e){var i,s,o,n=this._slots_elements[t],r=this._data[t];if(!n)return!1;if(!r)return!1;n.removeEventListener(vs.TRANSITION_END,this,!1),n.style.setProperty(vs.TRANSITION_DURATION,"0"),s=0;for(o in r.values){if(o==e)return i=s*this._cell_height,this._setPosition(t,i),!0;s-=1}return!1},_setPosition:function(t,e){delete this._current_values;var i=this._slots_elements[t];i.slotYPosition=e,SUPPORT_3D_TRANSFORM?setElementTransform(i,"translate3d(0,"+e+"px,0)"):setElementTransform(i,"translate(0,"+e+"px)")},_scrollTo:function(t,e,i){var s,o=this._slots_elements[t];o.style.setProperty(vs.TRANSITION_DURATION,i?i+"ms":"100ms"),this._setPosition(t,e||0),s=this.getSlotMaxScroll(o),o.slotYPosition>0||o.slotYPosition<s?o.addEventListener(vs.TRANSITION_END,this,!1):(this._delegate&&this._delegate.pickerViewSelectRow&&this._delegate.pickerViewSelectRow(this),this.propagate("change",this._getSelectedValues()),this.outPropertyChange())},handleEvent:function(t){if(this._mode===Application.CSS_ANDROID)this._buttonSelected(t);else switch(t.type){case core.POINTER_START:this._scrollStart(t);break;case core.POINTER_MOVE:this._scrollMove(t);break;case core.POINTER_END:this._scrollEnd(t);break;case vs.TRANSITION_END:this._backWithinBoundaries(t)}},__get_slot_index:function(t){var e=t.target;if("UL"===e.nodeName)return e.index;if("LI"===e.nodeName)return e.parentElement.index;if(e===this._frame_view){var i=this._getComputedStyle(this._frame_view);this._frame_border_width=i?parseInt(i.getPropertyValue("border-left-width")):0;var s=0,o=util.getBoundingClientRect(this._slots_view);this._mode==Application.CSS_BLACKBERRY&&(s=8);for(var n=t.clientX-o.left-this._frame_border_width-s,r=0,a=0;a<this._slots_elements.length;a++)if(r+=this._slots_elements[a].offsetWidth,n<r)return a}return undefined},_scrollStart:function(t){if(t.nbPointers>1)return!1;t.preventDefault(),t.stopPropagation();var e=t.targetPointerList[0];switch(this._active_slot=undefined,this._mode){default:this._active_slot=this.__get_slot_index(e);break;case Application.CSS_WP7:this._active_slot=t.currentTarget.index,util.addClassName("dragging")}if(void 0!==this._active_slot){if(this._data[this._active_slot].style.match("readonly"))return vs.removePointerListener(document,core.POINTER_MOVE,this,!0),vs.removePointerListener(document,core.POINTER_END,this,!0),!1;var i=this._slots_elements[this._active_slot];if(i.slotMaxScroll=this.getSlotMaxScroll(i),i.removeEventListener(vs.TRANSITION_END,this,!1),i.style.setProperty(vs.TRANSITION_DURATION,"0"),SUPPORT_3D_TRANSFORM){var s=vs.util.getElementMatrixTransform(i).m42;s!=i.slotYPosition&&this._setPosition(this._active_slot,s)}switch(this.startY=e.pageY,this.scrollStartY=i.slotYPosition,this.scrollStartTime=t.timeStamp,vs.addPointerListener(document,core.POINTER_MOVE,this,!0),vs.addPointerListener(document,core.POINTER_END,this,!0),this._mode){case Application.CSS_WP7:case Application.CSS_BLACKBERRY:this.__timer&&(clearTimeout(this.__timer),this.__timer=0),this.__elem_to_hide&&this.__elem_to_hide!=i&&(util.removeClassName(this.__elem_to_hide.parentElement,"visible"),this.__elem_to_hide=null),util.addClassName(i.parentElement,"visible")}return!0}},_scrollMove:function(t){t.preventDefault(),t.stopPropagation();var e=t.targetPointerList[0],i=e.pageY-this.startY,s=this._slots_elements[this._active_slot];(s.slotYPosition>0||s.slotYPosition<s.slotMaxScroll)&&(i/=2),this._setPosition(this._active_slot,s.slotYPosition+i),this.startY=e.pageY,t.timeStamp-this.scrollStartTime>80&&(this.scrollStartY=s.slotYPosition,this.scrollStartTime=t.timeStamp)},_scrollEnd:function(t){vs.removePointerListener(document,core.POINTER_MOVE,this,!0),vs.removePointerListener(document,core.POINTER_END,this,!0);var e,i,s,o,n=this._slots_elements[this._active_slot],r=this;if(n){switch(this._mode){case Application.CSS_BLACKBERRY:case Application.CSS_WP7:n.parentElement&&(this.__elem_to_hide=n,this.__timer=setTimeout(function(){util.removeClassName(r.__elem_to_hide.parentElement,"visible"),r.__elem_to_hide=null,r.removeClassName("dragging")},1e3))}return n.slotYPosition>0||n.slotYPosition<n.slotMaxScroll?(this._scrollTo(this._active_slot,n.slotYPosition>0?0:n.slotMaxScroll),!1):(e=n.slotYPosition-this.scrollStartY)<this._cell_height/1.5&&e>-this._cell_height/1.5?(n.slotYPosition%this._cell_height&&this._scrollTo(this._active_slot,Math.round(n.slotYPosition/this._cell_height)*this._cell_height,100),!1):(i=t.timeStamp-this.scrollStartTime,s=2*e/i/this._friction,e=this._friction/2*(s*s),s<0&&(s=-s,e=-e),(o=n.slotYPosition+e)>0?(s/=3,(o/=2)>this.view.clientHeight/4&&(o=this.view.clientHeight/4)):o<n.slotMaxScroll?(s/=3,(o=(o-n.slotMaxScroll)/2+n.slotMaxScroll)<n.slotMaxScroll-this.view.clientHeight/4&&(o=n.slotMaxScroll-this.view.clientHeight/4)):o=Math.round(o/this._cell_height)*this._cell_height,this._scrollTo(this._active_slot,Math.round(o),Math.round(s)),!0)}},getSlotMaxScroll:function(t){switch(this._mode){case Application.CSS_DEFAULT:default:return this.view.clientHeight-t.clientHeight-66;case Application.CSS_IOS:return this.view.clientHeight-t.clientHeight-86;case Application.CSS_SYMBIAN:return this.view.clientHeight-t.clientHeight-80;case Application.CSS_BLACKBERRY:return this.view.clientHeight-t.clientHeight-93;case Application.CSS_WP7:return this.view.clientHeight-t.clientHeight-103;case Application.CSS_ANDROID:return this.view.clientHeight-t.clientHeight-121}return 0},_backWithinBoundaries:function(t){var e=t.target;return e.removeEventListener(vs.TRANSITION_END,this,!1),slotMaxScroll=this.getSlotMaxScroll(e),this._scrollTo(e.slotPosition,e.slotYPosition>0?0:slotMaxScroll,150),!1}},util.extendClass(Picker,View),util.defineClassProperties(Picker,{delegate:{set:function(t){this._delegate=t}},data:{set:function(t){var e,i,s,o,n;if(util.isArray(t))for(this.removeAllSlots(),n=0;n<t.length;n++)i=(e=t[n]).values,s=e.style,o=e.defaultValue,i&&this.addSlot(i,s,o)}},selectedKeys:{get:function(){return this._current_values||this.getSelectedValues(),this._selected_keys}},selectedValues:{get:function(){return this._current_values||this.getSelectedValues(),this._selected_values}}}),ui.Picker=Picker,PopOver.BELOW=0,PopOver.ABOVE=1,PopOver.LEFT=2,PopOver.RIGHT=3,PopOver.prototype={_point_position:null,_has_footer:!1,_has_header:!1,initComponent:function(){View.prototype.initComponent.call(this),this._arrow=this.view.querySelector(".vs_ui_popover >.arrow"),this.__show_clb=this._endShowConfiguration},_endShowConfiguration:function(){var t,e,i={},s=this.size,o=window.innerHeight,n=window.innerWidth;if(void 0!==this.__direction&&this._point_position){switch(i.x=this._point_position[0]-s[0]/2,i.y=this._point_position[1]-s[1]/2,i.width=s[0],i.height=s[1],this.__direction!==PopOver.BELOW&&this.__direction!==PopOver.ABOVE&&this.__direction!==PopOver.RIGHT&&this.__direction!==PopOver.LEFT&&(this._point_position[0]>n/2?this.__direction=PopOver.RIGHT:this.__direction=PopOver.LEFT,this._point_position[1]+i.height+30<o?this.__direction=PopOver.BELOW:this._point_position[1]-i.height-30>0&&(this.__direction=PopOver.ABOVE)),this.__direction){case PopOver.BELOW:i.y=i.y+s[1]/2+15,i.x<5&&(i.x=5),i.x+i.width>n&&(i.x=n-i.width-5),this._arrow.className="arrow top",t=this._point_position[0]-i.x-15-8,this._arrow.style.left="5px",this._arrow.style.right="5px",this._arrow.style["-webkit-mask-position-x"]=t+"px",this._arrow.style["-webkit-mask-position-y"]="0px";break;case PopOver.ABOVE:i.y=i.y-s[1]/2-15,i.x<5&&(i.x=5),i.x+i.width>n&&(i.x=n-i.width-5),this._arrow.className="arrow bottom",t=this._point_position[0]-i.x-15-8,this._arrow.style.left="5px",this._arrow.style.right="5px",this._arrow.style["-webkit-mask-position-x"]=t+"px",this._arrow.style["-webkit-mask-position-y"]="0px";break;case PopOver.RIGHT:i.x=i.x-s[0]/2-15,i.y<5&&(i.y=5),i.y+i.height>o-20&&(i.y=o-i.height-20),this._arrow.className="arrow right",t=i.height-(this._point_position[1]-i.y+15)-2,this._arrow.style.left="auto",this._arrow.style.right="-13px",this._arrow.style["-webkit-mask-position-x"]="0px",this._arrow.style["-webkit-mask-position-y"]=t+"px";break;case PopOver.LEFT:i.x=i.x+s[0]/2+15,i.y<5&&(i.y=5),i.y+i.height>o-20&&(i.y=o-i.height-20),this._arrow.className="arrow left",t=this._point_position[1]-i.y-15-2,this._arrow.style.left="-13px",this._arrow.style.right="auto",this._arrow.style["-webkit-mask-position-x"]="0px",this._arrow.style["-webkit-mask-position-y"]=t+"px"}e=util.getElementAbsolutePosition(this.view.parentElement),this.position=e?[i.x-e.x,i.y-e.y]:[i.x,i.y],this.size=[i.width,i.height]}this.redraw()},show:function(t,e,i){this.view&&!this._visible&&(t&&util.isArray(t)&&2===t.length&&util.isNumber(t[0])&&util.isNumber(t[1])?this._point_position=t.slice():this._point_position=null,this.__direction=e,this.view.style.setProperty("display","block",null),this.__view_display=undefined,this.__is_hidding=!1,this.__is_showing=!0,this._show_animation?this._show_animation.process(this,function(){this._show_object(i)},this):this._show_object(i),vs.addPointerListener(document,core.POINTER_START,this,!0))},handleEvent:function(t){this.childOf(t.target,this.view)||(t.preventDefault(),t.stopPropagation(),this.hide())},childOf:function(t,e){if(t===e)return!0;for(t=t.parentElement;t;){if(t===e)return!0;t=t.parentElement}return!1},hide:function(){this.view&&(View.prototype.hide.call(this),vs.removePointerListener(document,core.POINTER_START,this,!0),this.view.style.display="none")}},util.extendClass(PopOver,View),util.defineClassProperties(PopOver,{hasFooter:{set:function(t){this._has_footer=!!t,this.view&&this._has_footer&&this.addClassName("withFooter"),this.view&&!this._has_footer&&this.removeClassName("withFooter")},get:function(){return this._has_footer}},hasHeader:{set:function(t){this._has_header=!!t,this.view&&this._has_header&&this.addClassName("withHeader"),this.view&&!this._has_header&&this.removeClassName("withHeader")},get:function(){return this._has_header}}}),ui.PopOver=PopOver,ProgressBar.BORDER_WIDTH_IOS=5,ProgressBar.BORDER_WIDTH_ANDROID=5,ProgressBar.BORDER_WIDTH_WP7=0,ProgressBar.BORDER_WIDTH_SYMBIAN=0,ProgressBar.BORDER_WIDTH_BB=1,ProgressBar.prototype={__inner_view:null,_index:0,_indeterminate:!1,_range:null,__border_width:0,destructor:function(){View.prototype.destructor.call(this)},_updateSize:function(){util.setElementSize(this.view,this._size[0],this._size[1]),this.index=this._index},initComponent:function(){View.prototype.initComponent.call(this),this.__inner_view=this.view.firstElementChild,this.indeterminate=this._indeterminate;var t=window.deviceConfiguration.os;t==DeviceConfiguration.OS_ANDROID?this.__border_width=2*ProgressBar.BORDER_WIDTH_ANDROID:t==DeviceConfiguration.OS_IOS?this.__border_width=2*ProgressBar.BORDER_WIDTH_IOS:t==DeviceConfiguration.OS_WP7?this.__border_width=2*ProgressBar.BORDER_WIDTH_WP7:t==DeviceConfiguration.OS_SYMBIAN?this.__border_width=2*ProgressBar.BORDER_WIDTH_SYMBIAN:t==DeviceConfiguration.OS_BLACK_BERRY&&(this.__border_width=2*ProgressBar.BORDER_WIDTH_BB),this.index=this._index},refresh:function(){this.index=this._index,View.prototype.refresh.call(this)}},util.extendClass(ProgressBar,View),util.defineClassProperties(ProgressBar,{index:{set:function(t){if(util.isNumber(t)&&(this._index=t,this.__inner_view)){var e,i=this.size[0];(e=(i-=this.__border_width)*(this._index-this._range[0])/(this._range[1]-this._range[0]))>i&&(e=i),e<0&&(e=0);var s=window.deviceConfiguration.os;s===DeviceConfiguration.OS_ANDROID||s===DeviceConfiguration.OS_IOS?this.__inner_view.style.width=e+this.__border_width+"px":this.__inner_view.style.width=e+"px"}},get:function(){return this._index}},range:{set:function(t){util.isArray(t)&&2===t.length&&util.isNumber(t[0])&&util.isNumber(t[1])&&(t[0]===t[1]||t[0]>t[1]||(this._range[0]=t[0],this._range[1]=t[1],this.index=this._index))},get:function(){return this._range.slice()}},indeterminate:{set:function(t){t?(this._indeterminate=!0,this.view&&util.addClassName(this.view,"indeterminate")):(this._indeterminate=!1,this.view&&util.removeClassName(this.view,"indeterminate"))},get:function(){return this._indeterminate}}}),ui.ProgressBar=ProgressBar,RadioButton.prototype={_selected_index:-1,__inputs:null,__labels:null,clean_gui:function(){var t;for(this.__scroll_start=0,util.removeAllElementChild(this._list_items);this.__inputs.length;)t=this.__inputs[0],vs.removePointerListener(t,core.POINTER_START,this),t.removeEventListener("click",this),this.__inputs.remove(0),this.__labels.remove(0)},_renderData:function(){if(this._model){var t,e,i,s,o;if(this._list_items){this.clean_gui(),this._selected_index=-1;window.deviceConfiguration.os;for(t=0,s=this._model.length;t<s;t++)i=this._model.item(t),(e=document.createElement("input")).type="radio",e.name=this._id,e.value=t,e.id=this._id+"_l"+t,this._list_items.appendChild(e),this.__inputs[t]=e,vs.addPointerListener(e,core.POINTER_START,this),e.addEventListener("click",this),(o=document.createElement("label")).value=t,o.setAttribute("for",this._id+"_l"+t),vs.addPointerListener(o,core.POINTER_START,this),o.addEventListener("click",this),util.setElementInnerText(o,i),this._list_items.appendChild(o),this.__labels[t]=o;this.refresh()}else console.error("vs.ui.RadioButton uncorrectly initialized.")}},_touchItemFeedback:function(t){var e=t.value,i=this.__inputs[e],s=this.__labels[e];util.addClassName(i,"pressed"),util.addClassName(s,"pressed")},_untouchItemFeedback:function(t){var e=t.value,i=this.__inputs[e],s=this.__labels[e];util.removeClassName(i,"pressed"),util.removeClassName(s,"pressed")},_updateSelectItem:function(t){var e=parseInt(t.value);t._comp_&&t._comp_.didSelect&&t._comp_.didSelect(),(e>=0||e<this.__inputs.length)&&(this.selectedIndex=e,this.outPropertyChange(),this.propagate("change",{index:this._selected_index,item:this._model.item(this._selected_index)}))}},util.extendClass(RadioButton,AbstractList),util.defineClassProperty(RadioButton,"selectedIndex",{set:function(t){if(util.isNumber(t)||(t=parseInt(t)),!isNaN(t)&&!(t<0||t>this.__inputs.length-1)&&this.__inputs[t]){var e=this.__inputs[t];e&&(e.checked=!0),this._selected_index=t}},get:function(){return this._selected_index}}),ui.RadioButton=RadioButton,DragRecognizer.prototype={__is_dragged:!1,init:function(t){PointerRecognizer.prototype.init.call(this,t),this.addPointerListener(this.obj.view,core.POINTER_START,this.obj),this.reset()},uninit:function(){this.removePointerListener(this.obj.view,core.POINTER_START,this.obj)},pointerStart:function(t){if(!this.__is_dragged&&t.targetPointerList&&!(t.targetPointerList.length>1)){var e=t.targetPointerList[0];this.__start_x=e.pageX,this.__start_y=e.pageY,this.__pointer_id=e.identifier,this.__is_dragged=!0,this.addPointerListener(document,core.POINTER_END,this.obj),this.addPointerListener(document,core.POINTER_MOVE,this.obj);try{this.delegate&&this.delegate.didDragStart&&this.delegate.didDragStart(t,t.targetPointerList[0].currentTarget._comp_)}catch(t){t.stack&&console.log(t.stack),console.log(t)}return!1}},pointerMove:function(t){if(this.__is_dragged){for(var e,i,s,o=0,n=t.targetPointerList.length;o<n&&(e=t.targetPointerList[o]).identifier!==this.__pointer_id;o++)e=null;if(e){i=e.pageX-this.__start_x,s=e.pageY-this.__start_y;try{this.delegate&&this.delegate.didDrag&&this.delegate.didDrag({dx:i,dy:s},t,t.targetPointerList[0].currentTarget._comp_)}catch(t){t.stack&&console.log(t.stack),console.log(t)}}}},pointerEnd:function(t){if(this.__is_dragged){for(var e,i=0,s=t.changedPointerList.length;i<s&&(e=t.changedPointerList[i]).identifier!==this.__pointer_id;i++)e=null;if(e){this.__is_dragged=!1,this.__start_x=undefined,this.__start_y=undefined,this.__pointer_id=undefined,this.removePointerListener(document,core.POINTER_END,this.obj),this.removePointerListener(document,core.POINTER_MOVE,this.obj);try{this.delegate&&this.delegate.didDragEnd&&this.delegate.didDragEnd(t,t.changedPointerList[0].target._comp_)}catch(t){t.stack&&console.log(t.stack),console.log(t)}}}},pointerCancel:function(t){return this.pointerEnd(t)}},util.extendClass(DragRecognizer,PointerRecognizer),ui.DragRecognizer=DragRecognizer,PinchRecognizer.prototype={init:function(t){PointerRecognizer.prototype.init.call(this,t),this.addPointerListener(this.obj.view,core.GESTURE_START,this.obj),this.reset()},uninit:function(){this.removePointerListener(this.obj.view,core.GESTURE_START,this.obj)},gestureStart:function(t){this.addPointerListener(document,core.GESTURE_CHANGE,this.obj),this.addPointerListener(document,core.GESTURE_END,this.obj);try{this.delegate&&this.delegate.didPinchStart&&this.delegate.didPinchStart(event,event.targetPointerList[0].target._comp_)}catch(t){t.stack&&console.log(t.stack),console.log(t)}return!1},gestureChange:function(t){try{this.delegate&&this.delegate.didPinchChange&&this.delegate.didPinchChange(t.scale,t,t.targetPointerList[0].target._comp_)}catch(t){t.stack&&console.log(t.stack),console.log(t)}},gestureEnd:function(t){this.removePointerListener(document,core.GESTURE_CHANGE,this.obj),this.removePointerListener(document,core.GESTURE_END,this.obj);try{this.delegate&&this.delegate.didPinchEnd&&this.delegate.didPinchEnd(event,event.targetPointerList[0].target._comp_)}catch(t){t.stack&&console.log(t.stack),console.log(t)}},pointerCancel:function(t){return this.pointerEnd(t)}},util.extendClass(PinchRecognizer,PointerRecognizer),ui.PinchRecognizer=PinchRecognizer;var POINTER_LISTENERS=[];PointerRecognizer.prototype={addPointerListener:function(t,e,i,s){if(!t||!e||!i)return!1;for(var o,n=0,r=POINTER_LISTENERS.length;n<r;n++)if((o=POINTER_LISTENERS[n]).target===t&&o.type===e&&o.listener===i)return o.nb++,!0;return o={},o.target=t,o.type=e,o.listener=i,o.nb=1,POINTER_LISTENERS.push(o),vs.addPointerListener(t,e,i,s),!0},removePointerListener:function(t,e,i,s){if(!t||!e||!i)return!1;for(var o,n=0,r=POINTER_LISTENERS.length;n<r;n++)if((o=POINTER_LISTENERS[n]).target===t&&o.type===e&&o.listener===i)return o.nb--,0===o.nb&&(vs.removePointerListener(t,e,i,s),POINTER_LISTENERS.remove(n)),!0;return!1},init:function(t){this.obj=t},uninit:function(){},reset:function(){},pointerStart:function(t){},pointerMove:function(t){},pointerEnd:function(t){},pointerCancel:function(t){},gestureStart:function(t){},gestureChange:function(t){},gestureEnd:function(t){}},ui.PointerRecognizer=PointerRecognizer;var RecognizerManager={handleEvent:function(t){if(this.__pointer_recognizers.length){if(!this._enable)return;switch(t.type){case core.POINTER_START:this.__pointer_recognizers.forEach(function(e){e.pointerStart(t)});break;case core.POINTER_MOVE:this.__pointer_recognizers.forEach(function(e){e.pointerMove(t)});break;case core.POINTER_END:this.__pointer_recognizers.forEach(function(e){e.pointerEnd(t)});break;case core.POINTER_CANCEL:this.__pointer_recognizers.forEach(function(e){e.pointerCancel(t)});break;case core.GESTURE_START:this.__pointer_recognizers.forEach(function(e){e.gestureStart(t)});break;case core.GESTURE_CHANGE:this.__pointer_recognizers.forEach(function(e){e.gestureChange(t)});break;case core.GESTURE_END:this.__pointer_recognizers.forEach(function(e){e.gestureEnd(t)})}}else this._propagateToParent&&this._propagateToParent(t)},__pointer_recognizers:null,addPointerRecognizer:function(t){!t instanceof PointerRecognizer||-1===this.__pointer_recognizers.indexOf(t)&&(this.__pointer_recognizers.push(t),t.init(this))},removePointerRecognizer:function(t){!t instanceof PointerRecognizer||(this.__pointer_recognizers.remove(t),t.uninit())}};ui.RecognizerManager=RecognizerManager,RotationRecognizer.prototype={init:function(t){PointerRecognizer.prototype.init.call(this,t),this.addPointerListener(this.obj.view,core.GESTURE_START,this.obj),this.reset()},uninit:function(){this.removePointerListener(this.obj.view,core.GESTURE_START,this.obj)},gestureStart:function(t){this.addPointerListener(document,core.GESTURE_CHANGE,this.obj),this.addPointerListener(document,core.GESTURE_END,this.obj);try{this.delegate&&this.delegate.didRotationStart&&this.delegate.didRotationStart(event)}catch(t){t.stack&&console.log(t.stack),console.log(t)}return!1},gestureChange:function(t){try{this.delegate&&this.delegate.didRotationChange&&this.delegate.didRotationChange(t.rotation,t)}catch(t){t.stack&&console.log(t.stack),console.log(t)}},gestureEnd:function(t){this.removePointerListener(document,core.GESTURE_CHANGE,this.obj),this.removePointerListener(document,core.GESTURE_END,this.obj);try{this.delegate&&this.delegate.didRotationEnd&&this.delegate.didRotationEnd(event)}catch(t){t.stack&&console.log(t.stack),console.log(t)}},pointerCancel:function(t){return this.pointerEnd(t)}},util.extendClass(RotationRecognizer,PointerRecognizer),ui.RotationRecognizer=RotationRecognizer;var MULTI_TAP_DELAY=100;TapRecognizer.prototype={__is_touched:!1,__did_tap_time_out:0,__tap_mode:0,init:function(t){PointerRecognizer.prototype.init.call(this,t),this.addPointerListener(this.obj.view,core.POINTER_START,this.obj),this.reset()},uninit:function(){this.removePointerListener(this.obj.view,core.POINTER_START,this.obj)},pointerStart:function(t){if(!this.__is_touched&&!(0===t.targetPointerList.length||t.nbPointers>1)){0===this.__tap_mode&&(this.__tap_mode=1),this.__tap_elem=t.targetPointerList[0].currentTarget;try{this.delegate&&this.delegate.didTouch&&this.delegate.didTouch(this.__tap_elem._comp_,this.__tap_elem,t)}catch(t){t.stack&&console.log(t.stack),console.log(t)}return this.__did_tap_time_out&&(this.__tap_mode++,clearTimeout(this.__did_tap_time_out),this.__did_tap_time_out=0),this.addPointerListener(document,core.POINTER_END,this.obj),this.addPointerListener(document,core.POINTER_MOVE,this.obj),this.__start_x=t.targetPointerList[0].pageX,this.__start_y=t.targetPointerList[0].pageY,this.__is_touched=!0,!1}},pointerMove:function(t){if(this.__is_touched&&0!==t.pointerList.length){var e=t.pointerList[0].pageX-this.__start_x,i=t.pointerList[0].pageY-this.__start_y;if(Math.abs(e)+Math.abs(i)<View.MOVE_THRESHOLD)return!1;this.removePointerListener(document,core.POINTER_END,this.obj),this.removePointerListener(document,core.POINTER_MOVE,this.obj),this.__is_touched=!1;try{this.delegate&&this.delegate.didUntouch&&this.delegate.didUntouch(this.__tap_elem._comp_,this.__tap_elem,t)}catch(t){t.stack&&console.log(t.stack),console.log(t)}}},pointerEnd:function(t){if(this.__is_touched){this.__is_touched=!1;var e=this,i=this.__tap_elem,s=i?i._comp_:null;if(this.__tap_elem=undefined,this.removePointerListener(document,core.POINTER_END,this.obj),this.removePointerListener(document,core.POINTER_MOVE,this.obj),this.delegate&&this.delegate.didUntouch)try{this.delegate.didUntouch(s,i,t)}catch(t){t.stack&&console.log(t.stack),console.log(t)}this.delegate&&this.delegate.didTap?this.__did_tap_time_out=setTimeout(function(){try{e.delegate.didTap(e.__tap_mode,s,i,t)}catch(t){t.stack&&console.log(t.stack),console.log(t)}e.__tap_mode=0,e.__did_tap_time_out=0},MULTI_TAP_DELAY):e.__tap_mode=0}},pointerCancel:function(t){return this.pointerEnd(t)}},util.extendClass(TapRecognizer,PointerRecognizer),ui.TapRecognizer=TapRecognizer,ScrollImageView.STRETCH_NONE=0,ScrollImageView.STRETCH_FILL=1,ScrollImageView.STRETCH_UNIFORM=2,ScrollImageView.STRETCH_UNIFORM_FILL=3,ScrollImageView.prototype={_image_data:null,_image_width:0,_image_height:0,_image_loaded:!1,_src:null,_stretch:ScrollImageView.STRETCH_FILL,destructor:function(){this._sub_view&&(this._image_data.onload=null,delete this._image_data,this._image_loaded=!1,this._sub_view.src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="),ScrollView.prototype.destructor.call(this)},show:function(){ScrollView.prototype.show.call(this),this.stretch=this._stretch},refresh:function(){if(this._sub_view&&this._image_loaded)if(this._stretch===ScrollImageView.STRETCH_FILL)this._sub_view.setAttribute("width","100%"),this._sub_view.setAttribute("height","100%");else if(this._stretch===ScrollImageView.STRETCH_NONE)this._sub_view.removeAttribute("width"),this._sub_view.removeAttribute("height");else if(this._stretch===ScrollImageView.STRETCH_UNIFORM){var t=0,e=1;(i=this._size[0]/this._size[1])<(s=this._image_width/this._image_height)?(e=this._image_width/this._size[0],t=(this._size[1]-this._image_height/e)/2,this._sub_view.setAttribute("width","100%"),this._sub_view.removeAttribute("height"),this._sub_view.style.left="0px",this._sub_view.style.top=t+"px"):(e=this._image_height/this._size[1],t=(this._size[0]-this._image_width/e)/2,this._sub_view.removeAttribute("width"),this._sub_view.setAttribute("height","100%"),this._sub_view.style.top="0px",this._sub_view.style.left=t+"px")}else if(this._stretch===ScrollImageView.STRETCH_UNIFORM_FILL){var i=this._size[0]/this._size[1],s=this._image_width/this._image_height;i>s?(this._sub_view.setAttribute("width","100%"),this._sub_view.removeAttribute("height")):(this._sub_view.removeAttribute("width"),this._sub_view.setAttribute("height","100%"))}this.__scroll_activated&&this._scroll_refresh(this._pinch),View.prototype.refresh.call(this)},_image_onload:function(t){this._image_loaded=!0,this._image_width=this._image_data.width,this._image_height=this._image_data.height,this._sub_view&&(this._sub_view.src=this._src),this.stretch=this._stretch,this.propagate("load");var e=this;vs.scheduleAction(function(){e.refresh()})},initComponent:function(){ScrollView.prototype.initComponent.call(this);var t=this;this._image_data=new Image,this._image_data.onload=function(e){t._image_onload(e)},this.pinch=this._pinch,this.pan=this._pan,this._sub_view&&this._sub_view.src&&(this._src=this._sub_view.getAttribute("src"),this._image_data.src=this._src,this._image_onload()),this._sub_view&&(this._sub_view.ondragstart=function(t){return t.preventDefault(),!1},this.stretch=this._stretch),this.refresh()}},util.extendClass(ScrollImageView,ScrollView),util.defineClassProperties(ScrollImageView,{src:{set:function(t){util.isString(t)&&(this._image_loaded=!1,this._src=t,this._image_data.src=this._src)},get:function(){return this._src}},stretch:{set:function(t){util.isNumber(t)&&(t!==ScrollImageView.STRETCH_FILL&&t!==ScrollImageView.STRETCH_NONE&&t!==ScrollImageView.STRETCH_UNIFORM&&t!==ScrollImageView.STRETCH_UNIFORM_FILL||(this._stretch=t,this.refresh()))},get:function(){return this._stretch}},size:{set:function(t){(util.isArray(t)||2===t.length||util.isNumber(t[0])&&util.isNumber(t[1]))&&(this.stretch=this._stretch,this._size[0]=t[0],this._size[1]=t[1],this._updateSizeAndPos())},get:function(){return this.view&&this.view.parentNode&&(this._size[0]=this.view.offsetWidth,this._size[1]=this.view.offsetHeight),this._size.slice()}}}),ui.ScrollImageView=ScrollImageView,function(t,e,i){function s(t){return""===n?t:(t=t.charAt(0).toUpperCase()+t.substr(1),n+t)}var o=Math,n=i.CSS_VENDOR,r=i.CSS_VENDOR?"-"+i.CSS_VENDOR+"-":"",a=s("transform"),l=s("transitionProperty"),_=i.TRANSITION_DURATION,h=i.TRANSFORM_ORIGIN,c=i.TRANSITION_TIMING_FUNC,d=i.TRANSITION_DELAY,u=/android/gi.test(navigator.appVersion),p=/iphone|ipad/gi.test(navigator.appVersion),m=(/hp-tablet/gi.test(navigator.appVersion),i.SUPPORT_3D_TRANSFORM),f="ontouchstart"in t,v=i.SUPPORT_CSS_TRANSFORM,g=v,T="onorientationchange"in t?"orientationchange":"resize",w=i.POINTER_START,S=i.POINTER_MOVE,b=i.POINTER_END,E=i.POINTER_CANCEL,y=i.TRANSITION_END,N=i.requestAnimationFrame,C=i.cancelRequestAnimationFrame,A=m?" translateZ(0)":"",O=function(i,s,o){var n,d=this;d.wrapper="object"==typeof i?i:e.getElementById(i),d.wrapper.style.overflow="hidden",d.scroller=s,d.options={hScroll:!0,vScroll:!0,x:0,y:0,bounce:!0,bounceLock:!1,momentum:!0,lockDirection:!0,useTransform:!0,useTransition:!1,topOffset:0,checkDOMChanges:!1,handleClick:!0,hScrollbar:!0,vScrollbar:!0,fixedScrollbar:u,hideScrollbar:p,fadeScrollbar:p&&m,scrollbarClass:"",zoom:!1,zoomMin:1,zoomMax:4,doubleTapZoom:2,wheelAction:"scroll",snap:!1,snapThreshold:1,onRefresh:null,onBeforeScrollStart:function(t){t.preventDefault()},onScrollStart:null,onBeforeScrollMove:null,onScrollMove:null,onBeforeScrollEnd:null,onScrollEnd:null,onTouchEnd:null,onDestroy:null,onZoomStart:null,onZoom:null,onZoomEnd:null};for(n in o)d.options[n]=o[n];d.x=d.options.x,d.y=d.options.y,d.options.useTransform=v&&d.options.useTransform,d.options.hScrollbar=d.options.hScroll&&d.options.hScrollbar,d.options.vScrollbar=d.options.vScroll&&d.options.vScrollbar,d.options.zoom=d.options.useTransform&&d.options.zoom,d.options.useTransition=g&&d.options.useTransition,d.options.zoom&&u&&(A=""),d.scroller.style[l]=d.options.useTransform?r+"transform":"top left",d.scroller.style[_]="0",d.scroller.style[h]="0 0",d.options.useTransition&&(d.scroller.style[c]="cubic-bezier(0.33,0.66,0.66,1)"),d.options.useTransform?d.scroller.style[a]="translate("+d.x+"px,"+d.y+"px)"+A:d.scroller.style.cssText+=";position:absolute;top:"+d.y+"px;left:"+d.x+"px",d.options.useTransition&&(d.options.fixedScrollbar=!0),d.refresh(),d._bind(T,t),d._bind(w),f||"none"!=d.options.wheelAction&&(d._bind("DOMMouseScroll"),d._bind("mousewheel")),d.options.checkDOMChanges&&(d.checkDOMTime=setInterval(function(){d._checkDOMChanges()},500))};O.prototype={enabled:!0,x:0,y:0,steps:[],scale:1,currPageX:0,currPageY:0,pagesX:[],pagesY:[],aniTime:null,wheelZoomCount:0,handleEvent:function(t){var e=this;switch(t.type){case w:if(!f&&0!==t.button)return;e._start(t);break;case S:e._move(t);break;case b:case E:e._end(t);break;case T:e._resize();break;case"DOMMouseScroll":case"mousewheel":e._wheel(t);break;case y:e._transitionEnd(t)}},_checkDOMChanges:function(){this.moved||this.zoomed||this.animating||this.scrollerW==this.scroller.offsetWidth*this.scale&&this.scrollerH==this.scroller.offsetHeight*this.scale||this.refresh()},_scrollbar:function(t){var i,s=this;s[t+"Scrollbar"]?(s[t+"ScrollbarWrapper"]||(i=e.createElement("div"),s.options.scrollbarClass?i.className=s.options.scrollbarClass+t.toUpperCase():i.style.cssText="position:absolute;z-index:100;"+("h"==t?"height:7px;bottom:1px;left:2px;right:"+(s.vScrollbar?"7":"2")+"px":"width:7px;bottom:"+(s.hScrollbar?"7":"2")+"px;top:2px;right:1px"),i.style.cssText+=";pointer-events:none;"+r+"transition-property:opacity;"+r+"transition-duration:"+(s.options.fadeScrollbar?"350ms":"0")+";overflow:hidden;opacity:"+(s.options.hideScrollbar?"0":"1"),s.wrapper.appendChild(i),s[t+"ScrollbarWrapper"]=i,i=e.createElement("div"),s.options.scrollbarClass||(i.style.cssText="position:absolute;z-index:100;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);"+r+"background-clip:padding-box;"+r+"box-sizing:border-box;"+("h"==t?"height:100%":"width:100%")+";"+r+"border-radius:3px;border-radius:3px"),i.style.cssText+=";pointer-events:none;"+r+"transition-property:"+r+"transform;"+r+"transition-timing-function:cubic-bezier(0.33,0.66,0.66,1);"+r+"transition-duration:0;"+r+"transform: translate(0,0)"+A,s.options.useTransition&&(i.style.cssText+=";"+r+"transition-timing-function:cubic-bezier(0.33,0.66,0.66,1)"),s[t+"ScrollbarWrapper"].appendChild(i),s[t+"ScrollbarIndicator"]=i),"h"==t?(s.hScrollbarSize=s.hScrollbarWrapper.clientWidth,s.hScrollbarIndicatorSize=o.max(o.round(s.hScrollbarSize*s.hScrollbarSize/s.scrollerW),8),s.hScrollbarIndicator.style.width=s.hScrollbarIndicatorSize+"px",s.hScrollbarMaxScroll=s.hScrollbarSize-s.hScrollbarIndicatorSize,s.hScrollbarProp=s.hScrollbarMaxScroll/s.maxScrollX):(s.vScrollbarSize=s.vScrollbarWrapper.clientHeight,s.vScrollbarIndicatorSize=o.max(o.round(s.vScrollbarSize*s.vScrollbarSize/s.scrollerH),8),s.vScrollbarIndicator.style.height=s.vScrollbarIndicatorSize+"px",s.vScrollbarMaxScroll=s.vScrollbarSize-s.vScrollbarIndicatorSize,s.vScrollbarProp=s.vScrollbarMaxScroll/s.maxScrollY),s._scrollbarPos(t,!0)):s[t+"ScrollbarWrapper"]&&(v&&(s[t+"ScrollbarIndicator"].style[a]=""),s[t+"ScrollbarWrapper"].parentNode.removeChild(s[t+"ScrollbarWrapper"]),s[t+"ScrollbarWrapper"]=null,s[t+"ScrollbarIndicator"]=null)},_resize:function(){var t=this;setTimeout(function(){t.refresh()},u?200:0)},_pos:function(t,e){this.zoomed||(t=this.hScroll?t:0,e=this.vScroll?e:0,this.options.useTransform?this.scroller.style[a]="translate("+t+"px,"+e+"px) scale("+this.scale+")"+A:(t=o.round(t),e=o.round(e),this.scroller.style.left=t+"px",this.scroller.style.top=e+"px"),this.x=t,this.y=e,this._scrollbarPos("h"),this._scrollbarPos("v"))},_scrollbarPos:function(t,e){var i,s=this,n="h"==t?s.x:s.y;s[t+"Scrollbar"]&&((n=s[t+"ScrollbarProp"]*n)<0?(s.options.fixedScrollbar||((i=s[t+"ScrollbarIndicatorSize"]+o.round(3*n))<8&&(i=8),s[t+"ScrollbarIndicator"].style["h"==t?"width":"height"]=i+"px"),n=0):n>s[t+"ScrollbarMaxScroll"]&&(s.options.fixedScrollbar?n=s[t+"ScrollbarMaxScroll"]:((i=s[t+"ScrollbarIndicatorSize"]-o.round(3*(n-s[t+"ScrollbarMaxScroll"])))<8&&(i=8),s[t+"ScrollbarIndicator"].style["h"==t?"width":"height"]=i+"px",n=s[t+"ScrollbarMaxScroll"]+(s[t+"ScrollbarIndicatorSize"]-i))),s[t+"ScrollbarWrapper"].style[d]="0",s[t+"ScrollbarWrapper"].style.opacity=e&&s.options.hideScrollbar?"0":"1",s[t+"ScrollbarIndicator"].style[a]="translate("+("h"==t?n+"px,0)":"0,"+n+"px)")+A)},_start:function(e){var i,s,n,r,l,_=this,h=e.pointerList[0];_.enabled&&(_.options.onBeforeScrollStart&&_.options.onBeforeScrollStart.call(_,e),(_.options.useTransition||_.options.zoom)&&_._transitionTime(0),_.moved=!1,_.animating=!1,_.zoomed=!1,_.distX=0,_.distY=0,_.absDistX=0,_.absDistY=0,_.dirX=0,_.dirY=0,_.options.zoom&&e.nbPointers>1&&(r=o.abs(e.pointerList[0].pageX-e.pointerList[1].pageX),l=o.abs(e.pointerList[0].pageY-e.pointerList[1].pageY),_.touchesDistStart=o.sqrt(r*r+l*l),_.originX=o.abs(e.pointerList[0].pageX+e.pointerList[1].pageX-2*_.wrapperOffsetLeft)/2-_.x,_.originY=o.abs(e.pointerList[0].pageY+e.pointerList[1].pageY-2*_.wrapperOffsetTop)/2-_.y,_.options.onZoomStart&&_.options.onZoomStart.call(_,e)),_.options.momentum&&(_.options.useTransform?(s=+((i=getComputedStyle(_.scroller,null)[a].replace(/[^0-9\-.,]/g,"").split(","))[12]||i[4]),n=+(i[13]||i[5])):(s=+getComputedStyle(_.scroller,null).left.replace(/[^0-9-]/g,""),n=+getComputedStyle(_.scroller,null).top.replace(/[^0-9-]/g,"")),s==_.x&&n==_.y||(_.options.useTransition?_._unbind(y):C(_.aniTime),_.steps=[],_._pos(s,n),_.options.onScrollEnd&&_.options.onScrollEnd.call(_))),_.absStartX=_.x,_.absStartY=_.y,_.startX=_.x,_.startY=_.y,_.pointX=h.pageX,_.pointY=h.pageY,_.startTime=e.timeStamp||Date.now(),_.options.onScrollStart&&_.options.onScrollStart.call(_,e),_._bind(S,t),_._bind(b,t),_._bind(E,t))},_move:function(t){var e,i,s,n=this,r=t.pointerList[0],l=r.pageX-n.pointX,_=r.pageY-n.pointY,h=n.x+l,c=n.y+_,d=t.timeStamp||Date.now();if(n.options.onBeforeScrollMove&&n.options.onBeforeScrollMove.call(n,t),n.options.zoom&&t.nbPointers>1)return e=o.abs(t.pointerList[0].pageX-t.pointerList[1].pageX),i=o.abs(t.pointerList[0].pageY-t.pointerList[1].pageY),n.touchesDist=o.sqrt(e*e+i*i),n.zoomed=!0,(s=1/n.touchesDistStart*n.touchesDist*this.scale)<n.options.zoomMin?s=.5*n.options.zoomMin*Math.pow(2,s/n.options.zoomMin):s>n.options.zoomMax&&(s=2*n.options.zoomMax*Math.pow(.5,n.options.zoomMax/s)),n.lastScale=s/this.scale,h=this.originX-this.originX*n.lastScale+this.x,c=this.originY-this.originY*n.lastScale+this.y,this.scroller.style[a]="translate("+h+"px,"+c+"px) scale("+s+")"+A,void(n.options.onZoom&&n.options.onZoom.call(n,t));n.pointX=r.pageX,n.pointY=r.pageY,(h>0||h<n.maxScrollX)&&(h=n.options.bounce?n.x+l/2:h>=0||n.maxScrollX>=0?0:n.maxScrollX),(c>n.minScrollY||c<n.maxScrollY)&&(c=n.options.bounce?n.y+_/2:c>=n.minScrollY||n.maxScrollY>=0?n.minScrollY:n.maxScrollY),n.distX+=l,n.distY+=_,n.absDistX=o.abs(n.distX),n.absDistY=o.abs(n.distY),n.absDistX<6&&n.absDistY<6||(n.options.lockDirection&&(n.absDistX>n.absDistY+5?(c=n.y,_=0):n.absDistY>n.absDistX+5&&(h=n.x,l=0)),n.moved=!0,n._pos(h,c),n.dirX=l>0?-1:l<0?1:0,n.dirY=_>0?-1:_<0?1:0,d-n.startTime>300&&(n.startTime=d,n.startX=n.x,n.startY=n.y),n.options.onScrollMove&&n.options.onScrollMove.call(n,t))},_end:function(i){if(0===i.nbPointers){var s,n,r,l,h,c,d,u=this,p=i.changedPointerList[0],m={dist:0,time:0},v={dist:0,time:0},g=(i.timeStamp||Date.now())-u.startTime,T=u.x,w=u.y;if(u._unbind(S,t),u._unbind(b,t),u._unbind(E,t),u.options.onBeforeScrollEnd&&u.options.onBeforeScrollEnd.call(u,i),u.zoomed)return d=u.scale*u.lastScale,d=Math.max(u.options.zoomMin,d),d=Math.min(u.options.zoomMax,d),u.lastScale=d/u.scale,u.scale=d,u.x=u.originX-u.originX*u.lastScale+u.x,u.y=u.originY-u.originY*u.lastScale+u.y,u.scroller.style[_]="200ms",u.scroller.style[a]="translate("+u.x+"px,"+u.y+"px) scale("+u.scale+")"+A,u.zoomed=!1,u.refresh(),void(u.options.onZoomEnd&&u.options.onZoomEnd.call(u,i));if(!u.moved)return f&&(u.doubleTapTimer&&u.options.zoom?(clearTimeout(u.doubleTapTimer),u.doubleTapTimer=null,u.options.onZoomStart&&u.options.onZoomStart.call(u,i),u.zoom(u.pointX,u.pointY,1==u.scale?u.options.doubleTapZoom:1),u.options.onZoomEnd&&setTimeout(function(){u.options.onZoomEnd.call(u,i)},200)):this.options.handleClick&&(u.doubleTapTimer=setTimeout(function(){for(u.doubleTapTimer=null,s=p.target;1!=s.nodeType;)s=s.parentNode;"SELECT"!=s.tagName&&"INPUT"!=s.tagName&&"TEXTAREA"!=s.tagName&&((n=e.createEvent("MouseEvents")).initMouseEvent("click",!0,!0,i.view,1,p.screenX,p.screenY,p.clientX,p.clientY,i.ctrlKey,i.altKey,i.shiftKey,i.metaKey,0,null),n._fake=!0,s.dispatchEvent(n))},u.options.zoom?250:0))),u._resetPos(400),void(u.options.onTouchEnd&&u.options.onTouchEnd.call(u,i));if(g<300&&u.options.momentum&&(m=T?u._momentum(T-u.startX,g,-u.x,u.scrollerW-u.wrapperW+u.x,u.options.bounce?u.wrapperW:0):m,v=w?u._momentum(w-u.startY,g,-u.y,u.maxScrollY<0?u.scrollerH-u.wrapperH+u.y-u.minScrollY:0,u.options.bounce?u.wrapperH:0):v,T=u.x+m.dist,w=u.y+v.dist,(u.x>0&&T>0||u.x<u.maxScrollX&&T<u.maxScrollX)&&(m={dist:0,time:0}),(u.y>u.minScrollY&&w>u.minScrollY||u.y<u.maxScrollY&&w<u.maxScrollY)&&(v={dist:0,time:0})),m.dist||v.dist)return h=o.max(o.max(m.time,v.time),10),u.options.snap&&(r=T-u.absStartX,l=w-u.absStartY,o.abs(r)<u.options.snapThreshold&&o.abs(l)<u.options.snapThreshold?u.scrollTo(u.absStartX,u.absStartY,200):(T=(c=u._snap(T,w)).x,w=c.y,h=o.max(c.time,h))),u.scrollTo(o.round(T),o.round(w),h),void(u.options.onTouchEnd&&u.options.onTouchEnd.call(u,i));if(u.options.snap)return r=T-u.absStartX,l=w-u.absStartY,o.abs(r)<u.options.snapThreshold&&o.abs(l)<u.options.snapThreshold?u.scrollTo(u.absStartX,u.absStartY,200):(c=u._snap(u.x,u.y)).x==u.x&&c.y==u.y||u.scrollTo(c.x,c.y,c.time),void(u.options.onTouchEnd&&u.options.onTouchEnd.call(u,i));u._resetPos(200),u.options.onTouchEnd&&u.options.onTouchEnd.call(u,i)}},_resetPos:function(t){var e=this,i=e.x>=0?0:e.x<e.maxScrollX?e.maxScrollX:e.x,s=e.y>=e.minScrollY||e.maxScrollY>0?e.minScrollY:e.y<e.maxScrollY?e.maxScrollY:e.y;if(i==e.x&&s==e.y)return e.moved&&(e.moved=!1,e.options.onScrollEnd&&e.options.onScrollEnd.call(e)),e.hScrollbar&&e.options.hideScrollbar&&("webkit"==n&&(e.hScrollbarWrapper.style[d]="300ms"),e.hScrollbarWrapper.style.opacity="0"),void(e.vScrollbar&&e.options.hideScrollbar&&("webkit"==n&&(e.vScrollbarWrapper.style[d]="300ms"),e.vScrollbarWrapper.style.opacity="0"));e.scrollTo(i,s,t||0)},_wheel:function(t){var e,i,s,o,n,r=this;if("wheelDeltaX"in t)e=t.wheelDeltaX/12,i=t.wheelDeltaY/12;else if("wheelDelta"in t)e=i=t.wheelDelta/12;else{if(!("detail"in t))return;e=i=3*-t.detail}if("zoom"==r.options.wheelAction)return(n=r.scale*Math.pow(2,1/3*(i?i/Math.abs(i):0)))<r.options.zoomMin&&(n=r.options.zoomMin),n>r.options.zoomMax&&(n=r.options.zoomMax),void(n!=r.scale&&(!r.wheelZoomCount&&r.options.onZoomStart&&r.options.onZoomStart.call(r,t),r.wheelZoomCount++,r.zoom(t.pageX,t.pageY,n,400),setTimeout(function(){r.wheelZoomCount--,!r.wheelZoomCount&&r.options.onZoomEnd&&r.options.onZoomEnd.call(r,t)},400)));s=r.x+e,o=r.y+i,s>0?s=0:s<r.maxScrollX&&(s=r.maxScrollX),o>r.minScrollY?o=r.minScrollY:o<r.maxScrollY&&(o=r.maxScrollY),r.maxScrollY<0&&r.scrollTo(s,o,0)},_transitionEnd:function(t){var e=this;t.target==e.scroller&&(e._unbind(y),e._startAni())},_startAni:function(){var t,e,i,s=this,n=s.x,r=s.y,a=Date.now();if(!s.animating)if(s.steps.length){if((t=s.steps.shift()).x==n&&t.y==r&&(t.time=0),s.animating=!0,s.moved=!0,s.options.useTransition)return s._transitionTime(t.time),s._pos(t.x,t.y),s.animating=!1,void(t.time?s._bind(y):s._resetPos(0));(i=function(){var l,_,h=Date.now();if(h>=a+t.time)return s._pos(t.x,t.y),s.animating=!1,s.options.onAnimationEnd&&s.options.onAnimationEnd.call(s),void s._startAni();h=(h-a)/t.time-1,e=o.sqrt(1-h*h),l=(t.x-n)*e+n,_=(t.y-r)*e+r,s._pos(l,_),s.animating&&(s.aniTime=N(i))})()}else s._resetPos(400)},_transitionTime:function(t){t+="ms",this.scroller.style[_]=t,this.hScrollbar&&(this.hScrollbarIndicator.style[_]=t),this.vScrollbar&&(this.vScrollbarIndicator.style[_]=t)},_momentum:function(t,e,i,s,n){var r=o.abs(t)/e,a=r*r/.0012,l=0;return t>0&&a>i?(r=r*(i+=n/(6/(a/r*6e-4)))/a,a=i):t<0&&a>s&&(r=r*(s+=n/(6/(a/r*6e-4)))/a,a=s),a*=t<0?-1:1,l=r/6e-4,{dist:a,time:o.round(l)}},_offset:function(t){for(var e=-t.offsetLeft,i=-t.offsetTop;t=t.offsetParent;)e-=t.offsetLeft,i-=t.offsetTop;return t!=this.wrapper&&(e*=this.scale,i*=this.scale),{left:e,top:i}},_snap:function(t,e){var i,s,n,r,a,l,_=this;for(n=_.pagesX.length-1,i=0,s=_.pagesX.length;i<s;i++)if(t>=_.pagesX[i]){n=i;break}for(n==_.currPageX&&n>0&&_.dirX<0&&n--,t=_.pagesX[n],a=(a=o.abs(t-_.pagesX[_.currPageX]))?o.abs(_.x-t)/a*500:0,_.currPageX=n,n=_.pagesY.length-1,i=0;i<n;i++)if(e>=_.pagesY[i]){n=i;break}return n==_.currPageY&&n>0&&_.dirY<0&&n--,e=_.pagesY[n],l=o.abs(e-_.pagesY[_.currPageY]),l=l?o.abs(_.y-e)/l*500:0,_.currPageY=n,r=o.round(o.max(a,l))||200,{x:t,y:e,time:r}},_bind:function(t,e,s){i.addPointerListener(e||this.scroller,t,this,!!s)},_unbind:function(t,e,s){i.removePointerListener(e||this.scroller,t,this,!!s)},destroy:function(){var e=this;e.scroller.style[a]="",e.hScrollbar=!1,e.vScrollbar=!1,e._scrollbar("h"),e._scrollbar("v"),e._unbind(T,t),e._unbind(w),e._unbind(S,t),e._unbind(b,t),e._unbind(E,t),e.options.hasTouch||(e._unbind("DOMMouseScroll"),e._unbind("mousewheel")),e.options.useTransition&&e._unbind(y),e.options.checkDOMChanges&&clearInterval(e.checkDOMTime),e.options.onDestroy&&e.options.onDestroy.call(e)},refresh:function(){var t,e,i,s,n=this,r=0,a=0;if(n.scale<n.options.zoomMin&&(n.scale=n.options.zoomMin),n.wrapperW=n.wrapper.clientWidth||1,n.wrapperH=n.wrapper.clientHeight||1,n.minScrollY=-n.options.topOffset||0,n.scrollerW=o.round(n.scroller.offsetWidth*n.scale),n.scrollerH=o.round((n.scroller.offsetHeight+n.minScrollY)*n.scale),n.maxScrollX=n.wrapperW-n.scrollerW,n.maxScrollY=n.wrapperH-n.scrollerH+n.minScrollY,n.dirX=0,n.dirY=0,n.options.onRefresh&&n.options.onRefresh.call(n),n.hScroll=n.options.hScroll&&n.maxScrollX<0,n.vScroll=n.options.vScroll&&(!n.options.bounceLock&&!n.hScroll||n.scrollerH>n.wrapperH),n.hScrollbar=n.hScroll&&n.options.hScrollbar,n.vScrollbar=n.vScroll&&n.options.vScrollbar&&n.scrollerH>n.wrapperH,t=n._offset(n.wrapper),n.wrapperOffsetLeft=-t.left,n.wrapperOffsetTop=-t.top,"string"==typeof n.options.snap)for(n.pagesX=[],n.pagesY=[],e=0,i=(s=n.scroller.querySelectorAll(n.options.snap)).length;e<i;e++)(r=n._offset(s[e])).left+=n.wrapperOffsetLeft,r.top+=n.wrapperOffsetTop,n.pagesX[e]=r.left<n.maxScrollX?n.maxScrollX:r.left*n.scale,n.pagesY[e]=r.top<n.maxScrollY?n.maxScrollY:r.top*n.scale;else if(n.options.snap){for(n.pagesX=[];r>=n.maxScrollX;)n.pagesX[a]=r,r-=n.wrapperW,a++;for(n.maxScrollX%n.wrapperW&&(n.pagesX[n.pagesX.length]=n.maxScrollX-n.pagesX[n.pagesX.length-1]+n.pagesX[n.pagesX.length-1]),r=0,a=0,n.pagesY=[];r>=n.maxScrollY;)n.pagesY[a]=r,r-=n.wrapperH,a++;n.maxScrollY%n.wrapperH&&(n.pagesY[n.pagesY.length]=n.maxScrollY-n.pagesY[n.pagesY.length-1]+n.pagesY[n.pagesY.length-1])}n._scrollbar("h"),n._scrollbar("v"),n.zoomed||(n.scroller.style[_]="0",n._resetPos(400))},scrollTo:function(t,e,i,s){var o,n,r=this,a=t;for(r.stop(),a.length||(a=[{x:t,y:e,time:i,relative:s}]),o=0,n=a.length;o<n;o++)a[o].relative&&(a[o].x=r.x-a[o].x,a[o].y=r.y-a[o].y),r.steps.push({x:a[o].x,y:a[o].y,time:a[o].time||0});r._startAni()},scrollToElement:function(t,e){var i,s=this;(t=t.nodeType?t:s.scroller.querySelector(t))&&((i=s._offset(t)).left+=s.wrapperOffsetLeft,i.top+=s.wrapperOffsetTop,i.left=i.left>0?0:i.left<s.maxScrollX?s.maxScrollX:i.left,i.top=i.top>s.minScrollY?s.minScrollY:i.top<s.maxScrollY?s.maxScrollY:i.top,e=e===undefined?o.max(2*o.abs(i.left),2*o.abs(i.top)):e,s.scrollTo(i.left,i.top,e))},scrollToPage:function(t,e,i){var s,o,n=this;i=i===undefined?400:i,n.options.onScrollStart&&n.options.onScrollStart.call(n),n.options.snap?(t="next"==t?n.currPageX+1:"prev"==t?n.currPageX-1:t,e="next"==e?n.currPageY+1:"prev"==e?n.currPageY-1:e,t=t<0?0:t>n.pagesX.length-1?n.pagesX.length-1:t,e=e<0?0:e>n.pagesY.length-1?n.pagesY.length-1:e,n.currPageX=t,n.currPageY=e,s=n.pagesX[t],o=n.pagesY[e]):(s=-n.wrapperW*t,o=-n.wrapperH*e,s<n.maxScrollX&&(s=n.maxScrollX),o<n.maxScrollY&&(o=n.maxScrollY)),n.scrollTo(s,o,i)},disable:function(){this.stop(),this._resetPos(0),this.enabled=!1,this._unbind(S,t),this._unbind(b,t),this._unbind(E,t)},enable:function(){this.enabled=!0},stop:function(){this.options.useTransition?this._unbind(y):C(this.aniTime),this.steps=[],this.moved=!1,this.animating=!1},zoom:function(t,e,i,s){var o=this,n=i/o.scale;o.options.useTransform&&(o.zoomed=!0,s=s===undefined?200:s,t=t-o.wrapperOffsetLeft-o.x,e=e-o.wrapperOffsetTop-o.y,o.x=t-t*n+o.x,o.y=e-e*n+o.y,o.scale=i,o.refresh(),o.x=o.x>0?0:o.x<o.maxScrollX?o.maxScrollX:o.x,o.y=o.y>o.minScrollY?o.minScrollY:o.y<o.maxScrollY?o.maxScrollY:o.y,o.scroller.style[_]=s+"ms",o.scroller.style[a]="translate("+o.x+"px,"+o.y+"px) scale("+i+")"+A,o.zoomed=!1)},isReady:function(){return!this.moved&&!this.zoomed&&!this.animating}},"undefined"!=typeof exports?exports.iScroll=O:t.iScroll=O}(window,document,vs),ScrollView.NO_SCROLL=0,ScrollView.VERTICAL_SCROLL=1,ScrollView.HORIZONTAL_SCROLL=2,ScrollView.SCROLL=3,ScrollView.NO_PINCH=0,ScrollView.ROTATION=1,ScrollView.SCALE=2,ScrollView.ROTATION_AND_SCALE=3,ScrollView.prototype={_delegate:null,_scroll:!1,__scroll_activated:!1,_pinch:ScrollView.NO_PINCH,_ab_view_t_x:0,_ab_view_t_y:0,_ab_view_s:1,_ab_view_r:0,_animation_duration:0,refresh:function(){var t,e,i=this.size,s=i[0],o=i[1],n=this._getComputedStyle(this.view),r=0,a=0;this._sub_view&&(this._sub_view.style.height="",this._sub_view.style.width="",vs.scheduleAction(function(){if(this.__i__){for(View.prototype.refresh.call(this),n&&(e=n["border-right-width"],r+=e?parseInt(e,10):0,e=n["border-left-width"],r+=e?parseInt(e,10):0,e=n["border-top-width"],a+=e?parseInt(e,10):0,e=n["borde-bottom-width"],a+=e?parseInt(e,10):0),s-=r,o-=a,t=this._sub_view.firstElementChild;t;)(e=t.offsetHeight+t.offsetTop)>o&&(o=e),(e=t.offsetWidth+t.offsetLeft)>s&&(s=e),t=t.nextElementSibling;this._scroll===ScrollView.SCROLL&&(this._sub_view.style.width=s+"px",this._sub_view.style.height=o+"px"),this._scroll===ScrollView.HORIZONTAL_SCROLL&&(this._sub_view.style.width=s+"px",this._sub_view.style.height=this.size[1]-r+"px"),this._scroll===ScrollView.VERTICAL_SCROLL&&(this._sub_view.style.width=this.size[0]-a+"px",this._sub_view.style.height=o+"px"),this._scroll===ScrollView.NO_SCROLL&&(i=this.size,this._sub_view.style.width=i[0]+"px",this._sub_view.style.height=i[1]+"px"),this.__iscroll__&&this.__iscroll__.refresh()}}.bind(this)))},destructor:function(){this.__iscroll__&&(this.__iscroll__.destroy(),this.__iscroll__=undefined),this._scroll=!1,this._sub_view&&this._sub_view.parentElement&&this._sub_view.parentElement.removeChild(this._sub_view),View.prototype.destructor.call(this),delete this._sub_view},add:function(t,e){t&&(t instanceof NavigationBar&&(e="top_bar"),t instanceof ToolBar&&(e="bottom_bar"),View.prototype.add.call(this,t,e))},initComponent:function(){View.prototype.initComponent.call(this),this._sub_view=this.view.querySelector(".content"),this.pinch=this._pinch,this.scroll=this._scroll,this.layout=this._layout,this.animationDuration=this._animation_duration,this.refresh()},_updateSize:function(){View.prototype._updateSize.call(this),this.refresh()},_setup_iscroll:function(){if(this.__iscroll__&&(this.__iscroll__.destroy(),this.__iscroll__=undefined),this.view&&this._sub_view){var t={};t.bubbling=!1,t.hScroll=!1,t.vScroll=!1,1===this._scroll?t.vScroll=!0:2===this._scroll?t.hScroll=!0:3===this._scroll&&(t.hScroll=!0,t.vScroll=!0),t.hScrollbar=!1,t.vScrollbar=!1,this.__iscroll__=new iScroll(this.view,this._sub_view,t),this.refresh()}}},util.extendClass(ScrollView,View),util.defineClassProperties(ScrollView,{delegate:{set:function(t){this._delegate=t}},scroll:{set:function(t){t!==this._scroll&&(t?!0!==t&&1!==t&&2!==t&&3!==t||(this._scroll=t,this._setup_iscroll()):(this.__iscroll__&&(this.__iscroll__.destroy(),this.__iscroll__=undefined),this._scroll=!1))},get:function(){return this._scroll}},pinch:{set:function(t){t!==ScrollView.NO_PINCH&&t!==ScrollView.ROTATION&&t!==ScrollView.SCALE&&t!==ScrollView.ROTATION_AND_SCALE||this.view&&(this._pinch=t)}},animationDuration:{set:function(t){t||(t=0),util.isNumber(t)&&(this._animation_duration=t,this._sub_view&&(this._sub_view.style.webkitTransitionDuration=t+"ms",(this.hScrollbar||this.vScrollbar)&&this._scroll_transition_time(t)))}},layout:{set:function(t){t!==View.HORIZONTAL_LAYOUT&&t!==View.DEFAULT_LAYOUT&&t!==View.ABSOLUTE_LAYOUT&&t!==View.VERTICAL_LAYOUT&&t!==View.FLOW_LAYOUT&&t!==View.LEGACY_HORIZONTAL_LAYOUT&&t!==View.LEGACY_ABSOLUTE_LAYOUT&&t!==View.LEGACY_VERTICAL_LAYOUT&&t!==View.LEGACY_FLOW_LAYOUT&&t?console.error("Unsupported layout '"+t+"'!"):(t&&-1===t.indexOf("_layout")&&(t+="_layout"),this._sub_view?(this._layout&&util.removeClassName(this._sub_view,this._layout),this._layout=t,this._layout&&util.addClassName(this._sub_view,this._layout)):this._layout=t)}},innerHTML:{set:function(t){this._sub_view&&util.safeInnerHTML(this._sub_view,t)}}}),ui.ScrollView=ScrollView,SegmentedButton.DEFAULT_TYPE="default",SegmentedButton.BAR_TYPE="bar",SegmentedButton.HORIZONTAL=0,SegmentedButton.VERTICAL=1,SegmentedButton.prototype={_type:SegmentedButton.DEFAULT_TYPE,_is_toggle_buttons:!0,_items:null,_selected_index:-1,_div_list:null,_orientation:SegmentedButton.HORIZONTAL,destructor:function(){this._cleanButtons(),View.prototype.destructor.call(this)},_cleanButtons:function(t){if(this.view)for(util.removeAllElementChild(this.view);this._div_list.length;){var e=this._div_list[0];vs.removePointerListener(e,core.POINTER_START,this),this._div_list.remove(0)}},_renderButtons:function(t){if(this.view){this._cleanButtons();var e="",i=window.deviceConfiguration.os;this._items.length&&i==DeviceConfiguration.OS_WP7&&(e=Math.floor(100/this._items.length));var s=document.createElement("div");this.view.appendChild(s);for(var o=0,n=this._items.length;o<n;o++){var r=document.createElement("div");r._index=o,util.setElementInnerText(r,this._items[o]),e&&util.setElementStyle(r,{width:e+"%"}),vs.addPointerListener(r,core.POINTER_START,this),this._div_list.push(r),s.appendChild(r)}this.orientation=this._orientation}},initComponent:function(){View.prototype.initComponent.call(this),this._items=new Array,this._div_list=new Array,this._renderButtons(),this.selectedIndex=this._selected_index,this.type=this._type},handleEvent:function(t){var e;if(t.type===core.POINTER_START){if(t.nbPointers>1)return;return(e=t.target).tagName||(e=e.parentElement),this._selected_index===e._index?!1:(t.stopPropagation(),t.preventDefault(),this.selectedIndex=e._index,this.propagate("select",{index:this._selected_index,item:this._items[this._selected_index]}),this.outPropertyChange(),!1)}}},util.extendClass(SegmentedButton,View),util.defineClassProperties(SegmentedButton,{items:{set:function(t){if(util.isArray(t)&&t.length){this._items.removeAll();for(var e=0,i=t.length;e<i;e++)t[e]&&this._items.push(t[e].toString());this._renderButtons(),this._is_toggle_buttons&&(this.selectedIndex=this._selected_index)}},get:function(){return this._text}},selectedIndex:{set:function(t){if(util.isNumber(t)&&!(t<0||t>=this._div_list.length)){var e=this._div_list[this._selected_index];if(e&&util.removeClassName(e,"selected"),this._selected_index=t,(e=this._div_list[this._selected_index])&&util.addClassName(e,"selected"),!this._is_toggle_buttons){var i=this;this.__button_time_out=setTimeout(function(){util.removeClassName(e,"selected"),i.__button_time_out=0,i._selected_index=-1},300)}}},get:function(){return this._selected_index}},type:{set:function(t){util.isString(t)&&(this._type&&this.removeClassName(this._type),this._type=t,this.addClassName(this._type))},get:function(){return this._type}},isToggleButtons:{set:function(t){this._is_toggle_buttons=!!t},get:function(){return this._is_toggle_buttons}},orientation:{set:function(t){t!==SegmentedButton.HORIZONTAL&&t!==SegmentedButton.VERTICAL||(this._orientation=t,0===this._orientation?(this.removeClassName("vertical"),this.addClassName("horizontal")):(this.addClassName("vertical"),this.removeClassName("horizontal")))},get:function(){return this._orientation}}}),ui.SegmentedButton=SegmentedButton,Slider.HORIZONTAL=0,Slider.VERTICAL=1,Slider.prototype={_orientation:Slider.HORIZONTAL,_value:0,_range:null,__v:0,__drag_x:0,__drag_y:0,__handle:null,__handle_width:0,__handle_delta:10,destructor:function(){this.__drag_recognizer&&(this.removePointerRecognizer(this.__drag_recognizer),this.__drag_recognizer=null),View.prototype.destructor.call(this)},initComponent:function(){View.prototype.initComponent.call(this);var t=vs.ui.View.getDeviceCSSCode();t==Application.CSS_IOS?this.__handle_width=28:t==Application.CSS_WP7?this.__handle_width=30:t==Application.CSS_ANDROID?this.__handle_width=34:t==Application.CSS_BLACKBERRY?(this.__handle_width=35,this.__handle_height=12,this.__handle_delta=3):this.__handle_width=23,this.__handle=this.view.querySelector(".handle"),vs.addPointerListener(this.__handle,core.POINTER_START,this,!0),this.__drag_recognizer||(this.__drag_recognizer=new DragRecognizer(this),this.addPointerRecognizer(this.__drag_recognizer)),this.orientation=this._orientation,this.value=this._value},didDragStart:function(t){if(0!==t.targetPointerList.length){this.__handle_width=this.__handle.offsetWidth,this.__handle_x=this.__handle.offsetLeft,this.__handle_y=this.__handle.offsetTop,this.__abs_pos=vs.util.getElementAbsolutePosition(this.view);var e=t.targetPointerList[0].pageX-this.__abs_pos.x,i=t.targetPointerList[0].pageY-this.__abs_pos.y;0===this._orientation?this.value=this._range[0]+(this._range[1]-this._range[0])*e/this.view.offsetWidth:this.value=this._range[0]+(this._range[1]-this._range[0])*i/this.view.offsetHeight,this.__v=this._value,this.outPropertyChange(),this.propagate("continuous_change",this._value),this.propagate("change",this._value)}},didDrag:function(t,e){if(0!==e.targetPointerList.length){var i=e.targetPointerList[0].pageX-this.__abs_pos.x,s=e.targetPointerList[0].pageY-this.__abs_pos.y;0===this._orientation?this.value=this._range[0]+(this._range[1]-this._range[0])*i/this.view.offsetWidth:this.value=this._range[0]+(this._range[1]-this._range[0])*s/this.view.offsetHeight,this.outPropertyChange(),this.propagate("continuous_change",this._value)}},didDragEnd:function(){this.propagate("change",this._value)},refresh:function(){this.__handle_width=this.__handle.offsetWidth,0===this._orientation?this.__handle_delta=this.view.offsetHeight:this.__handle_delta=this.view.offsetWidth,this.value=this._value,View.prototype.refresh.call(this)}},util.extendClass(Slider,View),util.defineClassProperties(Slider,{value:{set:function(t){var e,i,s,o;if(!isNaN(t)){t<this._range[0]&&(t=this._range[0]),t>this._range[1]&&(t=this._range[1]),this._value=t;var n=this.__handle_width/2,r=0;r=window.deviceConfiguration.os===DeviceConfiguration.OS_BLACK_BERRY?(this.__handle_height-this.__handle_delta)/2:(this.__handle_width-this.__handle_delta)/2,0===this._orientation?(i=this.view.offsetWidth,s=Math.floor((t-this._range[0])*i/(this._range[1]-this._range[0]))-n,SUPPORT_3D_TRANSFORM?setElementTransform(this.__handle,"translate3d("+s+"px,-"+r+"px,0)"):setElementTransform(this.__handle,"translate("+s+"px,-"+r+"px)"),this.view.style.backgroundSize=s+n+"px 10px"):(e=this.view.offsetHeight,o=Math.floor((t-this._range[0])*e/(this._range[1]-this._range[0]))-n,SUPPORT_3D_TRANSFORM?setElementTransform(this.__handle,"translate3d(-"+r+"px,"+o+"px,0)"):setElementTransform(this.__handle,"translate(-"+r+"px,"+o+"px)"),this.view.style.backgroundSize="10px "+(o+n)+"px")}},get:function(){return this._value}},range:{set:function(t){util.isArray(t)&&2===t.length&&util.isNumber(t[0])&&util.isNumber(t[1])&&(t[0]===t[1]||t[0]>t[1]||(this._range[0]=t[0],this._range[1]=t[1],this.value=this._value))},get:function(){return this._range.slice()}},orientation:{set:function(t){t!==Slider.HORIZONTAL&&t!==Slider.VERTICAL||(this._orientation=t,0===this._orientation?(this.removeClassName("vertical"),this.addClassName("horizontal")):(this.addClassName("vertical"),this.removeClassName("horizontal")),this.value=this._value)},get:function(){return this._orientation}},size:{set:function(t){t&&util.isArray(t)&&2===t.length&&util.isNumber(t[0])&&util.isNumber(t[1])&&(this._size[0]=t[0],this._size[1]=t[1],this.view&&(this._updateSizeAndPos(),this.value=this._value))},get:function(){return this.view&&this.view.parentNode&&(this._size[0]=this.view.offsetWidth,this._size[1]=this.view.offsetHeight),this._size.slice()}}}),ui.Slider=Slider;var SplitView=vs.core.createClass({parent:vs.ui.View,properties:{delegate:{set:function(t){this._delegate=t}},mode:{set:function(t){t!==SplitView.TABLET_MODE&&t!==SplitView.MOBILE_MODE||(this.removeClassName(this._mode),this._mode=t,this.addClassName(this._mode),this._orientation===SplitView.VERTICAL?this._set_orientation(0):this._set_orientation(90))},get:function(){return this._mode}},hideMainPanelButton:{set:function(t){this._hide_main_panel_button=t,this._mode==SplitView.TABLET_MODE&&this._hide_main_panel_button.hide(),this._hide_main_panel_button.bind("select",this)}},showPopOverButton:{set:function(t){this._show_pop_over_button=t,this._mode==SplitView.MOBILE_MODE&&this._show_pop_over_button.hide(),this._show_pop_over_button.bind("select",this)}},secondPanelPosition:{set:function(t){t!==SplitView.LEFT&&t!==SplitView.RIGHT&&t!==SplitView.TOP&&t!==SplitView.BOTTOM||(this.removeClassName(this._second_panel_position),this._second_panel_position=t,this.addClassName(this._second_panel_position))}},orientation:{set:function(t){t!==SplitView.VERTICAL&&t!==SplitView.HORIZONTAL||(this.removeClassName(this._orientation),this._orientation=t,this.addClassName(this._orientation),t===SplitView.VERTICAL?this._set_orientation(0):this._set_orientation(90))},get:function(t){return this._orientation}}},_delegate:null,_mode:"",_second_panel_position:"",_orientation:"",_split_views:null,_fisrt_view_width:320,_pop_over_border_width:8,_pop_over:null,constructor:function(t){this._super(t),this._left_views=new Array,this._pop_over=new PopOver},initComponent:function(){if(this._super(),this._pop_over.init(),this._pop_over.hide(),document.body.appendChild(this._pop_over.view),this._mode?this.mode=this._mode:this.mode=SplitView.TABLET_MODE,this._orientation)this.orientation=this._orientation;else{var t=window.deviceConfiguration.getOrientation();this.orientation=0===t||180===t?SplitView.VERTICAL:SplitView.HORIZONTAL}this._second_panel_position?this.secondPanelPosition=this._second_panel_position:this.secondPanelPosition=SplitView.LEFT},add:function(t,e){"second_panel"===e?(this._left_views.push(t),this._mode===SplitView.MOBILE||this._orientation===SplitView.HORIZONTAL?this._super(t,"second_panel"):this._pop_over.add(t)):this._super(t,"main_panel")},removeAllChildren:function(t){var e,i,s,o=[];for(e in this.__children)if(i=this.__children[e]){if(i instanceof Array)for(;i.length;)s=i[0],this.remove(s),t?util.free(s):o.push(s);else this.remove(i),t?util.free(i):o.push(i);delete this.__children[e]}return this.__children={},t?undefined:o},refresh:function(){this._super(),this._pop_over.visible&&this._pop_over.refresh()},orientationWillChange:function(t){this.orientation=90===t||-90===t?SplitView.HORIZONTAL:SplitView.VERTICAL},_set_orientation:function(t){var e,t;this.size;(e=this._left_views[0])&&(this._mode===SplitView.MOBILE_MODE||90===t||-90===t?(this._pop_over.hide(),this._pop_over.isChild(e)&&this._pop_over.remove(e),this.isChild(e)||View.prototype.add.call(this,e,"second_panel"),e.show(e.refresh),this._delegate&&this._delegate.willShowView&&this._delegate.willShowView(e,this._pop_over),this._show_pop_over_button&&this._show_pop_over_button.hide()):(this.isChild(e)&&View.prototype.remove.call(this,e),this._pop_over.isChild(e)||this._pop_over.add(e),e.show(),this._pop_over.size=[this._fisrt_view_width+2*this._pop_over_border_width,500],this._show_pop_over_button&&this._show_pop_over_button.show(),this._delegate&&this._delegate.willShowView&&this._delegate.willHideView(e,this._pop_over)))},orientationDidChange:function(t){this.refresh()},showPopOver:function(t,e){this._mode===SplitView.TABLET_MODE&&this._orientation===SplitView.VERTICAL&&(this._pop_over.show(t,e),this._pop_over.refresh())},hidePopOver:function(){this._pop_over.hide()},showMainView:function(t){this._mode===SplitView.MOBILE_MODE&&(this._hide_main_panel_button&&this._hide_main_panel_button.show(),this.addClassName("main_view_visible"))},hideMainView:function(){this._mode===SplitView.MOBILE_MODE&&(this._hide_main_panel_button&&this._hide_main_panel_button.hide(),this.removeClassName("main_view_visible"))},notify:function(t){"select"==t.type&&t.src==this._hide_main_panel_button&&this.hideMainView(),"select"==t.type&&t.src==this._show_pop_over_button&&this.showPopOver([20,20])}});SplitView.TABLET_MODE="tablet",SplitView.MOBILE_MODE="mobile",SplitView.VERTICAL="vertical",SplitView.HORIZONTAL="horizontal",SplitView.RIGHT="right",SplitView.LEFT="left",SplitView.BOTTOM="bottom",SplitView.TOP="top",ui.SplitView=SplitView;var SVG_DOCUMENTS={},SVG_DOCUMENTS_TO_LOAD={},SVG_DEFS=null;SVGView.prototype={_href:null,_view_box:null,__set_svg_doc:function(t,e){function i(t){var e=document.createElementNS("http://www.w3.org/2000/svg","use");return e.setAttributeNS("http://www.w3.org/1999/xlink","href","#"+t),e}if(t){var s=document.createElementNS("http://www.w3.org/2000/svg","svg");if(util.removeAllElementChild(this.view),this.view.appendChild(s),this._view_box&&(this.viewBox=this._view_box),e)s.appendChild(i(e));else for(var o=t.childNodes,n=0;n<o.length;n++){var r=o[n];1===r.nodeType&&"defs"!==r.nodeName&&((e=r.getAttribute("id"))||(e=vs.core.createId(),r.setAttribute("id",e)),s.appendChild(i(e)))}}}},util.extendClass(SVGView,View),util.defineClassProperties(SVGView,{href:{set:function(t){if(util.isString(t)){this._href=t;var e,i;-1!==t.indexOf("#")?(e=t.substr(0,t.indexOf("#")),i=t.substring(t.indexOf("#")+1)):e=this._href;var s=SVG_DOCUMENTS[e];s?this.__set_svg_doc(s,i):load_svg_doc(e,i,this)}},get:function(){return this._href}},contentData:{set:function(t){util.isString(t)&&(util.removeAllElementChild(this.view),this.__object&&delete this.__object,util.safeInnerHTML(this.view,t),this._href=undefined)}},viewBox:{set:function(t){if(util.isArray(t)&&4==t.length){this._view_box=t;var e=this.view.querySelector("svg");e&&(e.setAttribute("width",t[2]),e.setAttribute("height",t[3]),e.setAttribute("viewBox",t.join(" ")))}}}}),ui.SVGView=SVGView,Switch.prototype={__tap_recognizer:null,__switch_translate:0,_selected:!1,_toggled:!0,_mode:Application.CSS_DEFAULT,__toggle_on_view:null,__toggle_off_view:null,__switch_view:null,_text_on:"",_text_off:"",didTouch:function(){this.addClassName("pressed"),this._selected=!0},didUntouch:function(){this.removeClassName("pressed"),this._selected=!1},_setToggle:function(t){var e=this;e._toggled=!!t,vs.scheduleAction(function(){e._initWidthSwitch(),e._toggled?(e.addClassName("on"),e._mode===Application.CSS_PURE?util.setElementTransform(e.__switch_view,"translate3d(-15px,0,0)"):e._mode!==Application.CSS_ANDROID?util.setElementTransform(e.__switch_view,"translate3d("+e.__switch_translate+"px,0,0)"):e._mode===Application.CSS_ANDROID&&util.setElementTransform(e.__switch_view,"translate3d(0,0,0)")):(e.removeClassName("on"),util.setElementTransform(e.__switch_view,"translate3d(0,0,0)")),e.outPropertyChange()})},viewDidAdd:function(){View.prototype.viewDidAdd.call(this),this._setToggle(this._toggled)},refresh:function(){View.prototype.refresh.call(this),this._mode=vs.ui.View.getDeviceCSSCode(),this._setToggle(this._toggled)},didTap:function(){this._setToggle(!this._toggled),this.propagate("change",this._toggled)},destructor:function(){this.__tap_recognizer&&(this.removePointerRecognizer(this.__tap_recognizer),this.__tap_recognizer=null),View.prototype.destructor.call(this)},initComponent:function(){View.prototype.initComponent.call(this),this.__toggle_on_view=this.view.querySelector(".vs_ui_switch .toggle_on"),this.__toggle_off_view=this.view.querySelector(".vs_ui_switch .toggle_off"),this.__switch_view=this.view.querySelector(".vs_ui_switch .switch"),this.__tap_recognizer||(this.__tap_recognizer=new TapRecognizer(this),this.addPointerRecognizer(this.__tap_recognizer)),this._mode=vs.ui.View.getDeviceCSSCode(),this._text_on&&(this.textOn=this._text_on),this._text_off&&(this.textOff=this._text_off),this.toggled=this._toggled},_initWidthSwitch:function(){var t=parseInt(vs.util.getElementStyle(this.view,"border-left-width"),10)+parseInt(vs.util.getElementStyle(this.view,"border-right-width"),10);this.__switch_translate=this.view.offsetWidth-(this.__switch_view.offsetWidth+2*this.__switch_view.offsetLeft)-t},_updateSizeAndPos:function(){var t,e=this._size[0],i=(this._size[1],this._pos[0]),s=this._pos[1],o=0,n=0,r="auto",a="auto",l="auto",_=this._autosizing[0],h=this._autosizing[1];this.view.parentNode&&(o=this.view.parentNode.offsetWidth,n=this.view.parentNode.offsetHeight),t=4===_||1===_?e+"px":5===_||7===_?"auto":2===_||3===_||6===_||0===_?o?Math.round(e/o*100)+"%":e+"px":"100%",4===_||5===_||6===_||7===_||2===_&&!o?r=i+"px":2!==_&&0!==_||!o||(r=Math.round(i/o*100)+"%"),1!==_&&3!==_&&5!==_&&7!==_||(l=o-(i+e)+"px"),4===h||5===h||6===h||7===h||2===h&&!n?a=s+"px":2!==h&&0!==h||!n||(a=Math.round(s/n*100)+"%"),this.view.style.width=t,this.view.style.removeProperty("height"),this.view.style.left=r,this.view.style.top=a,this.view.style.right=l,this.view.style.bottom="auto"}},util.extendClass(Switch,View),util.defineClassProperties(Switch,{textOn:{set:function(t){if(this.__toggle_on_view){if(null===t||void 0===t)t="";else if(util.isNumber(t))t=""+t;else if(!util.isString(t)){if(!t.toString)return;t=t.toString()}this._text_on=t,util.setElementInnerText(this.__toggle_on_view,this._text_on)}else console.warn("vs.ui.Switch.textOff, none initialized comp: "+this.id)},get:function(){return this._text_on}},textOff:{set:function(t){if(this.__toggle_off_view){if(null===t||void 0===t)t="";else if(util.isNumber(t))t=""+t;else if(!util.isString(t)){if(!t.toString)return;t=t.toString()}this._text_off=t,util.setElementInnerText(this.__toggle_off_view,this._text_off)}else console.warn("vs.ui.Switch.textOff, none initialized comp: "+this.id)},get:function(){return this._text_off}},toggled:{set:function(t){var e=this;vs.scheduleAction(function(){e._setToggle(t)})},get:function(){return this._toggled}}}),ui.Switch=Switch,TextArea.prototype={_ab_view_t_x:0,_ab_view_t_y:0,_value:"",destructor:function(){this.view.removeEventListener("change",this),this.view.removeEventListener("focus",this),this.view.removeEventListener("blur",this),this.view.removeEventListener("textInput",this),View.prototype.destructor.call(this)},initComponent:function(){View.prototype.initComponent.call(this),util.isString(this._value)&&(this.view.value=this._value,this.view.addEventListener("textInput",this),this.view.addEventListener("change",this),this.view.addEventListener("focus",this),this.view.addEventListener("blur",this))},setFocus:function(){this.view.focus()},setBlur:function(){this.view.blur()},setPointerEvents:function(t){this._text_field.style.pointerEvents=t?"none":"auto"},handleEvent:function(t){function e(t){t.src!==i.view&&(vs.removePointerListener(document,core.POINTER_START,e,!0),i.setBlur())}var i=this;switch(t.type){case"focus":vs.addPointerListener(document,core.POINTER_START,e,!0);break;case"blur":break;case"change":this._value=this.view.value,this.outPropertyChange(),this.propagate("change",this._value);break;case"textInput":this._value=this.view.value,this.outPropertyChange(),this.propagate("continuous_change",this._value)}}},util.extendClass(TextArea,View),util.defineClassProperty(TextArea,"value",{set:function(t){if(null===t||void 0===t)t="";else if(util.isNumber(t))t=""+t;else if(!util.isString(t)){if(!t.toString)return;t=t.toString()}this._value=t,this.view.value=t},get:function(){return this._value}}),ui.TextArea=TextArea,TextLabel.prototype={_text:"",destructor:function(){View.prototype.destructor.call(this)},initComponent:function(){View.prototype.initComponent.call(this),this._text&&util.setElementInnerText(this.view,this._text)}},util.extendClass(TextLabel,View),util.defineClassProperty(TextLabel,"text",{set:function(t){if(null===t||void 0===t)t="";else if(util.isNumber(t))t=""+t;else if(!util.isString(t)){if(!t.toString)return;t=t.toString()}this._text=t,this.view&&util.setElementInnerText(this.view,this._text)},get:function(){return this._text}}),ui.TextLabel=TextLabel,ToolBar.DEFAULT_STYLE="black_style",ToolBar.BLACK_TRANSLUCIDE_STYLE="black_translucide_style",ToolBar.BLUE_STYLE="blue_style",ToolBar.prototype={_hide_animation:null,_show_animation:null,_style:ToolBar.DEFAULT_STYLE,_configuration:[],_items:null,_is_toggle_buttons:!0,__select_item:null,__active_item:null,destructor:function(){util.free(this._show_animation),util.free(this._hide_animation),this.removePointerRecognizer(this.recognizer),util.free(this.recognizer),View.prototype.destructor.call(this)},initComponent:function(){View.prototype.initComponent.call(this),this._hide_animation=new vs.fx.Animation(["translateY","44px"]),this._show_animation=new vs.fx.Animation(["translateY","0px"]),this.style=this._style,this.recognizer=new TapRecognizer(this),this.addPointerRecognizer(this.recognizer)},didTouch:function(t,e,i){var s=i.target._comp_;s&&s!==this.__select_item&&(this.__active_item=s,this.__active_item.addClassName("active"))},didUntouch:function(t,e,i){this.__active_item&&(this.__active_item.removeClassName("active"),this.__active_item=null)},didTap:function(t,e,i,s){var o=s.target._comp_;o&&(this.selectedId=o.id,this.outPropertyChange())},addButton:function(t,e,i){if(!this._items[t]){var s=new ToolBar.Button({id:t});return s.init(),i&&(s.label=i),s.name=e,this.add(s,"children"),this._items[t]=s,s}},addItem:function(t){t&&!this._items[t.id]&&(this.add(t,"children"),this._items[t.id]=t)},removeItem:function(t){var e=this._items[t];if(e){try{this.remove(e)}catch(t){t.stack&&console.log(t.stack)}delete this._items[t]}}},util.extendClass(ToolBar,View),util.defineClassProperties(ToolBar,{style:{set:function(t){util.isString(t)&&(this._style&&this.removeClassName(this._style),this._style=t,this.addClassName(this._style))},get:function(){return this._style}},configuration:{set:function(t){if(util.isArray(t)){var e,i,s;this._configuration=t;for(e in this._items)this.removeItem(e);for(i=0;i<t.length;i++)s=t[i],this.addButton(s[0],s[1],s[2])}}},isToggleButtons:{set:function(t){this._is_toggle_buttons=!!t},get:function(){return this._is_toggle_buttons}},selectedId:{set:function(t){var e=this._items[t],i=this;e&&this.__select_item!==e&&(this.__select_item&&this.__select_item.removeClassName("select"),this.__select_item=e,e.addClassName("select"),this._is_toggle_buttons||(i.__select_item.removeClassName("select"),i.__select_item=null),this.propagate("itemselect",t),this._selected_id=t)},get:function(){return this._selected_id}}}),ToolBar.Text=function(t){this.parent=View,this.parent(t),this.constructor=ToolBar.Text},ToolBar.Text.prototype={_text:"",initComponent:function(){this.__config__||(this.__config__={}),this.__config__.id=this.id,this.__config__.node||(this.__config__.node=document.createElement("div"),this.__config__.node.className="vs_ui_toolbar_text"),View.prototype.initComponent.call(this),this._text_view=document.createElement("div"),this._text_view.className="text_view",this.view.appendChild(this._text_view)}},util.extendClass(ToolBar.Text,View),util.defineClassProperty(ToolBar.Text,"text",{set:function(t){if(null===t||void 0===t)t="";else if(util.isNumber(t))t=""+t;else if(!util.isString(t)){if(!t.toString)return;t=t.toString()}this._text=t,this._text_view&&util.setElementInnerText(this._text_view,this._text)},get:function(){return this._text}}),ToolBar.Button=function(t){this.parent=View,this.parent(t),this.constructor=ToolBar.Button},ToolBar.Button.prototype={_name:"",_label:"",initComponent:function(){this.__config__||(this.__config__={}),this.__config__.id=this.id,this.__config__.node||(this.__config__.node=document.createElement("div"),this.__config__.node.className="vs_ui_toolbar_button"),View.prototype.initComponent.call(this)},setImage:function(t){this.view.style.backgroundImage="url("+t+")"}},util.extendClass(ToolBar.Button,View),util.defineClassProperties(ToolBar.Button,{name:{set:function(t){util.isString(t)&&(this._name=t,this.addClassName(this._name))},get:function(){return this._name}},label:{set:function(t){util.isString(t)&&(this._label=t,util.setElementInnerText(this.view,t),t?this.setStyle("background-position","center 0px"):this.setStyle("background-position","center"))},get:function(){return this._label}}}),ToolBar.BUTTON_ADD="add",ToolBar.BUTTON_ARROW_DOWN="arrow_down",ToolBar.BUTTON_ARROW_LEFT="arrow_left",ToolBar.BUTTON_ARROW_RIGHT="arrow_right",ToolBar.BUTTON_ARROW_UP="arrow_up",ToolBar.BUTTON_ATTACH="attach",ToolBar.BUTTON_AUCTION="auction",ToolBar.BUTTON_BELL_OFF="bell_off",ToolBar.BUTTON_BELL="bell",ToolBar.BUTTON_BLOG="blog",ToolBar.BUTTON_BOOK_MARKED="book_marked",ToolBar.BUTTON_BOOK="book",ToolBar.BUTTON_BOOKMARK_ADD="bookmark_add",ToolBar.BUTTON_BOORMARK="bookmark",ToolBar.BUTTON_BOX_FULL="box_full",ToolBar.BUTTON_BOX_MAIL="box_mail",ToolBar.BUTTON_BOX="box",ToolBar.BUTTON_BRIGHTNESS="brightness",ToolBar.BUTTON_BRUSH="brush",ToolBar.BUTTON_BULB_OFF="bulb_off",ToolBar.BUTTON_BULB_ON="bulb_on",ToolBar.BUTTON_BUZZER="buzzer",ToolBar.BUTTON_CALCULATOR="calculator",ToolBar.BUTTON_CALENDAR="calendar",ToolBar.BUTTON_CALL="call",ToolBar.BUTTON_CANCEL="cancel",ToolBar.BUTTON_CASE="case",ToolBar.BUTTON_CHECKMARK="checkmark",ToolBar.BUTTON_CIRCLE_ARROW_LEFT="circle_arrow_left",ToolBar.BUTTON_CIRCLE_ARROW_RIGHT="circle_arrow_right",ToolBar.BUTTON_COMMAND_LINE="command_line",ToolBar.BUTTON_COMMENT_ADD="command_add",ToolBar.BUTTON_COMMENT_DELETE="command_delete",ToolBar.BUTTON_COMMENT_OK="command_ok",ToolBar.BUTTON_COMPUTER_OFF="computer_off",ToolBar.BUTTON_COMPUTER_ON="computer_on",ToolBar.BUTTON_CONSTRAST="contrast",ToolBar.BUTTON_CONTROL_1="controls_1",ToolBar.BUTTON_CONTROL_2="controls_2",ToolBar.BUTTON_CONTROL_3="controls_3",ToolBar.BUTTON_CONTROL_4="controls_4",ToolBar.BUTTON_CONTROL_5="controls_5",ToolBar.BUTTON_CONTROL_6="controls_6",ToolBar.BUTTON_CONTROL_7="controls_7",ToolBar.BUTTON_CONTROL_8="controls_8",ToolBar.BUTTON_COPY="copy",ToolBar.BUTTON_COURT="court",ToolBar.BUTTON_CREDIT_CARD="credit_card",ToolBar.BUTTON_CUT="cut",ToolBar.BUTTON_DANGER="danger",ToolBar.BUTTON_DELETE="delete",ToolBar.BUTTON_DISK="disk",ToolBar.BUTTON_DOCUMENT_BLANK="document_blank",ToolBar.BUTTON_DOCUMENT="document",ToolBar.BUTTON_DOLLAR="dollar",ToolBar.BUTTON_DOWNLAOD="download",ToolBar.BUTTON_ERROR="error",ToolBar.BUTTON_FAVORITIES_ADD="favorities_add",ToolBar.BUTTON_FAVORITIES_REMOVE="favorities_remove",ToolBar.BUTTON_FAVORITIES="favorities",ToolBar.BUTTON_FILM="film",ToolBar.BUTTON_FILMING="filming",ToolBar.BUTTON_FIRST_AID="first_aid",ToolBar.BUTTON_FLAG_BIS="flag_1",ToolBar.BUTTON_FLAG="flag",ToolBar.BUTTON_FLASH_ARROW="flash_arrow",ToolBar.BUTTON_FLASH="flash",ToolBar.BUTTON_FOLDER_BOOKMARCK="folder_bookmark",ToolBar.BUTTON_FOLDER_GOTO="folder_goto",ToolBar.BUTTON_FOLDER="folder",ToolBar.BUTTON_FONT_CAPITAL="font_capital",ToolBar.BUTTON_FONT_ITALIC="font_italic",ToolBar.BUTTON_FONT_REGULAR="font_regular",ToolBar.BUTTON_FONT_UNDERLINE="font_undeline",ToolBar.BUTTON_FONT="font",ToolBar.BUTTON_FONTS="fonts",ToolBar.BUTTON_FORUM="forum",ToolBar.BUTTON_FRAME="frame",ToolBar.BUTTON_GRAPH_AREAS="graph_areas",ToolBar.BUTTON_GRAPH_BARS_DOWN="graph_bars_down",ToolBar.BUTTON_GRAPH_BARS_UP="graph_bars_up",ToolBar.BUTTON_GRAPH_BARS="graph_bars",ToolBar.BUTTON_GRAPH_DOWN="graph_down",ToolBar.BUTTON_GRAPH_LINES="graph_lines",ToolBar.BUTTON_GRAPH_UP="graph_up",ToolBar.BUTTON_HAT="hat",ToolBar.BUTTON_HELP="help",ToolBar.BUTTON_HOME="home",ToolBar.BUTTON_INFORMATION="information",ToolBar.BUTTON_KEY="key",ToolBar.BUTTON_KEYBOARD="keyboard",ToolBar.BUTTON_LAPTOP="laptop",ToolBar.BUTTON_LINK="links",ToolBar.BUTTON_LIST_BULLETS="bullets",ToolBar.BUTTON_LIST_NUMBERS="list_numbers",ToolBar.BUTTON_LOCK="lock",ToolBar.BUTTON_MAGNIFY_GLASS="magnify_glass",ToolBar.BUTTON_MAIL="mail",ToolBar.BUTTON_MANAGE="manage",ToolBar.BUTTON_MEASURE="measure",ToolBar.BUTTON_MEASURES="measures",ToolBar.BUTTON_MIC_BIS="mic_bis",ToolBar.BUTTON_MIC="mic",ToolBar.BUTTON_MINUS="minus",ToolBar.BUTTON_MUTE="mute",ToolBar.BUTTON_PAINT="pain",ToolBar.BUTTON_PAPER_PLANE="paper_plane",ToolBar.BUTTON_PAPER_TRASH="paper_trash",ToolBar.BUTTON_PAPERCLIO="paperclio",ToolBar.BUTTON_PARAGRAPH="paragraph",ToolBar.BUTTON_PENCIL="pencil",ToolBar.BUTTON_PHOTO="photo",ToolBar.BUTTON_PIECHART="113",ToolBar.BUTTON_POST="post",ToolBar.BUTTON_PROFILE="profile",ToolBar.BUTTON_REFRESH="refresh",ToolBar.BUTTON_RESIZE="resize",ToolBar.BUTTON_RSS="rss",ToolBar.BUTTON_SAD_FACE="sade_face",ToolBar.BUTTON_SAFE="safe",ToolBar.BUTTON_SAVE="save",ToolBar.BUTTON_SETTINGS="settings",ToolBar.SHOPPING_BAG="shopping_bag",ToolBar.SHOPPING_CART="shopping_cart",ToolBar.SHOPPING_HEAVY="shopping_heavy",ToolBar.SIM="sim",ToolBar.SMILE_FACE="smile_face",ToolBar.SORT_AZ="sort_az",ToolBar.SORT_ZA="sort_za",ToolBar.STAR="star",ToolBar.STORAGE="storage",ToolBar.SWITCH="switch",ToolBar.TAG_ADD="tag_add",ToolBar.TAG_CANCEL="tag_cancel",ToolBar.TAG_DELETE="tag_delete",ToolBar.TAG="tag",ToolBar.TEXT_ALIGN_CENTER="text_align_center",ToolBar.TEXT_ALIGN_JUSTIFY="text_align_justify",ToolBar.TEXT_ALIGN_LEFT="text_align_left",ToolBar.TEXT_ALIGN_RIGHT="text_align_right",ToolBar.TIME="time",ToolBar.TIMER="timer",ToolBar.TRASH="trash",ToolBar.TWG="twg",ToolBar.UNLOCK="unlock",ToolBar.UPLOAD="upload",ToolBar.USER="user",ToolBar.USERS="users",ToolBar.VOLUME_DOWN="volume_down",ToolBar.VOLUME_UP="volume_up",ToolBar.VOLUME="volume",ToolBar.WALLET="wallet",ToolBar.WARNING="warning",ToolBar.WIFI="wifi",ToolBar.WINDOW_ERROR="window_error",ToolBar.WINDOW_GLOBE="window_globe",ToolBar.WINDOW_LOCK="window_lock",ToolBar.WINDOW="window",ToolBar.ZOOM_IN="zoom_in",ToolBar.ZOMM_OUT="zoom_out",ui.ToolBar=ToolBar,Scrollbar.prototype={init:function(t,e){this.maxSize="horizontal"===this.dir?this.wrapper.clientWidth:this.wrapper.clientHeight,this.size=Math.round(this.maxSize*this.maxSize/e),this.maxScroll=this.maxSize-this.size,this.toWrapperProp=this.maxScroll/(t-e),this.bar.style["horizontal"===this.dir?"width":"height"]=this.size+"px"},setPosition:function(t){(t=this.toWrapperProp*t)<0?(t=this.shrink?t+3*t:0,this.size+t<5&&(t=5-this.size)):t>this.maxScroll&&(t=this.shrink?t+3*(t-this.maxScroll):this.maxScroll,this.size+this.maxScroll-t<5&&(t=this.size+this.maxScroll-5)),t=SUPPORT_3D_TRANSFORM?"horizontal"===this.dir?"translate3d("+Math.round(t)+"px,0,0)":"translate3d(0,"+Math.round(t)+"px,0)":"horizontal"===this.dir?"translate("+Math.round(t)+"px,0)":"translate(0,"+Math.round(t)+"px)",setElementTransform(this.bar,t)},show:function(){this.wrapper.style.webkitTransitionDelay="0",this.wrapper.style.opacity="1"},hide:function(){this.wrapper.style.webkitTransitionDelay="200ms",this.wrapper.style.opacity="0"},remove:function(){return this.wrapper.parentNode.removeChild(this.wrapper),null}},View.DEFAULT_LAYOUT=null,View.HORIZONTAL_LAYOUT="horizontal",View.LEGACY_HORIZONTAL_LAYOUT="horizontal_layout",View.VERTICAL_LAYOUT="vertical",View.LEGACY_VERTICAL_LAYOUT="vertical_layout",View.ABSOLUTE_LAYOUT="absolute",View.LEGACY_ABSOLUTE_LAYOUT="absolute_layout",View.FLOW_LAYOUT="flow",View.LEGACY_FLOW_LAYOUT="flow_layout",View.MOVE_THRESHOLD=20,View.MAGNET_NONE=0,View.MAGNET_LEFT=3,View.MAGNET_BOTTOM=2,View.MAGNET_TOP=1,View.MAGNET_RIGHT=4,View.MAGNET_CENTER=5,View.NON_G_OBJECT="_non_g_object",View.ANY_PLACE="children",View._positionStyle=undefined,View.__comp_templates={},View._propagate_pointer_event=function(t,e,i){var s="";i.type===core.POINTER_START&&(s="POINTER_START"),i.type===core.POINTER_END&&(s="POINTER_END"),i.type===core.POINTER_MOVE&&(s="POINTER_MOVE"),i.type=s,e.call(t,i)};var _template_nodes=null;View.prototype={_visible:!0,_magnet:View.MAGNET_NONE,_autosizing:null,_pointerevent_handlers:null,_enable:!0,_pos:null,_translation:null,_size:null,_opacity:1,_scaling:1,_rotation:null,_min_scale:.5,_max_scale:3,_layout:null,_transform_origin:null,_transforms_stack:null,_show_animation:null,__show_clb:null,_hide_animation:null,__hide_clb:null,destructor:function(){var t,e,i,s;this.__parent&&this.__parent.remove(this);for(t in this.__children)if(e=this.__children[t]){if(e instanceof Array)for(i=0;i<e.length;i++)s=e[i],util.free(s);else util.free(e);delete this.__children[t]}this.__children={},delete this.view,this.clearTransformStack(),core.EventSource.prototype.destructor.call(this)},refresh:function(){var t,e,i,s,o=this.view;o&&o.parentElement&&(this._size[0]=o.offsetWidth,this._size[1]=o.offsetHeight,this._pos[0]=o.offsetLeft,this._pos[1]=o.offsetTop);for(t in this.__children)if(e=this.__children[t])if(e instanceof Array)for(i=0;i<e.length;i++)(s=e[i])&&s.refresh&&s.refresh();else e.refresh&&e.refresh()},clone:function(t,e){function i(t,e){for(var i,s=[],o=0,n=e.length;o<n;o++)i=e[o],s.push([i,_getPath(t,i)]);return s}function s(t,e,i){for(var s,o=0,n=e.length;o<n;o++)(s=e[o]).id||(s.id=core.createId()),i[s[0].id]=_evalPath(t,s[1])}if(e||(e={}),e.__views__||(e.__views__={}),t||(t={}),!t.node){var o=e.__views__[this.view.id];o||(o=function(t,e){function o(t){t.__gui_object__hack_view__?l.push(t.__gui_object__hack_view__):t.view&&l.push(t.view),n(t)}function n(t){var e,i,s,n;for(e in t.__children)if(i=t.__children[e])if(util.isArray(i))for(n=i.length,s=0;s<n;s++)o(i[s]);else o(i)}var r,a=t.view.cloneNode(!0),l=[];return n(t),r=i(t.view,l),s(a,r,e),a}(this,e.__views__)),t.node=o}return core.EventSource.prototype.clone.call(this,t,e)},_clone_properties_value:function(t,e){var i;for(i in this)"id"!=i&&("size"!=i&&"position"!=i||(value=this.size,value&&3===value.length&&(0!==value[0]||0!==value[1])))&&this.isProperty(i)&&core.Object.__propertyCloneValue(i,this,t)},_clone:function(t,e){function i(t,e){if(!t||!e)return null;if(e[t._id])return e[t._id];var i=e.__views__[t._id];return i?i._comp_:null}var s,o,n,r,a,l,_;core.EventSource.prototype._clone.call(this,t,e),this._show_animation&&(s=e[this._show_animation._id],t._show_animation=s||this._show_animation.clone(),t.__show_clb=this.__show_clb),this._hide_animation&&(s=e[this._hide_animation._id],t._hide_animation=s||this._hide_animation.clone(),t.__hide_clb=this.__hide_clb),t.__parent=undefined;for(n in this.__children)if(o=this.__children[n],l=t._holes[n],o&&l)if(o instanceof Array)for(a=o.length;a--;)(_=i(r=o[a],e))?e[r._id]=_:(_=r.clone(null,e),t.add(_,n));else(_=i(o,e))?e[o._id]=_:(_=o.clone(null,e),t.add(_,n))},_getGUInode:function(t){var e;if(o=this.__getGUInode(t))return o;var i=t.template?t.template:this.template;if(i){var s=new Template(i),o=s.__extend_component(this);return util.free(s),o}return this.html_template&&(o=Template.parseHTML(this.html_template))?o:(e=util.isFunction(this.constructor)?this.constructor.name:util.isString(this.constructor)?this.constructor:View,console.warn("Impossible to instance view of component '"+e+", id ["+t.id+"]. A default one is created"),o=document.createElement("div"))},__getGUInode:function(t){if(t.node)return t.node;var e,i,s,o,n,r=null;return t.node_id&&(r=document.getElementById(t.node_id))?r:(e=t.node_ref)&&((n=View._ref_template_reg.exec(e))&&3==n.length?(i=n[1],e=n[2]):i=t.root_ref,e&&i&&(s=null,o=core.Object._obs[i],(s=o&&o.view?o.view:document.getElementById(this.id))&&(r=_findNodeRef(s,e)),r))?r:t.template_ref&&(r=this._getTemplateNode(t.template_ref))?r:t.id&&(r=document.getElementById(t.id))?r:undefined},_getTemplateNode:function(t){e=null;if(_template_nodes||(_template_nodes=document.querySelector(".application_templates"))&&_template_nodes.parentElement.removeChild(_template_nodes),_template_nodes)var e=_template_nodes.querySelector("."+t);if(e)return document.importNode(e,!0)},initComponent:function(){core.EventSource.prototype.initComponent.call(this),this._holes={},this.__children={},this._pointerevent_handlers=[],this.__config__||(this.__config__={}),this.__config__.id=this.id,this.view=this._getGUInode(this.__config__),this.view?(this.view.id=this._id,this.view._comp_=this,this.view.setAttribute("x-hag-comp",this.id),this._parse_view(this.view)):console.error("vs.ui.View constructor failed. No view!")},componentDidInitialize:function(){core.EventSource.prototype.componentDidInitialize.call(this),this._magnet&&this.view.style.setProperty("position","absolute",null),this._magnet===View.MAGNET_CENTER&&(this._updateSizeAndPos(),this._applyTransformation())},viewDidAdd:function(){var t=this.view,e=this;t&&t.parentElement&&vs.scheduleAction(function(){e._size[0]=t.offsetWidth,e._size[1]=t.offsetHeight,e._pos[0]=t.offsetLeft,e._pos[1]=t.offsetTop})},notify:function(t){},_parse_view:function(t){if(t&&3!==t.nodeType){var e,i;if(null!==t.attributes&&(e=t.attributes.getNamedItem("x-hag-hole")))this._holes[e.nodeValue]=t;else for(i=t.firstElementChild;i;)this._parse_view(i),i=i.nextElementSibling}},createAndAddComponent:function(t,e,i){var s=window[t];{if(s){e||(e={}),e.id||(e.id=core.createId());var o,n,r,a,l,_=this.__getGUInode(e);if(_||(_=this._getTemplateNode(t)),_||s.prototype&&s.prototype.template&&(_=Template.parseHTML(s.prototype.template)),_||s.prototype&&s.prototype.node_template&&(_=document.importNode(s.prototype.node_template,!0)),!_){if(o=t+".xhtml",!(n=View.__comp_templates[o])){if((r=new XMLHttpRequest).open("GET",o,!1),r.send(null),4!==r.readyState)return void console.error("Pb when load the component '"+t+"' template.");if(200!==r.status&&0!==r.status)return void console.error("Template file for component '"+t+"' unfound.");n=r.responseText,View.__comp_templates[o]=n,r=null}_=Template.parseHTML(n)}e.node=_,a=null;try{a=new s(e)}catch(e){return l="Impossible to instanciate comp: "+t,l+=" => "+e.message,console.error(l),void(e.stack&&console.error(e.stack))}try{a.init(),a.configure(e)}catch(e){e.line&&e.sourceURL?(l="Error when initiate comp: "+t,l+=" => "+e.message,l+="\n"+e.sourceURL+":"+e.line):l=e,console.error(l),e.stack&&console.error(e.stack)}return this.add(a,i),a.refresh(),a}console.error("Impossible to fund component '"+t+"'.")}},isChild:function(t){if(!t)return!1;var e,i;for(e in this.__children)if((i=this.__children[e])&&(i===t||i instanceof Array&&-1!==i.indexOf(t)))return!0;return!1},add:function(t,e,i){if(t&&(i?t.__gui_object__hack_view__=i:i=t.view,!this.isChild(t))){var s,o,n,r;if(s=i?e||View.ANY_PLACE:View.NON_G_OBJECT,(o=this.__children[s])&&util.isArray(o)?o.push(t):o?((n=[]).push(o),n.push(t),this.__children[s]=n):this.__children[s]=t,r=this._holes[s],i&&r){if(i.parentElement){if(i.parentElement===r)return t.__parent=this,void(t.viewDidAdd&&t.viewDidAdd());i.parentElement.removeChild(i)}r.appendChild(i),t.__parent=this,t.viewDidAdd&&t.viewDidAdd()}}},remove:function(t){if(t){var e,i,s;if(s=t.__gui_object__hack_view__?t.__gui_object__hack_view__:t.view)for(e in this.__children)if((i=this.__children[e])&&(i===t||i instanceof Array&&-1!==i.indexOf(t))){i instanceof Array?i.remove(t):delete this.__children[e],s.parentElement&&s.parentElement.removeChild(s),t.__parent=null;break}}},removeAllChildren:function(t,e){function i(e){var i,s;if(i=o.__children[e]){if(i instanceof Array)for(;i.length;)s=i[0],o.remove(s),t?util.free(s):n.push(s);else o.remove(i),t?util.free(i):n.push(i);delete o.__children[e]}}var s,o=this,n=[];if(e)i(e);else{for(s in o.__children)i(s);this.__children={}}return t?undefined:n},findNodeRef:function(t){if(this.view)return _findNodeRef(this.view,t)},bind:function(t,e,i,s){if("POINTER_START"===t||"POINTER_END"===t||"POINTER_MOVE"===t||t===core.POINTER_START||t===core.POINTER_END||t===core.POINTER_MOVE){if(!this.view)return;var o,n,r=this;if(i||(i="notify"),util.isFunction(i))o=i;else{if(!util.isString(i)||!util.isFunction(e[i]))return void console.error("Invalid bind arguments.");o=e[i]}if(!o)return void console.warn("Invalid bind arguments. Unknown func: "+i);r=this;n=function(t){if(!(core.EVENT_SUPPORT_TOUCH&&t.changedTouches&&t.changedTouches.length>1)){if(t.src=r,core.EVENT_SUPPORT_TOUCH&&t.changedTouches){t.pageX=t.changedTouches[0].pageX,t.pageY=t.changedTouches[0].pageY;var i=util.getElementAbsolutePosition(r.view);t.offsetX=t.changedTouches[0].pageX-i.x,t.offsetY=t.changedTouches[0].pageY-i.y}View._propagate_pointer_event(e,o,t)}},"POINTER_START"===t&&(t=core.POINTER_START),"POINTER_MOVE"===t&&(t=core.POINTER_MOVE),"POINTER_END"===t&&(t=core.POINTER_END),this._pointerevent_handlers[e.id+t]=n,vs.addPointerListener(this.view,t,n)}return core.EventSource.prototype.bind.call(this,t,e,i,s)},unbind:function(t,e){if(t&&e){if(t===core.POINTER_START||t===core.POINTER_END||t===core.POINTER_MOVE){var i=this._pointerevent_handlers[e.id+t];if(!i||!this.view)return;vs.removePointerListener(this.view,core.POINTER_END,i)}core.EventSource.prototype.unbind.call(this,t,e)}},_setMagnet:function(t){this._magnet=t,this._magnet?this.view.style.setProperty("position","absolute",null):this.view.style.removeProperty("position"),this._updateSizeAndPos(),this._applyTransformation()},_updateSizeAndPos:function(){var t,e,i,s,o=this._pos[0],n=this._pos[1],r=this._size[0],a=this._size[1],l=0,_=0,h="auto",c="auto",d="auto",u="auto",p=this._autosizing[0],m=this._autosizing[1],f=this.view;f&&((i=f.parentElement)&&(l=i.offsetWidth,_=i.offsetHeight),this._magnet===View.MAGNET_LEFT&&(o=0),this._magnet===View.MAGNET_TOP&&(n=0),t=r<0?"":5===p||7===p?"auto":4===p||1===p?r+"px":2===p||3===p||6===p||0===p?l?r/l*100+"%":r+"px":"100%",e=a<0?"":5===m||7===m?"auto":4===m||1===m?a+"px":2===m||3===m||6===m||0===m?_?a/_*100+"%":a+"px":"100%",4===p||5===p||6===p||7===p||2===p&&!l?h=o+"px":2!==p&&0!==p||!l||(h=o/l*100+"%"),r>=0&&(1===p||3===p||5===p||7===p)&&((d=l-(o+r))<0&&(d=0),d+="px"),4===m||5===m||6===m||7===m||2===m&&!_?c=n+"px":2!==m&&0!==m||!_||(c=n/_*100+"%"),a>=0&&(1===m||3===m||5===m||7===m)&&((u=_-(n+a))<0&&(u=0),u+="px"),this._magnet===View.MAGNET_BOTTOM&&(c="auto",u="0px"),this._magnet===View.MAGNET_RIGHT&&(h="auto",d="0px"),this._magnet===View.MAGNET_CENTER&&(c="50%",u="auto",h="50%",d="auto"),(s=f.style).left=h,s.right=d,s.top=c,s.bottom=u,s.width=t,s.height=e)},getStyle:function(t){if(!this.view)return undefined;var e,i=this.view.style;return i&&(e=i[t]),"opacity"===t?e?parseFloat(e):1:"auto"===e?null:e},getComputedStyle:function(t){var e=this._getComputedStyle(this.view);return value=e?e[t]:null},_getComputedStyle:function(t){if(t||(t=this.view),!t)return undefined;var e=t.ownerDocument;return e&&e.defaultView||(e=document),e&&e.defaultView?e.defaultView.getComputedStyle(t,null):undefined},setStyle:function(t,e){t&&this.view&&this.view.style&&this.view.style.removeProperty&&this.view.style.setProperty&&(void 0===e?this.view.style.removeProperty(t):(util.isNumber(e)&&(e=""+e),this.view.style.setProperty(t,e,null)))},setStyles:function(t){t&&this.view&&this.view.style&&util.setElementStyle(this.view,t)},addCssRules:function(t,e){util.addCssRules("#"+this._id+" "+t,e)},addCssRule:function(t,e){util.addCssRule("#"+this._id+" "+t,e)},redraw:function(t){if(this.view){var e=this.view,i=e.style.display,s=this;e.style.display="none",vs.scheduleAction(function(){i?e.style.display=i:e.style.removeProperty("display"),vs.scheduleAction(function(){s.refresh(),t&&util.isFunction(t)&&t.call(s)})})}},show:function(t){this.view&&(this._visible||(util.isFunction(t)||(t=undefined),this.__view_display?this.view.style.display=this.__view_display:this.view.style.removeProperty("display"),this.__view_display=undefined,this.__is_hidding=!1,this.__is_showing=!0,this._show_animation?this._show_animation.process(this,function(){this._show_object(t)},this):this._show_object(t)))},_show_object:function(t){if(this.view&&(this.__visibility_anim=undefined,this.__is_showing)){this.__is_showing=!1,this._visible=!0;var e=this;this.propertyChange(),(this.__show_clb||t)&&(this._show_animation?(this.__show_clb&&this.__show_clb.call(this),t&&t.call(this)):(this.__show_clb&&vs.scheduleAction(function(){e.__show_clb.call(e)}),t&&vs.scheduleAction(function(){t.call(e)})))}},setShowAnimation:function(t,e,i){if(void 0===t||null===t)this._show_animation=null;else{if(t instanceof vs.fx.Animation)this._show_animation=t.clone();else{if(!util.isArray(t))return void console.warn("vs.ui.View.setShowAnimation invalid parameters!");this._show_animation=new vs.fx.Animation,this._show_animation.setAnimations(t)}e&&(e.duration&&(this._show_animation.duration=e.duration),e.timing&&(this._show_animation.timing=e.timing),e.origin&&(this._show_animation.origin=e.origin),e.iterationCount&&(this._show_animation.iterationCount=e.iterationCount),e.delay&&(this._show_animation.delay=e.delay))}util.isFunction(i),this.__show_clb=i},hide:function(t){this.view&&(this._visible||this.__is_showing)&&(util.isFunction(t)||(t=undefined),this._visible=!1,this.__is_showing=!1,this.__is_hidding=!0,this._hide_animation?this._hide_animation.process(this,function(){this._hide_object(t)},this):this._hide_object(t))},_hide_object:function(t){this.view&&!this._visible&&(this.__visibility_anim=undefined,this.__is_hidding&&(this.__is_hidding=!1,this.view.style.display?(this.__view_display=this.view.style.display,"none"===this.__view_display&&(this.__view_display=undefined)):this.__view_display=undefined,this.view.style.display="none",(this.__hide_clb||t)&&(this._show_animation?(this.__hide_clb&&this.__hide_clb.call(this),t&&t.call(this)):(this.__hide_clb&&vs.scheduleAction(function(){self.__hide_clb.call(self)}),t&&vs.scheduleAction(function(){t.call(self)}))),this.propertyChange()))},setHideAnimation:function(t,e,i){if(void 0===t||null===t)this._hide_animation=null;else{if(t instanceof vs.fx.Animation)this._hide_animation=t.clone();else{if(!util.isArray(t))return void console.warn("vs.ui.View.setHideAnimation invalid parameters!");this._hide_animation=new vs.fx.Animation,this._hide_animation.setAnimations(t)}e&&(e.duration&&(this._hide_animation.duration=e.duration),e.timing&&(this._hide_animation.timing=e.timing),e.origin&&(this._hide_animation.origin=e.origin),e.iterationCount&&(this._hide_animation.iterationCount=e.iterationCount),e.delay&&(this._hide_animation.delay=e.delay))}util.isFunction(i),this.__hide_clb=i},setVisible:function(t){this.view&&util.setElementVisibility(this.view,t)},hasClassName:function(t){return!!this.view&&util.hasClassName(this.view,t)},addClassName:function(){if(this.view){var t=Array.prototype.slice.call(arguments);t.unshift(this.view),util.addClassName.apply(this.view,t)}},removeClassName:function(t){if(this.view){var e=Array.prototype.slice.call(arguments);e.unshift(this.view),util.removeClassName.apply(this.view,e)}},toggleClassName:function(t){this.view&&util.isString(t)&&util.toggleClassName(this.view,t)},_propagateToParent:function(t){this._bubbling&&this.__parent&&this.__parent.handleEvent&&this.__parent.handleEvent(t)},notifyToParent:function(t){this.__parent&&(this.__parent.handleEvent?this.__parent.handleEvent(t):this.__parent.notify&&this.__parent.notify(t))},_didEnable:function(){},animate:function(t,e,i){var s;if(t instanceof vs.fx.Animation)s=t;else{if(!util.isArray(t))return void console.warn("vs.ui.View.animate invalid parameters!");(s=new vs.fx.Animation).setAnimations(t)}return e&&(e.duration&&(s.duration=e.duration),e.timing&&(s.timing=e.timing),e.origin&&(s.origin=e.origin),e.iterationCount&&(s.iterationCount=e.iterationCount),e.delay&&(s.delay=e.delay)),s.process(this,i,this)},translate:function(t,e,i){util.isNumber(t)&&util.isNumber(e)&&(util.isNumber(i)||(i=0),this._translation[0]=t,this._translation[1]=e,this._translation[2]=i,this._applyTransformation())},rotate:function(t){util.isNumber(t)?(this._rotation[0]=0,this._rotation[1]=0,this._rotation[2]=t):util.isArray(t)&&(util.isNumber(t[0])?this._rotation[0]=t[0]:this._rotation[0]=0,util.isNumber(t[1])?this._rotation[1]=t[1]:this._rotation[1]=0,util.isNumber(t[2])?this._rotation[2]=t[2]:this._rotation[2]=0),this._applyTransformation()},scale:function(t){util.isNumber(t)&&(t>this._max_scale&&(t=this._max_scale),t<this._min_scale&&(t=this._min_scale),this._scaling!==t&&(this._scaling=t,this._applyTransformation()))},setNewTransformOrigin:function(t){t&&util.isNumber(t.x)&&util.isNumber(t.y)&&(this.flushTransformStack(),this._transform_origin[0]=t.x,this._transform_origin[1]=t.y)},flushTransformStack:function(){var t=new vs.CSSMatrix;t=(t=(t=(t=(t=t.translate(this._transform_origin[0],this._transform_origin[1],0)).translate(this._translation[0],this._translation[1],this._translation[2])).rotate(this._rotation[0],this._rotation[1],this._rotation[2])).scale(this._scaling,this._scaling,1)).translate(-this._transform_origin[0],-this._transform_origin[1],0),this._transforms_stack||(this._transforms_stack=t),this._transforms_stack=t.multiply(this._transforms_stack),delete t,this._translation[0]=0,this._translation[1]=0,this._translation[2]=0,this._scaling=1,this._rotation[0]=0,this._rotation[1]=0,this._rotation[2]=0,this._transform_origin[0]=0,this._transform_origin[1]=0},pushNewTransform:function(t){t&&(this._transforms_stack?this._transforms_stack=t.multiply(this._transforms_stack):this._transforms_stack=t)},clearTransformStack:function(){this._transforms_stack&&delete this._transforms_stack,this._transforms_stack=undefined},getCTM:function(){var t,e=new vs.CSSMatrix;return t=e.translate(this._transform_origin[0]+this._translation[0],this._transform_origin[1]+this._translation[1],this._translation[2]),t=t.multiply(e.rotate(this._rotation[0],this._rotation[1],this._rotation[2])),t=t.scale(this._scaling,this._scaling,1),t=t.translate(-this._transform_origin[0],-this._transform_origin[1],0),this._transforms_stack?t.multiply(this._transforms_stack):t},getParentCTM:function(){function t(e){return e?t(e.__parent).multiply(e.getCTM()):new vs.CSSMatrix}return t(this.__parent)},_applyTransformation:function(){var t=this.getCTM(),e=t.getMatrix3dStr();this._magnet===View.MAGNET_CENTER&&(e+=" translate(-50%,-50%)"),setElementTransform(this.view,e),delete t}},util.extend(View.prototype,RecognizerManager),util.extendClass(View,core.EventSource),util.defineClassProperties(View,{size:{set:function(t){util.isArray(t)&&2===t.length&&util.isNumber(t[0])&&util.isNumber(t[1])&&(this._size[0]=t[0],this._size[1]=t[1],this.view&&this._updateSizeAndPos())},get:function(){return this._size.slice()}},position:{set:function(t){t&&util.isArray(t)&&2==t.length&&util.isNumber(t[0])&&util.isNumber(t[1])&&(this._pos[0]=t[0],this._pos[1]=t[1],this.view&&this._updateSizeAndPos())},get:function(){return this._pos.slice()}},autosizing:{set:function(t){t&&util.isArray(t)&&2==t.length&&util.isNumber(t[0])&&util.isNumber(t[1])&&(this._autosizing[0]===t[0]&&this._autosizing[1]===t[1]||(this._autosizing[0]=t[0],this._autosizing[1]=t[1],this.view&&this._updateSizeAndPos()))}},magnet:{set:function(t){this._magnet!==t&&(!util.isNumber(t)||t<0||t>5||this._setMagnet(t))}},visible:{set:function(t){t?this.show():this.hide()},get:function(){return this._visible}},bubbling:{set:function(t){this._bubbling=!!t}},enable:{set:function(t){t&&!this._enable?(this._enable=!0,this.removeClassName("disabled"),this._didEnable()):!t&&this._enable&&(this._enable=!1,this.addClassName("disabled"),this._didEnable())},get:function(){return this._enable}},opacity:{set:function(t){util.isNumber(t)&&(t<0||t>1||(this.view&&(this.view.style.opacity=t),this._opacity=t))}},translation:{set:function(t){util.isArray(t)&&this.translate(t[0],t[1],t[2])},get:function(){return this._translation.slice()}},rotation:{set:function(t){this.rotate(t)},get:function(){return this._rotation.slice}},scaling:{set:function(t){this.scale(t)},get:function(){return this._scaling}},minScale:{set:function(t){util.isNumber(t)&&(this._min_scale=t,this._scaling<this._min_scale&&this.scale(this._min_scale))},get:function(){return this._min_scale}},maxScale:{set:function(t){util.isNumber(t)&&(this._max_scale=t,this._scaling>this._max_scale&&this.scale(this._max_scale))},get:function(){return this._max_scale}},transformOrigin:{set:function(t){util.isArray(t)&&2===t.length&&util.isNumber(t[0])&&util.isNumber(t[1])&&(this._transform_origin[0]=t[0],this._transform_origin[1]=t[1])},get:function(){return this._transform_origin.slice()}},showAnimmation:{set:function(t){this.setShowAnimation(t)}},hideAnimation:{set:function(t){this.setHideAnimation(t)}},layout:{set:function(t){t!==View.HORIZONTAL_LAYOUT&&t!==View.DEFAULT_LAYOUT&&t!==View.ABSOLUTE_LAYOUT&&t!==View.VERTICAL_LAYOUT&&t!==View.FLOW_LAYOUT&&t!==View.LEGACY_HORIZONTAL_LAYOUT&&t!==View.LEGACY_ABSOLUTE_LAYOUT&&t!==View.LEGACY_VERTICAL_LAYOUT&&t!==View.LEGACY_FLOW_LAYOUT&&t?console.error("Unsupported layout '"+t+"'!"):(this._layout&&this.removeClassName(this._layout),t&&-1===t.indexOf("_layout")?this._layout=t+"_layout":this._layout=t,this._layout&&this.addClassName(this._layout))}},innerHTML:{set:function(t){this.view&&util.safeInnerHTML(this.view,t)}}}),View._ref_template_reg=/(\w+)#(\w+)/,ui.View=View,View.getDeviceCSSCode=getDeviceCSSCode,Button.prototype.html_template="<div class='vs_ui_button'><div></div></div>",Canvas.prototype.html_template="<div class='vs_ui_canvas'><canvas class='canvas_inner'></canvas></div>",CheckBox.prototype.html_template="<div class='vs_ui_checkbox'><fieldset x-hag-hole='item_children' /></div>",ComboBox.prototype.html_template="<div class='vs_ui_combobox'></div>",ImageView.prototype.html_template="<img class='vs_ui_imageview'></img>",InputField.prototype.html_template="<div class='vs_ui_inputfield'><input type='text' value='' placeholder='type ...' incremental='incremental'/><div class='clear_button'/> </div>",List.prototype.html_template="<div class='vs_ui_list'><ul x-hag-hole='item_children'/></div>",NavigationBar.prototype.html_template="<div class='vs_ui_navigationbar' x-hag-hole='children'></div>",Picker.prototype.html_template="<div class='vs_ui_picker'>   <div class='slots'></div>   <div class='frame'></div> </div>",PopOver.prototype.html_template="<div class='vs_ui_popover'>   <div class='header' x-hag-hole='header'></div>   <div class='center' x-hag-hole='children'></div>   <div class='footer' x-hag-hole='footer'></div>   <div class='arrow'></div> </div>",ProgressBar.prototype.html_template="<div class='vs_ui_progressbar'><div></div></div>",RadioButton.prototype.html_template="<div class='vs_ui_radiobutton'><fieldset x-hag-hole='item_children' /></div>",ScrollImageView.prototype.html_template="<div class='vs_ui_scrollimageview'><img class='content'/></div> ",ScrollView.prototype.html_template="<div class='vs_ui_scrollview'>   <div x-hag-hole='top_bar'></div>   <div class='content' x-hag-hole='children'></div>   <div x-hag-hole='bottom_bar'></div> </div>",SegmentedButton.prototype.html_template="<div class='vs_ui_segmentedbutton'></div>",Slider.prototype.html_template="<div class='vs_ui_slider'><div class='handle'></div></div>",SplitView.prototype.html_template="<div class='vs_ui_splitview'>   <div x-hag-hole='second_panel'></div>   <div x-hag-hole='main_panel'></div> </div>",SVGView.prototype.html_template="<div class='vs_ui_svgview'></div> ",Switch.prototype.html_template="<div class='vs_ui_switch'>   <div>     <div class='toggle_on'></div>     <div class='toggle_off'></div>      <div class='switch'></div>    </div> </div>",TextArea.prototype.html_template="<textarea class='vs_ui_textarea'></textarea>",TextLabel.prototype.html_template="<div class='vs_ui_textlabel'></div>  ",ToolBar.prototype.html_template="<div class='vs_ui_toolbar'>   <div x-hag-hole='children'></div> </div>",View.prototype.html_template="<div class='vs_ui_view' x-hag-hole='children'></div>",util.defineProperty(document,"preventScroll",{get:function(){return document._preventScroll},set:function(t){document._preventScroll=t,t?(document.addEventListener("touchstart",preventBehavior,!1),document.addEventListener("touchmove",preventBehavior,!1),document.addEventListener("scroll",preventBehavior,!1),window.scrollTo(0,0)):(document.removeEventListener("touchstart",preventBehavior,!1),document.removeEventListener("touchmove",preventBehavior,!1),document.removeEventListener("scroll",preventBehavior,!1))}})}(window);
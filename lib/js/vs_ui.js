/*

 Copyright (C) 2009-2012. David Thevenin, ViniSketch SARL (c), and 
 contributors. All rights reserved

 This program is free software: you can redistribute it and/or modify
 it under the terms of the GNU Lesser General Public License as published
 by the Free Software Foundation, either version 3 of the License, or
 (at your option) any later version.

 This program is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
 GNU Lesser General Public License for more details.

 You should have received a copy of the GNU Lesser General Public License
 along with this program. If not, see <http://www.gnu.org/licenses/>.


 The code include code from :

 Copyright (c) 2009 Matteo Spinelli, http://cubiq.org/
 Released under MIT license
 http://cubiq.org/dropbox/mit-license.txt
 Version 3.4.5 - Last updated: 2010.07.04
*/
(function(o,p){function N(a){this._str=a}function va(a){if(!a)return null;for(var a=a.split("."),b=o;b&&a.length;)b=b[a.shift()];return b}function ka(a,b,c){var d=function(a,b,c){var d={},k="_"+f.underscore(b);d.set=function(a,b,c){return function(d){var f=0,k,t=a.length,e;for(this[c]=d;f<t;f++)k=a[f],3===k.nodeType?k.data=d:2===k.nodeType&&(e=eval(k.__attr_eval_str),"value"==k.name&&"INPUT"==k.ownerElement.tagName?k.ownerElement.value=e:k.value=e);"_$_"==b?this.propertyChange():this.propertyChange(b)}}(c,
b,k);d.get=function(a){return function(){return this[a]}}(k);a.defineProperty(b,d)},k=function(a,b,c,d){var k={},e="_"+f.underscore(b);k.set=function(a,b,c,d){return function(k){if(f.isArray(k)){var t=0,e=k.length,H;this[b]=k;for(f.removeAllElementChild(d);t<e;t++)H=pa(c,k[t]),d.appendChild(H.view);this.propertyChange(a)}}}(b,e,c,d);k.get=function(a){return function(){return this[a]}}(e);a.defineProperty(b,k)};(function(a,b,c){for(var f=[],e=b.__all_properties.length;e--;){var g=b.__all_properties[e],
h=b.__prop_nodes[e],j,m;if(h){m=b.__node;j=h;for(var o=[],n=0,p=j.length,q=void 0;n<p;n++)q=j[n],o.push([ba(m,q),q.__attr_eval_str]);j=o;m=c;for(var o=[],n=0,p=j.length,r=q=void 0;n<p;n++)q=j[n],r=ea(m,q[0]),r.__attr_eval_str=q[1],o.push(r);m=o;f.push([g,h]);"@"===g?d(a,"_$_",m):d(a,g,m)}}for(e=b.__all_properties.length;e--;)if(g=b.__all_properties[e],h=b.__list_iterate_prop[g])path=ba(b.__node,h.__parent_node),node_cloned=ea(c,path),k(a,g,h,node_cloned);a.__node__ref__=f})(a,b,c)}function pa(a,b){var c=
a.__node.cloneNode(!0),d=new a.__class({node:c});ka(d,a,c);d.init();b&&d.configure(b);d.isProperty("_$_")&&(d._$_=b);return d}function qa(a,b){function c(b,d){var k=b.getAttribute("data-iterate");if(k){var e=b.parentElement;e.removeChild(b);-1===d.__all_properties.indexOf(k)&&d.__all_properties.push(k);var g={};d.__list_iterate_prop[k]=g;g.__prop_nodes=[];g.__list_iterate_prop={};g.__parent_node=e;g.__node=b;g.__all_properties=d.__all_properties;g.__class=q.View;d=g}k=b.attributes;e=d;if(k)for(g=
k.length;g--;){var h=k.item(g),j,o=h.value,n=[];a._regexp_index.lastIndex=0;if(j=a._regexp_index.exec(o)){for(;j;)j=parseInt(j[1],10),n.push(j),e.__prop_nodes[j]?e.__prop_nodes[j].push(h):e.__prop_nodes[j]=[h],j=a._regexp_index.exec(o);h.value="";for(var p=0;p<n.length;p++)j=n[p],o=o.replace("${*"+j+"*}",'"+this._'+f.underscore(e.__all_properties[j])+'+"');h.__attr_eval_str='"'+o+'"'}}k=b.childNodes;e=d;if(k)for(g=k.length;g--;)if(h=k.item(g),3===h.nodeType){o=h.data;j=0;a._regexp_index.lastIndex=
0;h.data=" ";for(n=a._regexp_index.exec(o);n;)if(n.index&&(p=m.createTextNode(o.substring(j,n.index)),b.insertBefore(p,h)),j=parseInt(n[1],10),e.__prop_nodes[j]?e.__prop_nodes[j].push(h):e.__prop_nodes[j]=[h],j=n.index+n[0].length,n=a._regexp_index.exec(o))p=m.createTextNode(" "),h.nextSibling?b.insertBefore(p,h.nextSibling):b.appendChild(p),h=p;if(o=o.substring(j))p=m.createTextNode(o),h.nextSibling?b.insertBefore(p,h.nextSibling):b.appendChild(p)}else 1===h.nodeType&&c(h,e)}var d={__prop_nodes:[],
__list_iterate_prop:{},__all_properties:[]};d.__class=va(b);f.isFunction(d.__class)||(d.__class=q.View);a._regexp_templ.lastIndex=0;var k=a._str.replace(a._regexp_templ,function(a,b){var c=d.__all_properties.indexOf(b);-1===c&&(c=d.__all_properties.length,d.__all_properties.push(b));return"${*"+c+"*}"});d.__node=N.parseHTML(k);c(d.__node,d);return d}function x(a){this.constructor=x;this.delegate=a}function P(a){this.parent=x;this.parent(a);this.constructor=P}function R(a){this.parent=x;this.parent(a);
this.constructor=R}function fa(a){this.parent=x;this.parent(a);this.constructor=fa}function ga(a){this.parent=x;this.parent(a);this.constructor=ga}function la(a,b){if(!a.getAttribute)return!1;if(a.getAttribute("x-hag-ref")===b||a.getAttribute("x-hag-comp")===b)return a;for(var c=a.firstElementChild,d;c;){if(d=la(c,b))return d;c=c.nextElementSibling}return!1}function g(a){this.parent=h.EventSource;this.parent(a);this.constructor=g;this.__pointer_recognizers=[]}function ra(a){switch(a){case u.SS_7_INCH:return a=
1.2>=devicePixelRatio?[600,960]:1.4>=devicePixelRatio?[800,1280]:1.7>=devicePixelRatio?[900,1440]:[1200,1920],a;case u.SS_4_INCH:return a=1.2>=devicePixelRatio?[320,540]:1.4>=devicePixelRatio?[427,720]:1.7>=devicePixelRatio?[480,800]:[720,1080],a}}function S(a){if(!("touchstart"==a.type&&("INPUT"==a.target.tagName||"input"==a.target.tagName||"TEXTAREA"==a.target.tagName||"textarea"==a.target.tagName)))return a.preventDefault(),!1}function r(a){this.parent=g;this.parent(a);this.constructor=r;this.__ab_view_t_o=
[50,50]}function y(a){this.parent=r;this.parent(a);this.constructor=y}function T(a){this.parent=g;this.parent(a);this.constructor=T}function z(a){this.parent=g;this.parent(a);this.constructor=z}function G(a){this.parent=r;this.parent(a);this.constructor=G}function ca(){this.parent=K;this.parent();this.constructor=K}function ha(a){this.parent=g;this.parent(a);this.constructor=ha}function sa(a,b,c,d){for(var k=m.createElement("li"),e=m.createElement("div"),t=m.createElement("ul"),g,n=a._model,O;c<n.length;){g=
n.item(c);if(f.isString(g))break;g=n.item(c);O=a.__template_class?(new a.__template_class).init():a.__template_obj?a.__template_obj.clone():(new ca).init();g instanceof h.Model?O.link(g):O.configure(g);O.index=c;d&&j.addPointerListener(O.view,h.POINTER_START,a);t.appendChild(O.view);a.__item_obs.push(O);O.__parent=a;c++}b&&(a=o.deviceConfiguration.os,a==u.OS_MEEGO||a==u.OS_SYMBIAN?(e.appendChild(m.createElement("div")),a=m.createElement("div"),a.appendChild(m.createTextNode(b)),e.appendChild(a)):
f.setElementInnerText(e,b),k.appendChild(e));0<t.childElementCount&&k.appendChild(t);return[k,c]}function wa(a){if(this._model){var b=this._list_items,c,d,k;if(b){this._freeListItems();f.removeAllElementChild(b);L?C(b,"translate3d(0,0,0)"):C(b,"translate(0,0)");var e=b.parentElement;e.removeChild(b);c=0;for(f.setElementVisibility(b,!1);c<this._model.length;)d=this._model.item(c),k=null,f.isString(d)&&(k=d,c++),c=sa(this,k,c,a),b.appendChild(c[0]),c=c[1];e.appendChild(b);b.style.width="auto";f.setElementVisibility(b,
!0)}}}function xa(a){if(this._model){var b=this._list_items,c=this._direct_access,d,k,e;if(b){this._freeListItems();this.__direct_access_letters=[];f.removeAllElementChild(b);c&&f.removeAllElementChild(c);L?f.setElementTransform(b,"translate3d(0,0,0)"):f.setElementTransform(b,"translate(0,0)");var g=b.parentElement;g.removeChild(b);c&&this.view.removeChild(c);d=0;f.setElementVisibility(b,!1);for(var h=0;d<this._model.length;){k=this._model.item(d);e=null;if(f.isString(k)){e=k;d++;k=m.createElement("div");
var j=e[0];f.setElementInnerText(k,j);this.__direct_access_letters.push(j);k._index_=h++;c&&c.appendChild(k)}d=sa(this,e,d,a);b.appendChild(d[0]);d=d[1]}g.appendChild(b);c&&this.view.appendChild(c);b.style.width="auto";f.setElementVisibility(b,!0)}}}function ta(a){if(this._model){var b=this._list_items,c,d,k;if(b){this._freeListItems();f.removeAllElementChild(b);L?C(b,"translate3d(0,0,0)"):C(b,"translate(0,0)");var e=b.parentElement;e.removeChild(b);c=0;for(f.setElementVisibility(b,!1);c<this._model.length;)d=
this._model.item(c),k=this.__template_class?(new this.__template_class).init():this.__template_obj?this.__template_obj.clone():(new ca).init(),d instanceof h.Model?k.link(d):k.configure(d),k.index=c,a&&j.addPointerListener(k.view,h.POINTER_START,this),b.appendChild(k.view),this.__item_obs.push(k),k.__parent=this,c++;e.appendChild(b);b.style.width="auto";f.setElementVisibility(b,!0)}}}function w(a){this.parent=G;this.parent(a);this.constructor=w;this.__item_obs=[]}function D(a){this._data=[];this._items=
{};this.parent=g;this.parent(a);this.constructor=D}function U(a){this.__inputs=[];this.__labels=[];this.parent=G;this.parent(a);this.constructor=U}function V(a){this.__inputs=[];this.__labels=[];this.parent=G;this.parent(a);this.constructor=V;this._selected_indexes=[]}function I(a){this.parent=g;this.parent(a);this.constructor=I;this._states={}}function e(a){this.parent=g;this.parent(a);this.constructor=e;this._items={}}function W(a){this.parent=g;this.parent(a);this.constructor=W}function A(a){this.parent=
g;this.parent(a);this.constructor=A}function E(a){this.parent=g;this.parent(a);this.constructor=E;this._range=[0,100]}function J(a){this.parent=g;this.parent(a);this.constructor=J;this._range=[0,100]}function X(a){this.parent=g;this.parent(a);this.constructor=X}function F(a){this.parent=g;this.parent(a);this.constructor=F}function v(a){this.parent=g;this.parent(a);this.constructor=v}function Y(a){this.parent=g;this.parent(a);this.constructor=Y}function Q(a){this.parent=g;this.parent(a);this.constructor=
Q}function Z(a){this.parent=g;this.parent(a);this.constructor=Z}function ya(a,b,c){if(a&&c){var d=ia[a];if(d)d.push({elem_id:b,svg_obj:c});else{d=[];d.push({elem_id:b,svg_obj:c});ia[a]=d;var k=m.createElement("object");k.data=a;k.type="image/svg+xml";k.width="0";k.height="0";k.style.visibility="hidden";k.onload=function(){var b=k.getSVGDocument();if(b){b=b.querySelector("svg");if(!ja){var c=m.createElementNS("http://www.w3.org/2000/svg","svg");c.setAttribute("width","0");c.setAttribute("height","0");
m.body.appendChild(c);ja=m.createElementNS("http://www.w3.org/2000/svg","defs");c.appendChild(ja)}ja.appendChild(b);m.body.removeChild(k);ua[a]=b;if(c=ia[a]){delete ia[a];for(var d=0;d<c.length;d++){var f=c[d];f.svg_obj.__set_svg_doc(b,f.elem_id)}}}};m.body.appendChild(k)}}}function B(a){this.parent=g;this.parent(a);this.constructor=B}var m=o.document,j=o.vs,f=j.util,h=j.core,q=j.ui,C=f.setElementTransform,u=h.DeviceConfiguration,L=j.SUPPORT_3D_TRANSFORM;N.prototype={_str:null,_regexp_templ:/\$\{((([\w\-]+)(\.([\w\.]*)+)?)|@)\}/g,
_regexp_index:/\$\{\*([\d]+)\*\}/g,_shadow_view:null,toString:function(){return this._str},compileView:function(a,b){this._shadow_view||(this._shadow_view=qa(this,a));var c=pa(this._shadow_view,b);c.__shadow_view=this._shadow_view;c.clone=ma.bind(c);c._clone=na.bind(c);return c},__extend_component:function(a){this._shadow_view||(this._shadow_view=qa(this));var b=this._shadow_view.__node.cloneNode(!0);a.view=b;ka(a,this._shadow_view,b);a.__shadow_view=this._shadow_view;a.clone=ma.bind(a);a._clone=
na.bind(a);return b},apply:function(a){function b(b,d,k,f,e){b=a[d];if(e){k=k.split(".");e=1;d=k.length;for(b=a[k[0]];b&&e<d;)b=b[k[e++]]}return b}return!a?this._str:this._str.replace(this._regexp_templ,b)}};var ma=function(a,b){a||(a={});a.node=this.__shadow_view?this.__shadow_view.__node.cloneNode(!0):a.node?a.node:this.view.cloneNode(!0);return h.EventSource.prototype.clone.call(this,a,b)},na=function(a,b){q.View.prototype._clone.call(this,a,b);ka(a,this.__shadow_view,a.view);a.__shadow_view=this.__shadow_view;
a.clone=ma.bind(a);a._clone=na.bind(a)},ba=function(a,b,c){var d=1,c=c||[];if(2===b.nodeType)return b.ownerElement&&(c=ba(a,b.ownerElement,c)),c.push([2,b.nodeName.toLowerCase()]),c;if(a===b)return c;b.parentNode&&(c=ba(a,b.parentNode,c));for(a=b.previousSibling;a;)(1===a.nodeType||3===a.nodeType)&&a.nodeName==b.nodeName&&d++,a=a.previousSibling;c.push([1,b.nodeName.toLowerCase(),d]);return c},ea=function(a,b){if(!b||!b.length||!a)return a;var c=b.shift(),d,k;d=c[0];var f=c[1];if(2===d){d=a.attributes;
for(c=d.length;c--;)if(k=d.item(c),k.nodeName.toLowerCase()==f)return k}else if(1===d){d=a.firstChild;for(c=c[2],k=1;d;){if(d.nodeName.toLowerCase()===f){if(c===k)return ea(d,b);k++}d=d.nextSibling}}return null};N.parseHTML=function(a){var b=m.createElement("div");try{f.safeInnerHTML(b,a),(b=b.firstElementChild)&&b.parentElement.removeChild(b)}catch(c){return console.error("vs.ui.Template.parseHTML failed:"),c.stack&&console.log(c.stack),console.error(c),p}return b};j.ui.Template=N;var oa={handleEvent:function(a){if(this.__pointer_recognizers.length){if(this._enable)switch(a.type){case h.POINTER_START:this.__pointer_recognizers.forEach(function(b){b.pointerStart(a)});
break;case h.POINTER_MOVE:this.__pointer_recognizers.forEach(function(b){b.pointerMove(a)});break;case h.POINTER_END:this.__pointer_recognizers.forEach(function(b){b.pointerEnd(a)});break;case h.POINTER_CANCEL:this.__pointer_recognizers.forEach(function(b){b.pointerCancel(a)});break;case h.GESTURE_START:this.__pointer_recognizers.forEach(function(b){b.gestureStart(a)});break;case h.GESTURE_CHANGE:this.__pointer_recognizers.forEach(function(b){b.gestureChange(a)});break;case h.GESTURE_END:this.__pointer_recognizers.forEach(function(b){b.gestureEnd(a)})}}else this._propagateToParent&&
this._propagateToParent(a)},__pointer_recognizers:null,addPointerRecognizer:function(a){!a instanceof x||-1!==this.__pointer_recognizers.indexOf(a)||(this.__pointer_recognizers.push(a),a.init(this))},removePointerRecognizer:function(a){!a instanceof x||(this.__pointer_recognizers.remove(a),a.uninit())}};q.RecognizerManager=oa;var $=[];x.prototype={addPointerListener:function(a,b,c,d){if(!a||!b||!c)return!1;for(var k=0,f=$.length,e;k<f;k++)if(e=$[k],e.target===a&&e.type===b&&e.listener===c)return e.nb++,
!0;e={};e.target=a;e.type=b;e.listener=c;e.nb=1;$.push(e);j.addPointerListener(a,b,c,d);return!0},removePointerListener:function(a,b,c,d){if(!a||!b||!c)return!1;for(var k=0,f=$.length,e;k<f;k++)if(e=$[k],e.target===a&&e.type===b&&e.listener===c)return e.nb--,0===e.nb&&(j.removePointerListener(a,b,c,d),$.remove(k)),!0;return!1},init:function(a){this.obj=a},uninit:function(){},reset:function(){},pointerStart:function(){},pointerMove:function(){},pointerEnd:function(){},pointerCancel:function(){},gestureStart:function(){},
gestureChange:function(){},gestureEnd:function(){}};q.PointerRecognizer=x;P.prototype={__is_touched:!1,__unselect_time_out:0,__unselect_clb:null,__did_tap_time_out:0,__tap_mode:0,init:function(a){x.prototype.init.call(this,a);this.addPointerListener(this.obj.view,h.POINTER_START,this.obj);this.reset()},uninit:function(){this.removePointerListener(this.obj.view,h.POINTER_START,this.obj)},pointerStart:function(a){if(!this.__is_touched&&!(0===a.targetPointerList.length||1<a.nbPointers)){0===this.__tap_mode&&
(this.__tap_mode=1);this.__unselect_time_out&&(clearTimeout(this.__unselect_time_out),this.__unselect_time_out=0,this.__unselect_clb&&this.__unselect_clb());this.__tap_elem=a.targetPointerList[0].currentTarget;try{this.delegate&&this.delegate.didTouch&&this.delegate.didTouch(this.__tap_elem._comp_,this.__tap_elem,a)}catch(b){b.stack&&console.log(b.stack),console.log(b)}this.__did_tap_time_out&&(this.__tap_mode++,clearTimeout(this.__did_tap_time_out),this.__did_tap_time_out=0);this.addPointerListener(m,
h.POINTER_END,this.obj);this.addPointerListener(m,h.POINTER_MOVE,this.obj);this.__start_x=a.targetPointerList[0].pageX;this.__start_y=a.targetPointerList[0].pageY;this.__is_touched=!0;return!1}},pointerMove:function(a){if(this.__is_touched&&0!==a.pointerList.length){var b=a.pointerList[0].pageY-this.__start_y;if(Math.abs(a.pointerList[0].pageX-this.__start_x)+Math.abs(b)<g.MOVE_THRESHOLD)return!1;this.removePointerListener(m,h.POINTER_END,this.obj);this.removePointerListener(m,h.POINTER_MOVE,this.obj);
this.__is_touched=!1;try{this.delegate&&this.delegate.didUntouch&&this.delegate.didUntouch(this.__tap_elem._comp_,this.__tap_elem,a)}catch(c){c.stack&&console.log(c.stack),console.log(c)}}},pointerEnd:function(a){if(this.__is_touched){this.__is_touched=!1;var b=this,c=b.__tap_elem,d=c?c._comp_:null;b.__tap_elem=p;this.removePointerListener(m,h.POINTER_END,this.obj);this.removePointerListener(m,h.POINTER_MOVE,this.obj);this.delegate&&this.delegate.didUntouch&&(this.__unselect_clb=function(){try{b.delegate.didUntouch(d,
c,a)}catch(k){k.stack&&console.log(k.stack),console.log(k)}b.__unselect_time_out=0;delete b.__unselect_clb},this.__unselect_time_out=setTimeout(this.__unselect_clb,g.UNSELECT_DELAY));this.delegate&&this.delegate.didTap?this.__did_tap_time_out=setTimeout(function(){try{b.delegate.didTap(b.__tap_mode,d,c,a)}catch(k){k.stack&&console.log(k.stack),console.log(k)}b.__tap_mode=0;b.__did_tap_time_out=0},100):b.__tap_mode=0}},pointerCancel:function(a){return this.pointerEnd(a)}};f.extendClass(P,x);q.TapRecognizer=
P;R.prototype={__is_dragged:!1,init:function(a){x.prototype.init.call(this,a);this.addPointerListener(this.obj.view,h.POINTER_START,this.obj);this.reset()},uninit:function(){this.removePointerListener(this.obj.view,h.POINTER_START,this.obj)},pointerStart:function(a){if(!this.__is_dragged&&a.targetPointerList&&!(1<a.targetPointerList.length)){var b=a.targetPointerList[0];this.__start_x=b.pageX;this.__start_y=b.pageY;this.__pointer_id=b.identifier;this.__is_dragged=!0;this.addPointerListener(m,h.POINTER_END,
this.obj);this.addPointerListener(m,h.POINTER_MOVE,this.obj);try{this.delegate&&this.delegate.didDragStart&&this.delegate.didDragStart(a,a.targetPointerList[0].currentTarget._comp_)}catch(c){c.stack&&console.log(c.stack),console.log(c)}return!1}},pointerMove:function(a){if(this.__is_dragged){for(var b=0,c=a.targetPointerList.length,d;b<c;b++){d=a.targetPointerList[b];if(d.identifier===this.__pointer_id)break;d=null}if(d){b=d.pageX-this.__start_x;d=d.pageY-this.__start_y;try{this.delegate&&this.delegate.didDrag&&
this.delegate.didDrag({dx:b,dy:d},a,a.targetPointerList[0].currentTarget._comp_)}catch(k){k.stack&&console.log(k.stack),console.log(k)}}}},pointerEnd:function(a){if(this.__is_dragged){for(var b=0,c=a.changedPointerList.length,d;b<c;b++){d=a.changedPointerList[b];if(d.identifier===this.__pointer_id)break;d=null}if(d){this.__is_dragged=!1;this.__pointer_id=this.__start_y=this.__start_x=p;this.removePointerListener(m,h.POINTER_END,this.obj);this.removePointerListener(m,h.POINTER_MOVE,this.obj);try{this.delegate&&
this.delegate.didDragEnd&&this.delegate.didDragEnd(a,a.changedPointerList[0].target._comp_)}catch(k){k.stack&&console.log(k.stack),console.log(k)}}}},pointerCancel:function(a){return this.pointerEnd(a)}};f.extendClass(R,x);q.DragRecognizer=R;fa.prototype={init:function(a){x.prototype.init.call(this,a);this.addPointerListener(this.obj.view,h.GESTURE_START,this.obj);this.reset()},uninit:function(){this.removePointerListener(this.obj.view,h.GESTURE_START,this.obj)},gestureStart:function(){this.addPointerListener(m,
h.GESTURE_CHANGE,this.obj);this.addPointerListener(m,h.GESTURE_END,this.obj);try{this.delegate&&this.delegate.didPinchStart&&this.delegate.didPinchStart(event,event.targetPointerList[0].target._comp_)}catch(a){a.stack&&console.log(a.stack),console.log(a)}return!1},gestureChange:function(a){try{this.delegate&&this.delegate.didPinchChange&&this.delegate.didPinchChange(a.scale,a,a.targetPointerList[0].target._comp_)}catch(b){b.stack&&console.log(b.stack),console.log(b)}},gestureEnd:function(){this.removePointerListener(m,
h.GESTURE_CHANGE,this.obj);this.removePointerListener(m,h.GESTURE_END,this.obj);try{this.delegate&&this.delegate.didPinchEnd&&this.delegate.didPinchEnd(event,event.targetPointerList[0].target._comp_)}catch(a){a.stack&&console.log(a.stack),console.log(a)}},pointerCancel:function(a){return this.pointerEnd(a)}};f.extendClass(fa,x);q.PinchRecognizer=fa;ga.prototype={init:function(a){x.prototype.init.call(this,a);this.addPointerListener(this.obj.view,h.GESTURE_START,this.obj);this.reset()},uninit:function(){this.removePointerListener(this.obj.view,
h.GESTURE_START,this.obj)},gestureStart:function(){this.addPointerListener(m,h.GESTURE_CHANGE,this.obj);this.addPointerListener(m,h.GESTURE_END,this.obj);try{this.delegate&&this.delegate.didRotationStart&&this.delegate.didRotationStart(event)}catch(a){a.stack&&console.log(a.stack),console.log(a)}return!1},gestureChange:function(a){try{this.delegate&&this.delegate.didRotationChange&&this.delegate.didRotationChange(a.rotation,a)}catch(b){b.stack&&console.log(b.stack),console.log(b)}},gestureEnd:function(){this.removePointerListener(m,
h.GESTURE_CHANGE,this.obj);this.removePointerListener(m,h.GESTURE_END,this.obj);try{this.delegate&&this.delegate.didRotationEnd&&this.delegate.didRotationEnd(event)}catch(a){a.stack&&console.log(a.stack),console.log(a)}},pointerCancel:function(a){return this.pointerEnd(a)}};f.extendClass(ga,x);q.RotationRecognizer=ga;g.DEFAULT_LAYOUT=null;g.HORIZONTAL_LAYOUT="horizontal";g.LEGACY_HORIZONTAL_LAYOUT="horizontal_layout";g.VERTICAL_LAYOUT="vertical";g.LEGACY_VERTICAL_LAYOUT="vertical_layout";g.ABSOLUTE_LAYOUT=
"absolute";g.LEGACY_ABSOLUTE_LAYOUT="absolute_layout";g.FLOW_LAYOUT="flow";g.LEGACY_FLOW_LAYOUT="flow_layout";g.SELECT_DELAY=150;g.UNSELECT_DELAY=300;g.MOVE_THRESHOLD=20;g.MAGNET_NONE=0;g.MAGNET_LEFT=3;g.MAGNET_BOTTOM=2;g.MAGNET_TOP=1;g.MAGNET_RIGHT=4;g.MAGNET_CENTER=5;g.NON_G_OBJECT="_non_g_object";g.ANY_PLACE="children";g._positionStyle=p;g.__comp_templates={};g._propagate_pointer_event=function(a,b,c){var d="";c.type===h.POINTER_START&&(d="POINTER_START");c.type===h.POINTER_END&&(d="POINTER_END");
c.type===h.POINTER_MOVE&&(d="POINTER_MOVE");c.type=d;b.call(a,c)};var aa=null;g.prototype={_visible:!0,_magnet:g.MAGNET_NONE,_autosizing:null,_pointerevent_handlers:null,_enable:!0,_pos:null,__view_t_x:0,__view_t_y:0,_size:null,_opacity:1,_scaling:1,_rotation:0,_min_scale:0.5,_max_scale:3,_layout:null,_transform_origin:null,_transforms_stack:null,_show_animation:null,__show_clb:null,_hide_animation:null,__hide_clb:null,destructor:function(){var a,b,c,d;this.__parent&&this.__parent.remove(this);for(a in this.__children)if(b=
this.__children[a]){if(b instanceof Array)for(c=0;c<b.length;c++)d=b[c],f.free(d);else f.free(b);delete this.__children[a]}this.__children={};delete this.view;this.clearTransformStack();h.EventSource.prototype.destructor.call(this)},refresh:function(){var a,b,c,d;if((b=this.view)&&b.parentElement)this._size[0]=b.offsetWidth,this._size[1]=b.offsetHeight,this._pos[0]=b.offsetLeft,this._pos[1]=b.offsetTop;for(a in this.__children)if(b=this.__children[a])if(b instanceof Array)for(c=0;c<b.length;c++)(d=
b[c])&&d.refresh&&d.refresh();else b.refresh&&b.refresh()},clone:function(a,b){function c(a,b){for(var c=[],d=0,k=b.length,f;d<k;d++)f=b[d],c.push([f,ba(a,f)]);return c}function d(a,b,c){for(var d=0,k=b.length,f;d<k;d++)f=b[d],f.id||(f.id=h.createId()),c[f[0].id]=ea(a,f[1])}function k(a,b){function k(a){a.__gui_object__hack_view__?h.push(a.__gui_object__hack_view__):a.view&&h.push(a.view);e(a)}function e(a){var b,c,d,g;for(b in a.__children)if(c=a.__children[b])if(f.isArray(c)){g=c.length;for(d=0;d<
g;d++)k(c[d])}else k(c)}var g=a.view.cloneNode(!0),h=[],j;e(a);j=c(a.view,h);d(g,j,b);return g}b||(b={});b.__views__||(b.__views__={});a||(a={});if(!a.node){var e=b.__views__[this.view.id];e||(e=k(this,b.__views__));a.node=e}return h.EventSource.prototype.clone.call(this,a,b)},_clone_properties_value:function(a){for(var b in this)if("id"!=b){if("size"==b||"position"==b)if(value=this.size,!value||3!==value.length||0===value[0]&&0===value[1])continue;this.isProperty(b)&&h.Object.__propertyCloneValue(b,
this,a)}},_clone:function(a,b){function c(a,b){if(!a||!b)return null;if(b[a._id])return b[a._id];var c=b.__views__[a._id];return c?c._comp_:null}var d,k,f,e,g;h.EventSource.prototype._clone.call(this,a,b);this._show_animation&&(d=b[this._show_animation._id],a._show_animation=d?d:this._show_animation.clone(),a.__show_clb=this.__show_clb);this._hide_animation&&(d=b[this._hide_animation._id],a._hide_animation=d?d:this._hide_animation.clone(),a.__hide_clb=this.__hide_clb);a.__parent=p;for(k in this.__children)if(d=
this.__children[k],f=a._holes[k],d&&f)if(d instanceof Array)for(e=d.length;e--;)f=d[e],(g=c(f,b))?b[f._id]=g:(g=f.clone(null,b),a.add(g,k));else(g=c(d,b))?b[d._id]=g:(g=d.clone(null,b),a.add(g,k))},_getGUInode:function(a){var b=this.__getGUInode(a);if(b)return b;if(b=a.template?a.template:this.template)return a=new N(b),b=a.__extend_component(this),f.free(a),b;if(this.html_template&&(b=N.parseHTML(this.html_template)))return b;b=f.isFunction(this.constructor)?this.constructor.name:f.isString(this.constructor)?
this.constructor:g;console.warn("Impossible to instance view of component '"+b+", id ["+a.id+"]. A default one is created");return b=m.createElement("div")},__getGUInode:function(a){if(a.node)return a.node;var b=null,c,d,k;if(a.node_id&&(b=m.getElementById(a.node_id)))return b;if(c=a.node_ref)if((k=g._ref_template_reg.exec(c))&&3==k.length?(d=k[1],c=k[2]):d=a.root_ref,c&&d&&((d=(d=h.Object._obs[d])&&d.view?d.view:m.getElementById(this.id))&&(b=la(d,c)),b))return b;if(a.template_ref&&(b=this._getTemplateNode(a.template_ref))||
a.id&&(b=m.getElementById(a.id)))return b;return p},_getTemplateNode:function(a){var b=null;aa||(aa=m.querySelector(".application_templates"))&&aa.parentElement.removeChild(aa);aa&&(b=aa.querySelector("."+a));if(b)return m.importNode(b,!0)},initComponent:function(){h.EventSource.prototype.initComponent.call(this);this._pos=[-1,-1];this._size=[-1,-1];this._transform_origin=[0,0];this._autosizing=[4,4];this._holes={};this.__children={};this._pointerevent_handlers=[];this.__config__||(this.__config__=
{});this.__config__.id=this.id;(this.view=this._getGUInode(this.__config__))?(this.view.id=this._id,this.view._comp_=this,this.view.setAttribute("x-hag-comp",this.id),this._parse_view(this.view)):console.error("vs.ui.View constructor failed. No view!")},componentDidInitialize:function(){h.EventSource.prototype.componentDidInitialize.call(this);this._magnet&&this.view.style.setProperty("position","absolute",null);this._magnet===g.MAGNET_CENTER&&(this._updateSizeAndPos(),this._applyTransformation())},
viewDidAdd:function(){var a=this.view,b=this;a&&a.parentElement&&j.scheduleAction(function(){b._size[0]=a.offsetWidth;b._size[1]=a.offsetHeight;b._pos[0]=a.offsetLeft;b._pos[1]=a.offsetTop})},notify:function(){},_parse_view:function(a){if(a&&3!==a.nodeType){var b;if(null!==a.attributes&&(b=a.attributes.getNamedItem("x-hag-hole"))){this._holes[b.nodeValue]=a;return}for(a=a.firstElementChild;a;)this._parse_view(a),a=a.nextElementSibling}},createAndAddComponent:function(a,b,c){var d=o[a];if(d){b||(b=
{});b.id||(b.id=h.createId());var k=this.__getGUInode(b),f;k||(k=this._getTemplateNode(a));k||d.prototype&&d.prototype.template&&(k=N.parseHTML(d.prototype.template));k||d.prototype&&d.prototype.node_template&&(k=m.importNode(d.prototype.node_template,!0));if(!k){k=a+".xhtml";f=g.__comp_templates[k];if(!f)if(f=new XMLHttpRequest,f.open("GET",k,!1),f.send(null),4===f.readyState)if(200===f.status||0===f.status)f=f.responseText,g.__comp_templates[k]=f;else{console.error("Template file for component '"+
a+"' unfound.");return}else{console.error("Pb when load the component '"+a+"' template.");return}k=N.parseHTML(f)}b.node=k;k=null;try{k=new d(b)}catch(e){a="Impossible to instanciate comp: "+a+(" => "+e.message);console.error(a);e.stack&&console.error(e.stack);return}try{k.init(),k.configure(b)}catch(j){j.line&&j.sourceURL?(a="Error when initiate comp: "+a+(" => "+j.message),a+="\n"+j.sourceURL+":"+j.line):a=j,console.error(a),j.stack&&console.error(j.stack)}this.add(k,c);k.refresh();return k}console.error("Impossible to fund component '"+
a+"'.")},isChild:function(a){if(!a)return!1;var b,c;for(b in this.__children)if((c=this.__children[b])&&(c===a||c instanceof Array&&-1!==c.indexOf(a)))return!0;return!1},add:function(a,b,c){if(a&&(c?a.__gui_object__hack_view__=c:c=a.view,!this.isChild(a))){var d,k,b=c?b?b:g.ANY_PLACE:g.NON_G_OBJECT;(d=this.__children[b])&&f.isArray(d)?d.push(a):d?(k=[],k.push(d),k.push(a),this.__children[b]=k):this.__children[b]=a;b=this._holes[b];if(c&&b){if(c.parentElement){if(c.parentElement===b){a.__parent=this;
a.viewDidAdd&&a.viewDidAdd();return}c.parentElement.removeChild(c)}b.appendChild(c);a.__parent=this;a.viewDidAdd&&a.viewDidAdd()}}},remove:function(a){if(a){var b,c,d;if(d=a.__gui_object__hack_view__?a.__gui_object__hack_view__:a.view)for(b in this.__children)if((c=this.__children[b])&&(c===a||c instanceof Array&&-1!==c.indexOf(a))){c instanceof Array?c.remove(a):delete this.__children[b];d.parentElement&&d.parentElement.removeChild(d);a.__parent=null;break}}},removeAllChildren:function(a,b){function c(b){var c,
d;if(c=k.__children[b]){if(c instanceof Array)for(;c.length;)d=c[0],k.remove(d),a?f.free(d):e.push(d);else k.remove(c),a?f.free(c):e.push(c);delete k.__children[b]}}var d,k=this,e=[];if(b)c(b);else{for(d in k.__children)c(d);this.__children={}}return a?p:e},findNodeRef:function(a){return!this.view?void 0:la(this.view,a)},bind:function(a,b,c,d){if("POINTER_START"===a||"POINTER_END"===a||"POINTER_MOVE"===a||a===h.POINTER_START||a===h.POINTER_END||a===h.POINTER_MOVE){if(!this.view)return;var k,e=this,
t;c||(c="notify");if(f.isFunction(c))k=c;else if(f.isString(c)&&f.isFunction(b[c]))k=b[c];else{console.error("Invalid bind arguments.");return}if(!k){console.warn("Invalid bind arguments. Unknown func: "+c);return}e=this;t=function(a){if(!h.EVENT_SUPPORT_TOUCH||!(a.changedTouches&&1<a.changedTouches.length)){a.src=e;if(h.EVENT_SUPPORT_TOUCH&&a.changedTouches){a.pageX=a.changedTouches[0].pageX;a.pageY=a.changedTouches[0].pageY;var c=f.getElementAbsolutePosition(e.view);a.offsetX=a.changedTouches[0].pageX-
c.x;a.offsetY=a.changedTouches[0].pageY-c.y}g._propagate_pointer_event(b,k,a)}};"POINTER_START"===a&&(a=h.POINTER_START);"POINTER_MOVE"===a&&(a=h.POINTER_MOVE);"POINTER_END"===a&&(a=h.POINTER_END);this._pointerevent_handlers[b.id+a]=t;j.addPointerListener(this.view,a,t)}return h.EventSource.prototype.bind.call(this,a,b,c,d)},unbind:function(a,b){if(a&&b){if(a===h.POINTER_START||a===h.POINTER_END||a===h.POINTER_MOVE){var c=this._pointerevent_handlers[b.id+a];if(!c||!this.view)return;j.removePointerListener(this.view,
h.POINTER_END,c)}h.EventSource.prototype.unbind.call(this,a,b)}},_setMagnet:function(a){(this._magnet=a)?this.view.style.setProperty("position","absolute",null):this.view.style.removeProperty("position");this._updateSizeAndPos();this._applyTransformation()},_updateSizeAndPos:function(){var a=this._pos[0],b=this._pos[1],c=this._size[0],d=this._size[1],f=0,e=0,j="auto",h="auto",m="auto",o="auto",n=this._autosizing[0],p=this._autosizing[1],q=this.view,r;if(q){if(r=q.parentElement)f=r.offsetWidth,e=r.offsetHeight;
this._magnet===g.MAGNET_LEFT&&(a=0);this._magnet===g.MAGNET_TOP&&(b=0);if(4===n||5===n||6===n||7===n||2===n&&!f)j=a+"px";else if((2===n||0===n)&&f)j=100*(a/f)+"%";if(0<=c&&(1===n||3===n||5===n||7===n))m=f-(a+c),0>m&&(m=0),m+="px";if(4===p||5===p||6===p||7===p||2===p&&!e)h=b+"px";else if((2===p||0===p)&&e)h=100*(b/e)+"%";if(0<=d&&(1===p||3===p||5===p||7===p))o=e-(b+d),0>o&&(o=0),o+="px";this._magnet===g.MAGNET_BOTTOM&&(h="auto",o="0px");this._magnet===g.MAGNET_RIGHT&&(j="auto",m="0px");this._magnet===
g.MAGNET_CENTER&&(h="50%",o="auto",j="50%",m="auto");a=q.style;a.left=j;a.right=m;a.top=h;a.bottom=o;a.width=0>c?"":5===n||7===n?"auto":4===n||1===n?c+"px":2===n||3===n||6===n||0===n?f?100*(c/f)+"%":c+"px":"100%";a.height=0>d?"":5===p||7===p?"auto":4===p||1===p?d+"px":2===p||3===p||6===p||0===p?e?100*(d/e)+"%":d+"px":"100%"}},getStyle:function(a){if(!this.view)return p;var b=this.view.style,c;b&&(c=b[a]);return"opacity"===a?c?parseFloat(c):1:"auto"===c?null:c},getComputedStyle:function(a){var b=this._getComputedStyle(this.view);
return value=b?b[a]:null},_getComputedStyle:function(a){a||(a=this.view);if(!a)return p;var b=a.ownerDocument;if(!b||!b.defaultView)b=m;return!b||!b.defaultView?p:b.defaultView.getComputedStyle(a,null)},setStyle:function(a,b){a&&this.view&&this.view.style&&this.view.style.removeProperty&&this.view.style.setProperty&&("undefined"===typeof b?this.view.style.removeProperty(a):(f.isNumber(b)&&(b=""+b),this.view.style.setProperty(a,b,null)))},setStyles:function(a){a&&this.view&&this.view.style&&f.setElementStyle(this.view,
a)},addCssRules:function(a,b){f.addCssRules("#"+this._id+" "+a,b)},addCssRule:function(a,b){f.addCssRule("#"+this._id+" "+a,b)},redraw:function(a){if(this.view){var b=this.view,c=b.style.display,d=this;b.style.display="none";j.scheduleAction(function(){c?b.style.display=c:b.style.removeProperty("display");j.scheduleAction(function(){d.refresh();a&&f.isFunction(a)&&a.call(d)})})}},show:function(a){this.view&&!this._visible&&(f.isFunction(a)||(a=p),this.__view_display?this.view.style.display=this.__view_display:
this.view.style.removeProperty("display"),this.__view_display=p,this.__is_hidding=!1,this.__is_showing=!0,this._show_animation?this._show_animation.process(this,function(){this._show_object(a)},this):this._show_object(a))},_show_object:function(a){if(this.view&&(this.__visibility_anim=p,this.__is_showing)){this.__is_showing=!1;this._visible=!0;var b=this;this.propertyChange();if(this.__show_clb||a)this._show_animation?(this.__show_clb&&this.__show_clb.call(this),a&&a.call(this)):(this.__show_clb&&
j.scheduleAction(function(){b.__show_clb.call(b)}),a&&j.scheduleAction(function(){a.call(b)}))}},setShowAnimation:function(a,b,c){if("undefined"===typeof a||null===a)this._show_animation=null;else{if(a instanceof j.fx.Animation)this._show_animation=a.clone();else if(f.isArray(a))this._show_animation=new j.fx.Animation,this._show_animation.setAnimations(a);else{console.warn("vs.ui.View.setShowAnimation invalid parameters!");return}b&&(b.duration&&(this._show_animation.duration=b.duration),b.timing&&
(this._show_animation.timing=b.timing),b.origin&&(this._show_animation.origin=b.origin),b.iterationCount&&(this._show_animation.iterationCount=b.iterationCount),b.delay&&(this._show_animation.delay=b.delay))}f.isFunction(c);this.__show_clb=c},hide:function(a){if(this.view&&(this._visible||this.__is_showing))f.isFunction(a)||(a=p),this.__is_showing=this._visible=!1,this.__is_hidding=!0,this._hide_animation?this._hide_animation.process(this,function(){this._hide_object(a)},this):this._hide_object(a)},
_hide_object:function(a){if(this.view&&!this._visible&&(this.__visibility_anim=p,this.__is_hidding)){this.__is_hidding=!1;this.view.style.display?(this.__view_display=this.view.style.display,"none"===this.__view_display&&(this.__view_display=p)):this.__view_display=p;this.view.style.display="none";if(this.__hide_clb||a)this._show_animation?(this.__hide_clb&&this.__hide_clb.call(this),a&&a.call(this)):(this.__hide_clb&&j.scheduleAction(function(){self.__hide_clb.call(self)}),a&&j.scheduleAction(function(){a.call(self)}));
this.propertyChange()}},setHideAnimation:function(a,b,c){if("undefined"===typeof a||null===a)this._hide_animation=null;else{if(a instanceof j.fx.Animation)this._hide_animation=a.clone();else if(f.isArray(a))this._hide_animation=new j.fx.Animation,this._hide_animation.setAnimations(a);else{console.warn("vs.ui.View.setHideAnimation invalid parameters!");return}b&&(b.duration&&(this._hide_animation.duration=b.duration),b.timing&&(this._hide_animation.timing=b.timing),b.origin&&(this._hide_animation.origin=
b.origin),b.iterationCount&&(this._hide_animation.iterationCount=b.iterationCount),b.delay&&(this._hide_animation.delay=b.delay))}f.isFunction(c);this.__hide_clb=c},setVisible:function(a){this.view&&f.setElementVisibility(this.view,a)},hasClassName:function(a){return!this.view?!1:f.hasClassName(this.view,a)},addClassName:function(){if(this.view){var a=Array.prototype.slice.call(arguments);a.unshift(this.view);f.addClassName.apply(this.view,a)}},removeClassName:function(a){if(this.view){var b=Array.prototype.slice.call(arguments);
b.unshift(this.view);f.removeClassName.apply(this.view,b)}},toggleClassName:function(a){this.view&&f.isString(a)&&f.toggleClassName(this.view,a)},_propagateToParent:function(a){this._bubbling&&this.__parent&&this.__parent.handleEvent&&this.__parent.handleEvent(a)},notifyToParent:function(a){this.__parent&&(this.__parent.handleEvent?this.__parent.handleEvent(a):this.__parent.notify&&this.__parent.notify(a))},_didEnable:function(){},animate:function(a,b,c){var d;if(a instanceof j.fx.Animation)d=a;else if(f.isArray(a))d=
new j.fx.Animation,d.setAnimations(a);else{console.warn("vs.ui.View.animate invalid parameters!");return}b&&(b.duration&&(d.duration=b.duration),b.timing&&(d.timing=b.timing),b.origin&&(d.origin=b.origin),b.iterationCount&&(d.iterationCount=b.iterationCount),b.delay&&(d.delay=b.delay));return d.process(this,c,this)},translate:function(a,b){f.isNumber(a)&&f.isNumber(b)&&!(this.__view_t_x===a&&this.__view_t_y===b)&&(this.__view_t_x=a,this.__view_t_y=b,this._applyTransformation())},rotate:function(a){f.isNumber(a)&&
this._rotation!==a&&(this._rotation=a,this._applyTransformation())},scale:function(a){f.isNumber(a)&&(a>this._max_scale&&(a=this._max_scale),a<this._min_scale&&(a=this._min_scale),this._scaling!==a&&(this._scaling=a,this._applyTransformation()))},setNewTransformOrigin:function(a){a&&f.isNumber(a.x)&&f.isNumber(a.y)&&(this.flushTransformStack(),this._transform_origin=[a.x,a.y])},flushTransformStack:function(){var a=new j.CSSMatrix,a=a.translate(this._transform_origin[0],this._transform_origin[1],0),
a=a.translate(this.__view_t_x,this.__view_t_y,0),a=a.rotate(0,0,this._rotation),a=a.scale(this._scaling,this._scaling,1),a=a.translate(-this._transform_origin[0],-this._transform_origin[1],0);this._transforms_stack||(this._transforms_stack=a);this._transforms_stack=a.multiply(this._transforms_stack);delete a;this.__view_t_y=this.__view_t_x=0;this._scaling=1;this._rotation=0},pushNewTransform:function(a){a&&(this._transforms_stack=this._transforms_stack?a.multiply(this._transforms_stack):a)},clearTransformStack:function(){this._transforms_stack&&
delete this._transforms_stack;this._transforms_stack=p},getCTM:function(){var a,b=new j.CSSMatrix;a=b.translate(this._transform_origin[0]+this.__view_t_x,this._transform_origin[1]+this.__view_t_y,0);a=a.multiply(b.rotate(0,0,this._rotation));a=a.scale(this._scaling,this._scaling,1);a=a.translate(-this._transform_origin[0],-this._transform_origin[1],0);return this._transforms_stack?a.multiply(this._transforms_stack):a},getParentCTM:function(){function a(b){return!b?new j.CSSMatrix:a(b.__parent).multiply(b.getCTM())}
return a(this.__parent)},_applyTransformation:function(){var a=this.getCTM(),b=a.getMatrix3dStr();this._magnet===g.MAGNET_CENTER&&(b+=" translate(-50%,-50%)");C(this.view,b);delete a}};f.extend(g.prototype,oa);f.extendClass(g,h.EventSource);f.defineClassProperties(g,{size:{set:function(a){f.isArray(a)&&2===a.length&&f.isNumber(a[0])&&f.isNumber(a[1])&&(this._size[0]=a[0],this._size[1]=a[1],this.view&&this._updateSizeAndPos())},get:function(){return this._size.slice()}},position:{set:function(a){a&&
f.isArray(a)&&2==a.length&&f.isNumber(a[0])&&f.isNumber(a[1])&&(this._pos[0]=a[0],this._pos[1]=a[1],this.view&&this._updateSizeAndPos())},get:function(){return this._pos.slice()}},autosizing:{set:function(a){a&&f.isArray(a)&&2==a.length&&f.isNumber(a[0])&&f.isNumber(a[1])&&!(this._autosizing[0]===a[0]&&this._autosizing[1]===a[1])&&(this._autosizing[0]=a[0],this._autosizing[1]=a[1],this.view&&this._updateSizeAndPos())}},magnet:{set:function(a){this._magnet===a||!f.isNumber(a)||0>a||5<a||this._setMagnet(a)}},
visible:{set:function(a){a?this.show():this.hide()},get:function(){return this._visible}},bubbling:{set:function(a){this._bubbling=a?!0:!1}},enable:{set:function(a){a&&!this._enable?(this._enable=!0,this.removeClassName("disabled"),this._didEnable()):!a&&this._enable&&(this._enable=!1,this.addClassName("disabled"),this._didEnable())},get:function(){return this._enable}},opacity:{set:function(a){if(f.isNumber(a)&&!(0>a||1<a))this.view&&(this.view.style.opacity=a),this._opacity=a}},translation:{set:function(a){f.isArray(a)&&
2===a.length&&this.translate(a[0],a[1])},get:function(){return[this.__view_t_x,this.__view_t_y]}},rotation:{set:function(a){this.rotate(a)},get:function(){return this._rotation}},scaling:{set:function(a){this.scale(a)},get:function(){return this._scaling}},minScale:{set:function(a){f.isNumber(a)&&(this._min_scale=a,this._scaling<this._min_scale&&this.scale(this._min_scale))},get:function(){return this._min_scale}},maxScale:{set:function(a){f.isNumber(a)&&(this._max_scale=a,this._scaling>this._max_scale&&
this.scale(this._max_scale))},get:function(){return this._max_scale}},transformOrigin:{set:function(a){f.isArray(a)&&2===a.length&&f.isNumber(a[0])&&f.isNumber(a[1])&&(this._transform_origin[0]=a[0],this._transform_origin[1]=a[1])},get:function(){return this._transform_origin.slice()}},showAnimmation:{set:function(a){this.setShowAnimation(a)}},hideAnimation:{set:function(a){this.setHideAnimation(a)}},layout:{set:function(a){a!==g.HORIZONTAL_LAYOUT&&a!==g.DEFAULT_LAYOUT&&a!==g.ABSOLUTE_LAYOUT&&a!==
g.VERTICAL_LAYOUT&&a!==g.FLOW_LAYOUT&&a!==g.LEGACY_HORIZONTAL_LAYOUT&&a!==g.LEGACY_ABSOLUTE_LAYOUT&&a!==g.LEGACY_VERTICAL_LAYOUT&&a!==g.LEGACY_FLOW_LAYOUT&&a?console.error("Unsupported layout '"+a+"'!"):(this._layout&&this.removeClassName(this._layout),(this._layout=!a||-1!==a.indexOf("_layout")?a:a+"_layout")&&this.addClassName(this._layout))}},innerHTML:{set:function(a){this.view&&f.safeInnerHTML(this.view,a)}}});g._ref_template_reg=/(\w+)#(\w+)/;q.View=g;g.getDeviceCSSCode=function(){var a=m.createElement("div"),
b;a.className="device_test";m.body.appendChild(a);b=m.defaultView.getComputedStyle(a,null).getPropertyValue("margin-top");m.body.removeChild(a);return parseInt(b||0,10)};var n=function(a){this._layout=p;this.parent=g;this.parent(a);this.constructor=n};n.CSS_DEFAULT=0;n.CSS_IOS=5;n.CSS_ANDROID=9;n.CSS_MEEGO=10;n.CSS_WP7=6;n.CSS_SYMBIAN=8;n.CSS_BLACKBERRY=7;n.CSS_PURE=100;n.CSS_FLAT=101;n.CSS_HOLO=102;n.CSS_IOS7=103;var M={},za="onorientationchange"in o?"orientationchange":"resize";j.Application_applications=
M;n.prototype={_prevent_scroll:!0,initComponent:function(){M[this.id]=this;g.prototype.initComponent.call(this);this.preventScroll=!0;if(this.view instanceof HTMLHtmlElement){var a=this.view;a._comp_=p;this.view=a.querySelector("body");if(!this.view){console.error("Invalid Application view");return}this.view._comp_=this;a.removeAttribute("id");a.removeAttribute("x-hag-ref");a.removeAttribute("x-hag-comp")}this.view.setAttribute("id",this.id);this.view.setAttribute("x-hag-ref",this.id);this.view.setAttribute("x-hag-comp",
this.id);var b=this;o.addEventListener(za,function(){var a=o.orientation;f.isNumber(a)||(a=o.outerWidth>=o.outerHeight?90:0);(a=o.deviceConfiguration.setOrientation(a))&&b.propagate("deviceChanged",a,null,!0)})},exit:function(){n.exit()},applicationStarted:function(){},_updateSizeAndPos:function(){this.view.style.width=this._size[0]+"px";this.view.style.height=this._size[1]+"px";this.view.style.right="auto";this.view.style.bottom="auto";this.view.style.left=this._pos[0]+"px";this.view.style.top=this._pos[1]+
"px";this.view.style.right="auto";this.view.style.bottom="auto"},setActiveStyleSheet:function(a){n.setActiveStyleSheet(a);this.propagate("deviceChanged",a,null,!0)},orientationWillChange:function(){},buildDataflow:function(){j._default_df_.build()},loadScript:function(a){var b=this;f.importFile(a,m,function(a){a&&b.propagate("scriptloaded",a)},"js")},loadCSS:function(a){var b=this;f.importFile(a,m,function(a){a&&b.propagate("cssloaded",a)},"css")}};f.extendClass(n,g);f.defineClassProperties(n,{size:{set:function(a){a&&
f.isArray(a)&&2===a.length&&f.isNumber(a[0])&&f.isNumber(a[1])&&(this._size[0]=a[0],this._size[1]=a[1],this.view&&(this._updateSizeAndPos(),o.resizeTo(this._size[0],this._size[1])))},get:function(){this.view&&this.view.parentNode&&(this._size[0]=this.view.offsetWidth,this._size[1]=this.view.offsetHeight);return this._size.slice()}},preventScroll:{set:function(a){this._prevent_scroll=a?!0:!1;m.preventScroll=a},get:function(){this._prevent_scroll=m.preventScroll;return this.__prevent_scroll}}});n.exit=
function(){o.close&&o.close()};n.configureDevice=function(){function a(){function a(b,c){var d=m.createElement("link");d.setAttribute("rel","stylesheet");d.setAttribute("type","text/css");d.setAttribute("href",b);d.setAttribute("media","screen");c?m.head.insertBefore(d,c):m.head.appendChild(d)}var b=o.target_css?o.target_css[o.deviceConfiguration.targetId]:"";b||(b="default");for(var c=m.head.querySelectorAll("link"),f,e=0;e<c.length;e++)if(f=c.item(e),-1!==f.getAttribute("href").indexOf("vs_ui.css")){f=
f.nextElementSibling;break}else f=null;if("default"==b)switch(o.deviceConfiguration.os){case u.OS_IOS:a("lib/css/vs_ui_ios.css",f);break;case u.OS_ANDROID:a("lib/css/vs_ui_android.css",f)}else a("lib/css/vs_ui_"+b+".css",f)}var b=o.deviceConfiguration.generateDeviceId(!0),c;o.deviceConfiguration.deviceId=b;o.deviceConfiguration.virtualScreenSize=null;if(o.target_device_ids)for(c in o.target_device_ids)if(-1!==o.target_device_ids[c].indexOf(b)){o.deviceConfiguration.targetId=c;o.deviceConfiguration.setOrientation(o.orientation||
0,!0);a();return}deviceConfiguration.screenSize===u.SS_4_INCH&&(c="phone3_4");deviceConfiguration.screenSize===u.SS_7_INCH&&(c="tablet7");deviceConfiguration.screenSize===u.SS_10_INCH&&(c="phone10");if(0===deviceConfiguration.orientation||90===deviceConfiguration.orientation)c+="_p";if(180===deviceConfiguration.orientation||-180===deviceConfiguration.orientation)c+="_l";if(o.target_device_ids&&o.target_device_ids[c])o.deviceConfiguration.targetId=c,o.deviceConfiguration.setOrientation(o.orientation||
0,!0),a();else{b=ra(u.SS_7_INCH);deviceConfiguration.screenSize===u.SS_10_INCH&&(c="tablet7");if(0===deviceConfiguration.orientation||90===deviceConfiguration.orientation)c+="_p";if(180===deviceConfiguration.orientation||-180===deviceConfiguration.orientation)c+="_l";if(o.target_device_ids&&o.target_device_ids[c])o.deviceConfiguration.targetId=c,o.deviceConfiguration.virtualScreenSize=b,o.deviceConfiguration.setOrientation(o.orientation||0,!0),a();else{c="phone3_4";b=ra(u.SS_4_INCH);if(0===deviceConfiguration.orientation||
90===deviceConfiguration.orientation)c+="_p";if(180===deviceConfiguration.orientation||-180===deviceConfiguration.orientation)c+="_l";o.target_device_ids&&o.target_device_ids[c]&&(o.deviceConfiguration.targetId=c,o.deviceConfiguration.virtualScreenSize=b,o.deviceConfiguration.setOrientation(o.orientation||0,!0),a())}}};n.getOrientation=function(){return o.deviceConfiguration.getOrientation()};n.start=function(){var a,b;for(a in M)b=M[a],b.propertyChange(),b.applicationStarted(),j.scheduleAction(function(){b.refresh()});
j.scheduleAction(function(){j._default_df_.build()})};n.stop=function(){var a,b;for(a in M)b=M[a],f.free(b);M={};for(a in j.core.Object._obs)b=j.core.Object._obs[a],j.util.free(b)};n.sendStart=function(){console.log("Application.sendStart is deprecated. Please use Application.start");n.start()};n.propagate=function(a,b){var c,d;for(c in M)(d=M[c])&&d.propagate(a,b)};n.preloadTemplates=function(a){for(var b=0;b<a.length;b++)f.preloadTemplate(a[b])};var da=function(a){for(var b=0;b<a.length;b++)this.preload(a[b])};
o.ImagePreloader=da;da.__image_path={};da.prototype.preload=function(a){da.__image_path[a]||((new Image).src=a,da.__image_path[a]=!0)};n.prototype.mainViewVisibility=function(){};n.prototype.setImageBackground=function(){};n.prototype.loadingStart=function(){};n.prototype.loadingStop=function(){};q.Application=n;var s=j.core.createClass({parent:j.ui.View,properties:{delegate:{set:function(a){this._delegate=a}},mode:{set:function(a){a!==s.TABLET_MODE&&a!==s.MOBILE_MODE||(this.removeClassName(this._mode),
this._mode=a,this.addClassName(this._mode),this._orientation===s.VERTICAL?this._set_orientation(0):this._set_orientation(90))},get:function(){return this._mode}},hideMainPanelButton:{set:function(a){this._hide_main_panel_button=a;this._mode==s.TABLET_MODE&&this._hide_main_panel_button.hide();this._hide_main_panel_button.bind("select",this)}},showPopOverButton:{set:function(a){this._show_pop_over_button=a;this._mode==s.MOBILE_MODE&&this._show_pop_over_button.hide();this._show_pop_over_button.bind("select",
this)}},secondPanelPosition:{set:function(a){a!==s.LEFT&&a!==s.RIGHT&&a!==s.TOP&&a!==s.BOTTOM||(this.removeClassName(this._second_panel_position),this._second_panel_position=a,this.addClassName(this._second_panel_position))}},orientation:{set:function(a){a!==s.VERTICAL&&a!==s.HORIZONTAL||(this.removeClassName(this._orientation),this._orientation=a,this.addClassName(this._orientation),a===s.VERTICAL?this._set_orientation(0):this._set_orientation(90))},get:function(){return this._orientation}}},_delegate:null,
_mode:"",_second_panel_position:"",_orientation:"",_split_views:null,_fisrt_view_width:320,_pop_over_border_width:8,_pop_over:null,constructor:function(a){this._super(a);this._left_views=[];this._pop_over=new v},initComponent:function(){this._super();this._pop_over.init();this._pop_over.hide();m.body.appendChild(this._pop_over.view);this.mode=this._mode?this._mode:s.TABLET_MODE;if(this._orientation)this.orientation=this._orientation;else{var a=o.deviceConfiguration.getOrientation();this.orientation=
0===a||180===a?s.VERTICAL:s.HORIZONTAL}this.secondPanelPosition=this._second_panel_position?this._second_panel_position:s.LEFT},add:function(a,b){"second_panel"===b?(this._left_views.push(a),this._mode===s.MOBILE||this._orientation===s.HORIZONTAL?this._super(a,"second_panel"):this._pop_over.add(a)):this._super(a,"main_panel")},removeAllChildren:function(a){var b,c,d,k=[];for(b in this.__children)if(c=this.__children[b]){if(c instanceof Array)for(;c.length;)d=c[0],this.remove(d),a?f.free(d):k.push(d);
else this.remove(c),a?f.free(c):k.push(c);delete this.__children[b]}this.__children={};return a?p:k},refresh:function(){this._super();this._pop_over.visible&&this._pop_over.refresh()},orientationWillChange:function(a){this.orientation=90===a||-90===a?s.HORIZONTAL:s.VERTICAL},_set_orientation:function(a){var b;if(b=this._left_views[0])this._mode===s.MOBILE_MODE||90===a||-90===a?(this._pop_over.hide(),this._pop_over.isChild(b)&&this._pop_over.remove(b),this.isChild(b)||g.prototype.add.call(this,b,"second_panel"),
b.show(b.refresh),this._delegate&&this._delegate.willShowView&&this._delegate.willShowView(b,this._pop_over),this._show_pop_over_button&&this._show_pop_over_button.hide()):(this.isChild(b)&&g.prototype.remove.call(this,b),this._pop_over.isChild(b)||this._pop_over.add(b),b.show(),this._pop_over.size=[this._fisrt_view_width+2*this._pop_over_border_width,500],this._show_pop_over_button&&this._show_pop_over_button.show(),this._delegate&&this._delegate.willShowView&&this._delegate.willHideView(b,this._pop_over))},
orientationDidChange:function(){this.refresh()},showPopOver:function(a,b){this._mode!==s.TABLET_MODE||this._orientation!==s.VERTICAL||(this._pop_over.show(a,b),this._pop_over.refresh())},hidePopOver:function(){this._pop_over.hide()},showMainView:function(a){var b=this;this._mode===s.MOBILE_MODE&&(this._hide_main_panel_button&&this._hide_main_panel_button.show(),a?b.addClassName("main_view_visible"):setTimeout(function(){b.addClassName("main_view_visible")},g.UNSELECT_DELAY))},hideMainView:function(){this._mode===
s.MOBILE_MODE&&(this._hide_main_panel_button&&this._hide_main_panel_button.hide(),this.removeClassName("main_view_visible"))},notify:function(a){"select"==a.type&&a.src==this._hide_main_panel_button&&this.hideMainView();"select"==a.type&&a.src==this._show_pop_over_button&&this.showPopOver([20,20])}});s.TABLET_MODE="tablet";s.MOBILE_MODE="mobile";s.VERTICAL="vertical";s.HORIZONTAL="horizontal";s.RIGHT="right";s.LEFT="left";s.BOTTOM="bottom";s.TOP="top";q.SplitView=s;(function(a){function b(a,b){this.view=
a;this._mode=b;this.__pointer_recognizers=[]}b.prototype={_enable:!0,_mode:!1,__view_t_x:0,__view_t_y:0,_transforms_stack:null,initComponent:function(){this._transforms_stack=new j.CSSMatrix;this.__recognizer=new R(this);this.addPointerRecognizer(this.__recognizer)},destructor:function(){this.removePointerRecognizer(this.__recognizer);j.util.free(this.__recognizer);h.Object.prototype.destructor.call(this)},didDragStart:function(){this.__chrono&&this.__chrono.stop()},didDrag:function(a){var b=a.dy,
a=a.dx;this._mode===r.HORIZONTAL_SCROLL&&(b=0);this._mode===r.VERTICAL_SCROLL&&(a=0);this.__dist_y=b-this.__view_t_y;this.__dist_x=a-this.__view_t_x;this.__view_t_x=a;this.__view_t_y=b;b=this._transforms_stack.translate(a,b,0);0<b.m41&&(b.m41/=2);0<b.m42&&(b.m42/=2);var a=this.view.offsetWidth-this.view.parentElement.offsetWidth,f=this.view.offsetHeight-this.view.parentElement.offsetHeight;b.m41<-f&&(b.m41=(b.m41-a)/2);b.m42<-f&&(b.m42=(b.m42-f)/2);C(this.view,b.getMatrix3dStr())},animate:function(a,
b,f){var e=this;this.__chrono?(this.__chrono.stop(),this.__chrono.__trajectory.values=a,this.__chrono.duration=b||150,j.util.free(this.__chrono.__pace),this.__chrono.__pace=f||j.ext.fx.Pace.getLinearPace()):(this.__chrono=(new j.ext.fx.Chronometer({duration:b||150})).init(),this.__chrono.__trajectory=(new j.ext.fx.Vector1D({values:a})).init(),this.__chrono.__pace=f||j.ext.fx.Pace.getLinearPace(),this.__chrono.__clb=function(a){var b=this.__pace,c=this.__trajectory;b._tick_in=a;b._tick_out=b._timing?
b._timing(a):a;c._tick=b._tick_out;c.compute()&&(b=e._transforms_stack.translate(0,c._out,0),C(e.view,b.getMatrix3dStr()),1===a&&(e._transforms_stack=b))},this.__chrono.stop=function(){if(this._state!==j.core.Task.STOPPED){j.ext.fx.Chronometer.prototype.stop.call(this);var a=e._transforms_stack.translate(0,this.__trajectory._out,0);e._transforms_stack=a}});this.__chrono.start()},didDragEnd:function(){var a=this._transforms_stack.translate(0,this.__view_t_y,0);if(0<a.m42)a.m42/=2,this.animate([a.m42,
0]),this.__view_t_y=0,this._transforms_stack.m42=0;else{var b=this.view.offsetHeight-this.view.parentElement.offsetHeight;if(a.m42<-b)a.m42=(a.m42-b)/2,this.animate([a.m42,-b]),this.__view_t_y=0,this._transforms_stack.m42=0;else if(3<Math.abs(this.__dist_y)){var f=this.__dist_y*this.__dist_y,e=a.m42+this.__dist_y*Math.abs(this.__dist_y);0<e&&(e=0);e<-b&&(e=-b);this.animate([a.m42,e],f,j.ext.fx.Pace.getEaseOutPace());this.__view_t_y=0;this.__dist_y=this._transforms_stack.m42=0}else this.__dist_y=0,
C(this.view,a.getMatrix3dStr()),this._transforms_stack=a}},refresh:function(){console.log("myScroll.refresh ")}};f.extend(b.prototype,oa);f.extendClass(b,h.Object);a.createScroll=function(a,d){return(new b(a,d)).init()}})(j.ui);(function(a,b,c){function d(a){if(""===e)return a;a=a.charAt(0).toUpperCase()+a.substr(1);return e+a}var f=Math,e=c.CSS_VENDOR,g=c.CSS_VENDOR?"-"+c.CSS_VENDOR+"-":"",j=d("transform"),h=d("transitionProperty"),m=c.TRANSITION_DURATION,n=c.TRANSFORM_ORIGIN,o=c.TRANSITION_TIMING_FUNC,
q=c.TRANSITION_DELAY,r=/android/gi.test(navigator.appVersion),s=/iphone|ipad/gi.test(navigator.appVersion);/hp-tablet/gi.test(navigator.appVersion);var u=c.SUPPORT_3D_TRANSFORM,v="ontouchstart"in a,w=c.SUPPORT_CSS_TRANSFORM,y="onorientationchange"in a?"orientationchange":"resize",z=c.POINTER_START,x=c.POINTER_MOVE,C=c.POINTER_END,D=c.POINTER_CANCEL,A=c.TRANSITION_END,E=c.requestAnimationFrame,F=c.cancelRequestAnimationFrame,B=u?" translateZ(0)":"",G=function(c,d,f){var e=this,k;e.wrapper="object"==
typeof c?c:b.getElementById(c);e.wrapper.style.overflow="hidden";e.scroller=d;e.options={hScroll:!0,vScroll:!0,x:0,y:0,bounce:!0,bounceLock:!1,momentum:!0,lockDirection:!0,useTransform:!0,useTransition:!1,topOffset:0,checkDOMChanges:!1,handleClick:!0,hScrollbar:!0,vScrollbar:!0,fixedScrollbar:r,hideScrollbar:s,fadeScrollbar:s&&u,scrollbarClass:"",zoom:!1,zoomMin:1,zoomMax:4,doubleTapZoom:2,wheelAction:"scroll",snap:!1,snapThreshold:1,onRefresh:null,onBeforeScrollStart:function(a){a.preventDefault()},
onScrollStart:null,onBeforeScrollMove:null,onScrollMove:null,onBeforeScrollEnd:null,onScrollEnd:null,onTouchEnd:null,onDestroy:null,onZoomStart:null,onZoom:null,onZoomEnd:null};for(k in f)e.options[k]=f[k];e.x=e.options.x;e.y=e.options.y;e.options.useTransform=w&&e.options.useTransform;e.options.hScrollbar=e.options.hScroll&&e.options.hScrollbar;e.options.vScrollbar=e.options.vScroll&&e.options.vScrollbar;e.options.zoom=e.options.useTransform&&e.options.zoom;e.options.useTransition=w&&e.options.useTransition;
e.options.zoom&&r&&(B="");e.scroller.style[h]=e.options.useTransform?g+"transform":"top left";e.scroller.style[m]="0";e.scroller.style[n]="0 0";e.options.useTransition&&(e.scroller.style[o]="cubic-bezier(0.33,0.66,0.66,1)");e.options.useTransform?e.scroller.style[j]="translate("+e.x+"px,"+e.y+"px)"+B:e.scroller.style.cssText+=";position:absolute;top:"+e.y+"px;left:"+e.x+"px";e.options.useTransition&&(e.options.fixedScrollbar=!0);e.refresh();e._bind(y,a);e._bind(z);!v&&"none"!=e.options.wheelAction&&
(e._bind("DOMMouseScroll"),e._bind("mousewheel"));e.options.checkDOMChanges&&(e.checkDOMTime=setInterval(function(){e._checkDOMChanges()},500))};G.prototype={enabled:!0,x:0,y:0,steps:[],scale:1,currPageX:0,currPageY:0,pagesX:[],pagesY:[],aniTime:null,wheelZoomCount:0,handleEvent:function(a){switch(a.type){case z:if(!v&&0!==a.button)break;this._start(a);break;case x:this._move(a);break;case C:case D:this._end(a);break;case y:this._resize();break;case "DOMMouseScroll":case "mousewheel":this._wheel(a);
break;case A:this._transitionEnd(a)}},_checkDOMChanges:function(){!this.moved&&!this.zoomed&&!(this.animating||this.scrollerW==this.scroller.offsetWidth*this.scale&&this.scrollerH==this.scroller.offsetHeight*this.scale)&&this.refresh()},_scrollbar:function(a){var c;this[a+"Scrollbar"]?(this[a+"ScrollbarWrapper"]||(c=b.createElement("div"),this.options.scrollbarClass?c.className=this.options.scrollbarClass+a.toUpperCase():c.style.cssText="position:absolute;z-index:100;"+("h"==a?"height:7px;bottom:1px;left:2px;right:"+
(this.vScrollbar?"7":"2")+"px":"width:7px;bottom:"+(this.hScrollbar?"7":"2")+"px;top:2px;right:1px"),c.style.cssText+=";pointer-events:none;"+g+"transition-property:opacity;"+g+"transition-duration:"+(this.options.fadeScrollbar?"350ms":"0")+";overflow:hidden;opacity:"+(this.options.hideScrollbar?"0":"1"),this.wrapper.appendChild(c),this[a+"ScrollbarWrapper"]=c,c=b.createElement("div"),this.options.scrollbarClass||(c.style.cssText="position:absolute;z-index:100;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);"+
g+"background-clip:padding-box;"+g+"box-sizing:border-box;"+("h"==a?"height:100%":"width:100%")+";"+g+"border-radius:3px;border-radius:3px"),c.style.cssText+=";pointer-events:none;"+g+"transition-property:"+g+"transform;"+g+"transition-timing-function:cubic-bezier(0.33,0.66,0.66,1);"+g+"transition-duration:0;"+g+"transform: translate(0,0)"+B,this.options.useTransition&&(c.style.cssText+=";"+g+"transition-timing-function:cubic-bezier(0.33,0.66,0.66,1)"),this[a+"ScrollbarWrapper"].appendChild(c),this[a+
"ScrollbarIndicator"]=c),"h"==a?(this.hScrollbarSize=this.hScrollbarWrapper.clientWidth,this.hScrollbarIndicatorSize=f.max(f.round(this.hScrollbarSize*this.hScrollbarSize/this.scrollerW),8),this.hScrollbarIndicator.style.width=this.hScrollbarIndicatorSize+"px",this.hScrollbarMaxScroll=this.hScrollbarSize-this.hScrollbarIndicatorSize,this.hScrollbarProp=this.hScrollbarMaxScroll/this.maxScrollX):(this.vScrollbarSize=this.vScrollbarWrapper.clientHeight,this.vScrollbarIndicatorSize=f.max(f.round(this.vScrollbarSize*
this.vScrollbarSize/this.scrollerH),8),this.vScrollbarIndicator.style.height=this.vScrollbarIndicatorSize+"px",this.vScrollbarMaxScroll=this.vScrollbarSize-this.vScrollbarIndicatorSize,this.vScrollbarProp=this.vScrollbarMaxScroll/this.maxScrollY),this._scrollbarPos(a,!0)):this[a+"ScrollbarWrapper"]&&(w&&(this[a+"ScrollbarIndicator"].style[j]=""),this[a+"ScrollbarWrapper"].parentNode.removeChild(this[a+"ScrollbarWrapper"]),this[a+"ScrollbarWrapper"]=null,this[a+"ScrollbarIndicator"]=null)},_resize:function(){var a=
this;setTimeout(function(){a.refresh()},r?200:0)},_pos:function(a,b){this.zoomed||(a=this.hScroll?a:0,b=this.vScroll?b:0,this.options.useTransform?this.scroller.style[j]="translate("+a+"px,"+b+"px) scale("+this.scale+")"+B:(a=f.round(a),b=f.round(b),this.scroller.style.left=a+"px",this.scroller.style.top=b+"px"),this.x=a,this.y=b,this._scrollbarPos("h"),this._scrollbarPos("v"))},_scrollbarPos:function(a,b){var c="h"==a?this.x:this.y;this[a+"Scrollbar"]&&(c*=this[a+"ScrollbarProp"],0>c?(this.options.fixedScrollbar||
(c=this[a+"ScrollbarIndicatorSize"]+f.round(3*c),8>c&&(c=8),this[a+"ScrollbarIndicator"].style["h"==a?"width":"height"]=c+"px"),c=0):c>this[a+"ScrollbarMaxScroll"]&&(this.options.fixedScrollbar?c=this[a+"ScrollbarMaxScroll"]:(c=this[a+"ScrollbarIndicatorSize"]-f.round(3*(c-this[a+"ScrollbarMaxScroll"])),8>c&&(c=8),this[a+"ScrollbarIndicator"].style["h"==a?"width":"height"]=c+"px",c=this[a+"ScrollbarMaxScroll"]+(this[a+"ScrollbarIndicatorSize"]-c))),this[a+"ScrollbarWrapper"].style[q]="0",this[a+"ScrollbarWrapper"].style.opacity=
b&&this.options.hideScrollbar?"0":"1",this[a+"ScrollbarIndicator"].style[j]="translate("+("h"==a?c+"px,0)":"0,"+c+"px)")+B)},_start:function(b){var c=b.pointerList[0],d,e;if(this.enabled){this.options.onBeforeScrollStart&&this.options.onBeforeScrollStart.call(this,b);(this.options.useTransition||this.options.zoom)&&this._transitionTime(0);this.zoomed=this.animating=this.moved=!1;this.dirY=this.dirX=this.absDistY=this.absDistX=this.distY=this.distX=0;this.options.zoom&&1<b.nbPointers&&(e=f.abs(b.pointerList[0].pageX-
b.pointerList[1].pageX),d=f.abs(b.pointerList[0].pageY-b.pointerList[1].pageY),this.touchesDistStart=f.sqrt(e*e+d*d),this.originX=f.abs(b.pointerList[0].pageX+b.pointerList[1].pageX-2*this.wrapperOffsetLeft)/2-this.x,this.originY=f.abs(b.pointerList[0].pageY+b.pointerList[1].pageY-2*this.wrapperOffsetTop)/2-this.y,this.options.onZoomStart&&this.options.onZoomStart.call(this,b));if(this.options.momentum&&(this.options.useTransform?(d=getComputedStyle(this.scroller,null)[j].replace(/[^0-9\-.,]/g,"").split(","),
e=+(d[12]||d[4]),d=+(d[13]||d[5])):(e=+getComputedStyle(this.scroller,null).left.replace(/[^0-9-]/g,""),d=+getComputedStyle(this.scroller,null).top.replace(/[^0-9-]/g,"")),e!=this.x||d!=this.y))this.options.useTransition?this._unbind(A):F(this.aniTime),this.steps=[],this._pos(e,d),this.options.onScrollEnd&&this.options.onScrollEnd.call(this);this.absStartX=this.x;this.absStartY=this.y;this.startX=this.x;this.startY=this.y;this.pointX=c.pageX;this.pointY=c.pageY;this.startTime=b.timeStamp||Date.now();
this.options.onScrollStart&&this.options.onScrollStart.call(this,b);this._bind(x,a);this._bind(C,a);this._bind(D,a)}},_move:function(a){var b=a.pointerList[0],c=b.pageX-this.pointX,d=b.pageY-this.pointY,e=this.x+c,g=this.y+d,h=a.timeStamp||Date.now();this.options.onBeforeScrollMove&&this.options.onBeforeScrollMove.call(this,a);if(this.options.zoom&&1<a.nbPointers)e=f.abs(a.pointerList[0].pageX-a.pointerList[1].pageX),g=f.abs(a.pointerList[0].pageY-a.pointerList[1].pageY),this.touchesDist=f.sqrt(e*
e+g*g),this.zoomed=!0,b=1/this.touchesDistStart*this.touchesDist*this.scale,b<this.options.zoomMin?b=0.5*this.options.zoomMin*Math.pow(2,b/this.options.zoomMin):b>this.options.zoomMax&&(b=2*this.options.zoomMax*Math.pow(0.5,this.options.zoomMax/b)),this.lastScale=b/this.scale,e=this.originX-this.originX*this.lastScale+this.x,g=this.originY-this.originY*this.lastScale+this.y,this.scroller.style[j]="translate("+e+"px,"+g+"px) scale("+b+")"+B,this.options.onZoom&&this.options.onZoom.call(this,a);else{this.pointX=
b.pageX;this.pointY=b.pageY;if(0<e||e<this.maxScrollX)e=this.options.bounce?this.x+c/2:0<=e||0<=this.maxScrollX?0:this.maxScrollX;if(g>this.minScrollY||g<this.maxScrollY)g=this.options.bounce?this.y+d/2:g>=this.minScrollY||0<=this.maxScrollY?this.minScrollY:this.maxScrollY;this.distX+=c;this.distY+=d;this.absDistX=f.abs(this.distX);this.absDistY=f.abs(this.distY);6>this.absDistX&&6>this.absDistY||(this.options.lockDirection&&(this.absDistX>this.absDistY+5?(g=this.y,d=0):this.absDistY>this.absDistX+
5&&(e=this.x,c=0)),this.moved=!0,this._pos(e,g),this.dirX=0<c?-1:0>c?1:0,this.dirY=0<d?-1:0>d?1:0,300<h-this.startTime&&(this.startTime=h,this.startX=this.x,this.startY=this.y),this.options.onScrollMove&&this.options.onScrollMove.call(this,a))}},_end:function(c){if(0===c.nbPointers){var d=this,e=c.changedPointerList[0],g,h,n={dist:0,time:0},t={dist:0,time:0},o=(c.timeStamp||Date.now())-d.startTime,p=d.x,H=d.y;d._unbind(x,a);d._unbind(C,a);d._unbind(D,a);d.options.onBeforeScrollEnd&&d.options.onBeforeScrollEnd.call(d,
c);if(d.zoomed)p=d.scale*d.lastScale,p=Math.max(d.options.zoomMin,p),p=Math.min(d.options.zoomMax,p),d.lastScale=p/d.scale,d.scale=p,d.x=d.originX-d.originX*d.lastScale+d.x,d.y=d.originY-d.originY*d.lastScale+d.y,d.scroller.style[m]="200ms",d.scroller.style[j]="translate("+d.x+"px,"+d.y+"px) scale("+d.scale+")"+B,d.zoomed=!1,d.refresh(),d.options.onZoomEnd&&d.options.onZoomEnd.call(d,c);else{if(d.moved){if(300>o&&d.options.momentum){n=p?d._momentum(p-d.startX,o,-d.x,d.scrollerW-d.wrapperW+d.x,d.options.bounce?
d.wrapperW:0):n;t=H?d._momentum(H-d.startY,o,-d.y,0>d.maxScrollY?d.scrollerH-d.wrapperH+d.y-d.minScrollY:0,d.options.bounce?d.wrapperH:0):t;p=d.x+n.dist;H=d.y+t.dist;if(0<d.x&&0<p||d.x<d.maxScrollX&&p<d.maxScrollX)n={dist:0,time:0};if(d.y>d.minScrollY&&H>d.minScrollY||d.y<d.maxScrollY&&H<d.maxScrollY)t={dist:0,time:0}}n.dist||t.dist?(n=f.max(f.max(n.time,t.time),10),d.options.snap&&(t=p-d.absStartX,o=H-d.absStartY,f.abs(t)<d.options.snapThreshold&&f.abs(o)<d.options.snapThreshold?d.scrollTo(d.absStartX,
d.absStartY,200):(t=d._snap(p,H),p=t.x,H=t.y,n=f.max(t.time,n))),d.scrollTo(f.round(p),f.round(H),n)):d.options.snap?(t=p-d.absStartX,o=H-d.absStartY,f.abs(t)<d.options.snapThreshold&&f.abs(o)<d.options.snapThreshold?d.scrollTo(d.absStartX,d.absStartY,200):(t=d._snap(d.x,d.y),(t.x!=d.x||t.y!=d.y)&&d.scrollTo(t.x,t.y,t.time))):d._resetPos(200)}else v&&(d.doubleTapTimer&&d.options.zoom?(clearTimeout(d.doubleTapTimer),d.doubleTapTimer=null,d.options.onZoomStart&&d.options.onZoomStart.call(d,c),d.zoom(d.pointX,
d.pointY,1==d.scale?d.options.doubleTapZoom:1),d.options.onZoomEnd&&setTimeout(function(){d.options.onZoomEnd.call(d,c)},200)):this.options.handleClick&&(d.doubleTapTimer=setTimeout(function(){d.doubleTapTimer=null;for(g=e.target;1!=g.nodeType;)g=g.parentNode;"SELECT"!=g.tagName&&"INPUT"!=g.tagName&&"TEXTAREA"!=g.tagName&&(h=b.createEvent("MouseEvents"),h.initMouseEvent("click",!0,!0,c.view,1,e.screenX,e.screenY,e.clientX,e.clientY,c.ctrlKey,c.altKey,c.shiftKey,c.metaKey,0,null),h._fake=!0,g.dispatchEvent(h))},
d.options.zoom?250:0))),d._resetPos(400);d.options.onTouchEnd&&d.options.onTouchEnd.call(d,c)}}},_resetPos:function(a){var b=0<=this.x?0:this.x<this.maxScrollX?this.maxScrollX:this.x,c=this.y>=this.minScrollY||0<this.maxScrollY?this.minScrollY:this.y<this.maxScrollY?this.maxScrollY:this.y;b==this.x&&c==this.y?(this.moved&&(this.moved=!1,this.options.onScrollEnd&&this.options.onScrollEnd.call(this)),this.hScrollbar&&this.options.hideScrollbar&&("webkit"==e&&(this.hScrollbarWrapper.style[q]="300ms"),
this.hScrollbarWrapper.style.opacity="0"),this.vScrollbar&&this.options.hideScrollbar&&("webkit"==e&&(this.vScrollbarWrapper.style[q]="300ms"),this.vScrollbarWrapper.style.opacity="0")):this.scrollTo(b,c,a||0)},_wheel:function(a){var b=this,c,d;if("wheelDeltaX"in a)c=a.wheelDeltaX/12,d=a.wheelDeltaY/12;else if("wheelDelta"in a)c=d=a.wheelDelta/12;else if("detail"in a)c=d=3*-a.detail;else return;"zoom"==b.options.wheelAction?(d=b.scale*Math.pow(2,1/3*(d?d/Math.abs(d):0)),d<b.options.zoomMin&&(d=b.options.zoomMin),
d>b.options.zoomMax&&(d=b.options.zoomMax),d!=b.scale&&(!b.wheelZoomCount&&b.options.onZoomStart&&b.options.onZoomStart.call(b,a),b.wheelZoomCount++,b.zoom(a.pageX,a.pageY,d,400),setTimeout(function(){b.wheelZoomCount--;!b.wheelZoomCount&&b.options.onZoomEnd&&b.options.onZoomEnd.call(b,a)},400))):(c=b.x+c,d=b.y+d,0<c?c=0:c<b.maxScrollX&&(c=b.maxScrollX),d>b.minScrollY?d=b.minScrollY:d<b.maxScrollY&&(d=b.maxScrollY),0>b.maxScrollY&&b.scrollTo(c,d,0))},_transitionEnd:function(a){a.target==this.scroller&&
(this._unbind(A),this._startAni())},_startAni:function(){var a=this,b=a.x,c=a.y,d=Date.now(),e,g,j;a.animating||(a.steps.length?(e=a.steps.shift(),e.x==b&&e.y==c&&(e.time=0),a.animating=!0,a.moved=!0,a.options.useTransition?(a._transitionTime(e.time),a._pos(e.x,e.y),a.animating=!1,e.time?a._bind(A):a._resetPos(0)):(j=function(){var h=Date.now();h>=d+e.time?(a._pos(e.x,e.y),a.animating=!1,a.options.onAnimationEnd&&a.options.onAnimationEnd.call(a),a._startAni()):(h=(h-d)/e.time-1,g=f.sqrt(1-h*h),h=
(e.x-b)*g+b,a._pos(h,(e.y-c)*g+c),a.animating&&(a.aniTime=E(j)))},j())):a._resetPos(400))},_transitionTime:function(a){a+="ms";this.scroller.style[m]=a;this.hScrollbar&&(this.hScrollbarIndicator.style[m]=a);this.vScrollbar&&(this.vScrollbarIndicator.style[m]=a)},_momentum:function(a,b,c,d,e){var b=f.abs(a)/b,g=b*b/0.0012;0<a&&g>c?(c+=e/(6/(6.0E-4*(g/b))),b=b*c/g,g=c):0>a&&g>d&&(d+=e/(6/(6.0E-4*(g/b))),b=b*d/g,g=d);return{dist:g*(0>a?-1:1),time:f.round(b/6.0E-4)}},_offset:function(a){for(var b=-a.offsetLeft,
c=-a.offsetTop;a=a.offsetParent;)b-=a.offsetLeft,c-=a.offsetTop;a!=this.wrapper&&(b*=this.scale,c*=this.scale);return{left:b,top:c}},_snap:function(a,b){var c,d,e;e=this.pagesX.length-1;for(c=0,d=this.pagesX.length;c<d;c++)if(a>=this.pagesX[c]){e=c;break}e==this.currPageX&&0<e&&0>this.dirX&&e--;a=this.pagesX[e];d=(d=f.abs(a-this.pagesX[this.currPageX]))?500*(f.abs(this.x-a)/d):0;this.currPageX=e;e=this.pagesY.length-1;for(c=0;c<e;c++)if(b>=this.pagesY[c]){e=c;break}e==this.currPageY&&0<e&&0>this.dirY&&
e--;b=this.pagesY[e];c=(c=f.abs(b-this.pagesY[this.currPageY]))?500*(f.abs(this.y-b)/c):0;this.currPageY=e;e=f.round(f.max(d,c))||200;return{x:a,y:b,time:e}},_bind:function(a,b,d){c.addPointerListener(b||this.scroller,a,this,!!d)},_unbind:function(a,b,d){c.removePointerListener(b||this.scroller,a,this,!!d)},destroy:function(){this.scroller.style[j]="";this.vScrollbar=this.hScrollbar=!1;this._scrollbar("h");this._scrollbar("v");this._unbind(y,a);this._unbind(z);this._unbind(x,a);this._unbind(C,a);
this._unbind(D,a);this.options.hasTouch||(this._unbind("DOMMouseScroll"),this._unbind("mousewheel"));this.options.useTransition&&this._unbind(A);this.options.checkDOMChanges&&clearInterval(this.checkDOMTime);this.options.onDestroy&&this.options.onDestroy.call(this)},refresh:function(){var a,b,c,d=0;b=0;this.scale<this.options.zoomMin&&(this.scale=this.options.zoomMin);this.wrapperW=this.wrapper.clientWidth||1;this.wrapperH=this.wrapper.clientHeight||1;this.minScrollY=-this.options.topOffset||0;this.scrollerW=
f.round(this.scroller.offsetWidth*this.scale);this.scrollerH=f.round((this.scroller.offsetHeight+this.minScrollY)*this.scale);this.maxScrollX=this.wrapperW-this.scrollerW;this.maxScrollY=this.wrapperH-this.scrollerH+this.minScrollY;this.dirY=this.dirX=0;this.options.onRefresh&&this.options.onRefresh.call(this);this.hScroll=this.options.hScroll&&0>this.maxScrollX;this.vScroll=this.options.vScroll&&(!this.options.bounceLock&&!this.hScroll||this.scrollerH>this.wrapperH);this.hScrollbar=this.hScroll&&
this.options.hScrollbar;this.vScrollbar=this.vScroll&&this.options.vScrollbar&&this.scrollerH>this.wrapperH;a=this._offset(this.wrapper);this.wrapperOffsetLeft=-a.left;this.wrapperOffsetTop=-a.top;if("string"==typeof this.options.snap){this.pagesX=[];this.pagesY=[];c=this.scroller.querySelectorAll(this.options.snap);for(a=0,b=c.length;a<b;a++)d=this._offset(c[a]),d.left+=this.wrapperOffsetLeft,d.top+=this.wrapperOffsetTop,this.pagesX[a]=d.left<this.maxScrollX?this.maxScrollX:d.left*this.scale,this.pagesY[a]=
d.top<this.maxScrollY?this.maxScrollY:d.top*this.scale}else if(this.options.snap){for(this.pagesX=[];d>=this.maxScrollX;)this.pagesX[b]=d,d-=this.wrapperW,b++;this.maxScrollX%this.wrapperW&&(this.pagesX[this.pagesX.length]=this.maxScrollX-this.pagesX[this.pagesX.length-1]+this.pagesX[this.pagesX.length-1]);b=d=0;for(this.pagesY=[];d>=this.maxScrollY;)this.pagesY[b]=d,d-=this.wrapperH,b++;this.maxScrollY%this.wrapperH&&(this.pagesY[this.pagesY.length]=this.maxScrollY-this.pagesY[this.pagesY.length-
1]+this.pagesY[this.pagesY.length-1])}this._scrollbar("h");this._scrollbar("v");this.zoomed||(this.scroller.style[m]="0",this._resetPos(400))},scrollTo:function(a,b,c,d){var f=a;this.stop();f.length||(f=[{x:a,y:b,time:c,relative:d}]);for(a=0,b=f.length;a<b;a++)f[a].relative&&(f[a].x=this.x-f[a].x,f[a].y=this.y-f[a].y),this.steps.push({x:f[a].x,y:f[a].y,time:f[a].time||0});this._startAni()},scrollToElement:function(a,b){var c;if(a=a.nodeType?a:this.scroller.querySelector(a))c=this._offset(a),c.left+=
this.wrapperOffsetLeft,c.top+=this.wrapperOffsetTop,c.left=0<c.left?0:c.left<this.maxScrollX?this.maxScrollX:c.left,c.top=c.top>this.minScrollY?this.minScrollY:c.top<this.maxScrollY?this.maxScrollY:c.top,b=b===p?f.max(2*f.abs(c.left),2*f.abs(c.top)):b,this.scrollTo(c.left,c.top,b)},scrollToPage:function(a,b,c){c=c===p?400:c;this.options.onScrollStart&&this.options.onScrollStart.call(this);this.options.snap?(a="next"==a?this.currPageX+1:"prev"==a?this.currPageX-1:a,b="next"==b?this.currPageY+1:"prev"==
b?this.currPageY-1:b,a=0>a?0:a>this.pagesX.length-1?this.pagesX.length-1:a,b=0>b?0:b>this.pagesY.length-1?this.pagesY.length-1:b,this.currPageX=a,this.currPageY=b,a=this.pagesX[a],b=this.pagesY[b]):(a*=-this.wrapperW,b*=-this.wrapperH,a<this.maxScrollX&&(a=this.maxScrollX),b<this.maxScrollY&&(b=this.maxScrollY));this.scrollTo(a,b,c)},disable:function(){this.stop();this._resetPos(0);this.enabled=!1;this._unbind(x,a);this._unbind(C,a);this._unbind(D,a)},enable:function(){this.enabled=!0},stop:function(){this.options.useTransition?
this._unbind(A):F(this.aniTime);this.steps=[];this.animating=this.moved=!1},zoom:function(a,b,c,d){var f=c/this.scale;this.options.useTransform&&(this.zoomed=!0,d=d===p?200:d,a=a-this.wrapperOffsetLeft-this.x,b=b-this.wrapperOffsetTop-this.y,this.x=a-a*f+this.x,this.y=b-b*f+this.y,this.scale=c,this.refresh(),this.x=0<this.x?0:this.x<this.maxScrollX?this.maxScrollX:this.x,this.y=this.y>this.minScrollY?this.minScrollY:this.y<this.maxScrollY?this.maxScrollY:this.y,this.scroller.style[m]=d+"ms",this.scroller.style[j]=
"translate("+this.x+"px,"+this.y+"px) scale("+c+")"+B,this.zoomed=!1)},isReady:function(){return!this.moved&&!this.zoomed&&!this.animating}};"undefined"!==typeof exports?exports.iScroll=G:a.iScroll=G})(o,m,j);r.NO_SCROLL=0;r.VERTICAL_SCROLL=1;r.HORIZONTAL_SCROLL=2;r.SCROLL=3;r.NO_PINCH=0;r.ROTATION=1;r.SCALE=2;r.ROTATION_AND_SCALE=3;r.prototype={_delegate:null,_scroll:!1,__scroll_activated:!1,_pinch:r.NO_PINCH,_ab_view_t_x:0,_ab_view_t_y:0,_ab_view_s:1,_ab_view_r:0,_animation_duration:0,refresh:function(){var a,
b=this.size,c=b[0],d=b[1],f,e=this._getComputedStyle(this.view),h=0,m=0;this._sub_view&&(this._sub_view.style.height="",this._sub_view.style.width="",j.scheduleAction(function(){if(this.__i__){g.prototype.refresh.call(this);e&&(f=e["border-right-width"],h+=f?parseInt(f,10):0,f=e["border-left-width"],h+=f?parseInt(f,10):0,f=e["border-top-width"],m+=f?parseInt(f,10):0,f=e["borde-bottom-width"],m+=f?parseInt(f,10):0);c-=h;d-=m;for(a=this._sub_view.firstElementChild;a;)f=a.offsetHeight+a.offsetTop,f>
d&&(d=f),f=a.offsetWidth+a.offsetLeft,f>c&&(c=f),a=a.nextElementSibling;this._scroll===r.SCROLL&&(this._sub_view.style.width=c+"px",this._sub_view.style.height=d+"px");this._scroll===r.HORIZONTAL_SCROLL&&(this._sub_view.style.width=c+"px",this._sub_view.style.height=this.size[1]-h+"px");this._scroll===r.VERTICAL_SCROLL&&(this._sub_view.style.width=this.size[0]-m+"px",this._sub_view.style.height=d+"px");this._scroll===r.NO_SCROLL&&(b=this.size,this._sub_view.style.width=b[0]+"px",this._sub_view.style.height=
b[1]+"px");this.__iscroll__&&this.__iscroll__.refresh()}}.bind(this)))},destructor:function(){this.__iscroll__&&(this.__iscroll__.destroy(),this.__iscroll__=p);this._scroll=!1;this._sub_view&&this._sub_view.parentElement&&this._sub_view.parentElement.removeChild(this._sub_view);g.prototype.destructor.call(this);delete this._sub_view},add:function(a,b){a&&(a instanceof I&&(b="top_bar"),a instanceof e&&(b="bottom_bar"),g.prototype.add.call(this,a,b))},initComponent:function(){g.prototype.initComponent.call(this);
this._sub_view=this.view.querySelector(".content");this.pinch=this._pinch;this.scroll=this._scroll;this.layout=this._layout;this.animationDuration=this._animation_duration;this.refresh()},_updateSize:function(){g.prototype._updateSize.call(this);this.refresh()},_setup_iscroll:function(){this.__iscroll__&&(this.__iscroll__.destroy(),this.__iscroll__=p);if(this.view&&this._sub_view){var a={bubbling:!1,hScroll:!1,vScroll:!1};1===this._scroll?a.vScroll=!0:2===this._scroll?a.hScroll=!0:3===this._scroll&&
(a.hScroll=!0,a.vScroll=!0);a.hScrollbar=!1;a.vScrollbar=!1;this.__iscroll__=new iScroll(this.view,this._sub_view,a);this.refresh()}}};f.extendClass(r,g);f.defineClassProperties(r,{delegate:{set:function(a){this._delegate=a}},scroll:{set:function(a){if(a!==this._scroll)if(a){if(!0===a||1===a||2===a||3===a)this._scroll=a,this._setup_iscroll()}else this.__iscroll__&&(this.__iscroll__.destroy(),this.__iscroll__=p),this._scroll=!1},get:function(){return this._scroll}},pinch:{set:function(a){!(a!==r.NO_PINCH&&
a!==r.ROTATION&&a!==r.SCALE&&a!==r.ROTATION_AND_SCALE)&&this.view&&(this._pinch=a)}},animationDuration:{set:function(a){a||(a=0);f.isNumber(a)&&(this._animation_duration=a,this._sub_view&&(this._sub_view.style.webkitTransitionDuration=a+"ms",(this.hScrollbar||this.vScrollbar)&&this._scroll_transition_time(a)))}},layout:{set:function(a){a!==g.HORIZONTAL_LAYOUT&&a!==g.DEFAULT_LAYOUT&&a!==g.ABSOLUTE_LAYOUT&&a!==g.VERTICAL_LAYOUT&&a!==g.FLOW_LAYOUT&&a!==g.LEGACY_HORIZONTAL_LAYOUT&&a!==g.LEGACY_ABSOLUTE_LAYOUT&&
a!==g.LEGACY_VERTICAL_LAYOUT&&a!==g.LEGACY_FLOW_LAYOUT&&a?console.error("Unsupported layout '"+a+"'!"):(a&&-1===a.indexOf("_layout")&&(a+="_layout"),this._sub_view?(this._layout&&f.removeClassName(this._sub_view,this._layout),(this._layout=a)&&f.addClassName(this._sub_view,this._layout)):this._layout=a)}},innerHTML:{set:function(a){this._sub_view&&f.safeInnerHTML(this._sub_view,a)}}});q.ScrollView=r;y.STRETCH_NONE=0;y.STRETCH_FILL=1;y.STRETCH_UNIFORM=2;y.STRETCH_UNIFORM_FILL=3;y.prototype={_image_data:null,
_image_width:0,_image_height:0,_image_loaded:!1,_src:null,_stretch:y.STRETCH_FILL,destructor:function(){this._sub_view&&(this._image_data.onload=null,delete this._image_data,this._image_loaded=!1,this._sub_view.src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=");r.prototype.destructor.call(this)},show:function(){r.prototype.show.call(this);this.stretch=this._stretch},refresh:function(){if(this._sub_view&&this._image_loaded)if(this._stretch===y.STRETCH_FILL)this._sub_view.setAttribute("width",
"100%"),this._sub_view.setAttribute("height","100%");else if(this._stretch===y.STRETCH_NONE)this._sub_view.removeAttribute("width"),this._sub_view.removeAttribute("height");else if(this._stretch===y.STRETCH_UNIFORM){var a=this._size[0]/this._size[1],b=this._image_width/this._image_height,c=0,c=1;a<b?(c=this._image_width/this._size[0],c=(this._size[1]-this._image_height/c)/2,this._sub_view.setAttribute("width","100%"),this._sub_view.removeAttribute("height"),this._sub_view.style.left="0px",this._sub_view.style.top=
c+"px"):(c=this._image_height/this._size[1],c=(this._size[0]-this._image_width/c)/2,this._sub_view.removeAttribute("width"),this._sub_view.setAttribute("height","100%"),this._sub_view.style.top="0px",this._sub_view.style.left=c+"px")}else this._stretch===y.STRETCH_UNIFORM_FILL&&(a=this._size[0]/this._size[1],b=this._image_width/this._image_height,a>b?(this._sub_view.setAttribute("width","100%"),this._sub_view.removeAttribute("height")):(this._sub_view.removeAttribute("width"),this._sub_view.setAttribute("height",
"100%")));this.__scroll_activated&&this._scroll_refresh(this._pinch);g.prototype.refresh.call(this)},_image_onload:function(){this._image_loaded=!0;this._image_width=this._image_data.width;this._image_height=this._image_data.height;this._sub_view&&(this._sub_view.src=this._src);this.stretch=this._stretch;this.propagate("load");var a=this;j.scheduleAction(function(){a.refresh()})},initComponent:function(){r.prototype.initComponent.call(this);var a=this;this._image_data=new Image;this._image_data.onload=
function(b){a._image_onload(b)};this.pinch=this._pinch;this.pan=this._pan;this._sub_view&&this._sub_view.src&&(this._src=this._sub_view.getAttribute("src"),this._image_data.src=this._src,this._image_onload());this._sub_view&&(this._sub_view.ondragstart=function(a){a.preventDefault();return!1},this.stretch=this._stretch);this.refresh()}};f.extendClass(y,r);f.defineClassProperties(y,{src:{set:function(a){f.isString(a)&&(this._image_loaded=!1,this._src=a,this._image_data.src=this._src)},get:function(){return this._src}},
stretch:{set:function(a){f.isNumber(a)&&!(a!==y.STRETCH_FILL&&a!==y.STRETCH_NONE&&a!==y.STRETCH_UNIFORM&&a!==y.STRETCH_UNIFORM_FILL)&&(this._stretch=a,this.refresh())},get:function(){return this._stretch}},size:{set:function(a){if(f.isArray(a)||2===a.length||f.isNumber(a[0])&&f.isNumber(a[1]))this.stretch=this._stretch,this._size[0]=a[0],this._size[1]=a[1],this._updateSizeAndPos()},get:function(){this.view&&this.view.parentNode&&(this._size[0]=this.view.offsetWidth,this._size[1]=this.view.offsetHeight);
return this._size.slice()}}});q.ScrollImageView=y;T.prototype={_ab_view_t_x:0,_ab_view_t_y:0,_value:"",destructor:function(){this.view.removeEventListener("change",this);this.view.removeEventListener("focus",this);this.view.removeEventListener("blur",this);this.view.removeEventListener("textInput",this);g.prototype.destructor.call(this)},initComponent:function(){g.prototype.initComponent.call(this);f.isString(this._value)&&(this.view.value=this._value,this.view.addEventListener("textInput",this),
this.view.addEventListener("change",this),this.view.addEventListener("focus",this),this.view.addEventListener("blur",this))},setFocus:function(){this.view.focus()},setBlur:function(){this.view.blur()},setPointerEvents:function(a){this._text_field.style.pointerEvents=a?"none":"auto"},handleEvent:function(a){function b(a){a.src!==c.view&&(j.removePointerListener(m,h.POINTER_START,b,!0),c.setBlur())}var c=this;switch(a.type){case "focus":j.addPointerListener(m,h.POINTER_START,b,!0);break;case "change":this._value=
this.view.value;this.outPropertyChange();this.propagate("change",this._value);break;case "textInput":this._value=this.view.value,this.outPropertyChange(),this.propagate("continuous_change",this._value)}}};f.extendClass(T,g);f.defineClassProperty(T,"value",{set:function(a){if(null===a||"undefined"===typeof a)a="";else if(f.isNumber(a))a=""+a;else if(!f.isString(a)){if(!a.toString)return;a=a.toString()}this._value=a;this.view.value=a},get:function(){return this._value}});q.TextArea=T;z.DEFAULT_TYPE=
"default";z.DEFAULT_STYLE="default_style";z.GREEN_STYLE="green";z.RED_STYLE="red";z.GREY_STYLE="grey";z.NAVIGATION_TYPE="nav";z.NAVIGATION_BACK_TYPE="nav_back";z.NAVIGATION_FORWARD_TYPE="nav_forward";z.BLUE_STYLE="blue_style";z.BLACK_STYLE="black_style";z.SILVER_STYLE="silver_style";z.prototype={__tap_recognizer:null,_style:z.DEFAULT_STYLE,_type:z.DEFAULT_TYPE,_selected:!1,_text:"",_released_image:"",_selected_image:"",_disabled_image:"",didTouch:function(){this.addClassName("pressed");this._selected=
!0},didUntouch:function(){this.removeClassName("pressed");this._selected=!1},didTap:function(){this.propagate("select")},destructor:function(){this.__tap_recognizer&&(this.removePointerRecognizer(this.__tap_recognizer),this.__tap_recognizer=null);g.prototype.destructor.call(this)},initComponent:function(){g.prototype.initComponent.call(this);this.text_view=this.view.firstElementChild;this.__tap_recognizer||(this.__tap_recognizer=new P(this),this.addPointerRecognizer(this.__tap_recognizer));this.text=
this._text?this._text:"";this.view.name=this.id;this._style&&this.addClassName(this._style);this._type&&this.addClassName(this._type)}};f.extendClass(z,g);f.defineClassProperties(z,{text:{set:function(a){if(null===a||"undefined"===typeof a)a="";else if(f.isNumber(a))a=""+a;else if(!f.isString(a)){if(!a.toString)return;a=a.toString()}this._text=a;this.text_view&&f.setElementInnerText(this.text_view,this._text)},get:function(){return this._text}},style:{set:function(a){f.isString(a)&&(a=a.replace("_ios",
""),this._style&&this.removeClassName(this._style),this._style=a,this.addClassName(this._style))},get:function(){return this._style}},type:{set:function(a){f.isString(a)&&(this._type&&this.removeClassName(this._type),this._type=a,this.addClassName(this._type))},get:function(){return this._type}}});q.Button=z;G.prototype={__tap_recognizer:null,__list_time_out:0,_items_selectable:!0,_scroll:0,_model:null,__elem:null,__scroll_start:0,add:function(){},remove:function(){},destructor:function(){r.prototype.destructor.call(this);
this.__tap_recognizer&&(this.removePointerRecognizer(this.__tap_recognizer),this.__tap_recognizer=null);this._model.unbindChange(null,this,this._modelChanged);this._model_allocated&&f.free(this._model);this._model_allocated=!1},initComponent:function(){r.prototype.initComponent.call(this);this._model=new j.core.Array;this._model.init();this._model_allocated=!0;this._model.bindChange(null,this,this._modelChanged);this._holes.item_children||(this._holes.item_children=this.view.querySelector("ul"));
this._list_items=this._sub_view=this._holes.item_children;this.__tap_recognizer||(this.__tap_recognizer=new P(this),this.addPointerRecognizer(this.__tap_recognizer));this.refresh()},refresh:function(){this.__iscroll__&&this.__iscroll__.refresh();r.prototype.refresh.call(this)},_modelChanged:function(){this._renderData(this._items_selectable);this.refresh()},propertiesDidChange:function(){this._modelChanged();return!0},_renderData:function(){},_touchItemFeedback:function(){},_untouchItemFeedback:function(){},
_updateSelectItem:function(){},didTouch:function(a,b){if(!this._items_selectable)return!1;b===this._sub_view||b===this.view?this.__elem=null:(this.__elem=b,this.__list_time_out&&(clearTimeout(this.__list_time_out),this.__list_time_out=0),this.__elem_to_unselect&&(this._untouchItemFeedback(this.__elem_to_unselect),this.__elem_to_unselect=null),(this.__elem_to_unselect=b)&&this._touchItemFeedback(b))},didUntouch:function(){!this.__list_time_out&&this.__elem_to_unselect&&(this._untouchItemFeedback(this.__elem_to_unselect),
this.__elem_to_unselect=null);this.__elem=null},didTap:function(){var a=this;if(this.__elem_to_unselect=this.__elem)this._updateSelectItem(this.__elem),this.__list_time_out=setTimeout(function(){a.__elem_to_unselect&&a._untouchItemFeedback(a.__elem_to_unselect);a.__elem_to_unselect=null;a.__list_time_out=0},g.UNSELECT_DELAY)},scrollToElementAt:function(a,b){if(this.__iscroll__){f.isNumber(b);var c=this.__item_obs[a];c&&(c=this.__iscroll__._offset(c.view),c.top+=this.__iscroll__.wrapperOffsetTop,c.top=
c.top>this.__iscroll__.minScrollY?this.__iscroll__.minScrollY:c.top<this.__iscroll__.maxScrollY?this.__iscroll__.maxScrollY:c.top,this.__iscroll__.scrollTo(0,c.top,200))}}};f.extendClass(G,r);f.defineClassProperties(G,{scroll:{set:function(a){a?(this._scroll=r.VERTICAL_SCROLL,this._setup_iscroll()):(this.__iscroll__&&(this.__iscroll__.destroy(),this.__iscroll__=p),this._scroll=!1)},get:function(){return this._scroll?!0:!1}},model:{set:function(a){a&&(f.isArray(a)?(this._model.removeAll(),this._model.add.apply(this._model,
a)):a.toJSON&&a.propertyChange&&(this._model_allocated&&(this._model.unbindChange(null,this,this._modelChanged),f.free(this._model)),this._model_allocated=!1,this._model=a,this._model.bindChange(null,this,this._modelChanged)))},get:function(){return this._model}},data:{set:function(a){f.isArray(a)&&(this._model_allocated?this._model.removeAll():(this._model=new j.core.Array,this._model.init(),this._model_allocated=!0,this._model.bindChange(null,this,this._modelChanged)),this._model.add.apply(this._model,
a),this._modelChanged())},get:function(){return this._model._data.slice()}}});q.AbstractList=G;var K=function(a){this.parent=g;this.parent(a);this.constructor=K};K.prototype={_index:0,_pressed:!1,_visible:!0,didSelect:function(){}};f.extendClass(K,g);f.defineClassProperties(K,{pressed:{set:function(a){this.view&&(a?(this.addClassName("pressed"),this._pressed=!0):(this.removeClassName("pressed"),this._pressed=!1))},get:function(){return this._pressed}},index:{set:function(a){this._index=a},get:function(){return this._index}}});
ca.prototype={_title:"",_label:"",set title(a){if(null===a||"undefined"===typeof a)a="";else if(f.isNumber(a))a=""+a;else if(!f.isString(a)){if(!a.toString)return;a=a.toString()}this._title=a;this.view&&(f.setElementInnerText(this.view,this._title),this.view.appendChild(this._label_view))},set label(a){if(null===a||"undefined"===typeof a)a="";else if(f.isNumber(a))a=""+a;else if(!f.isString(a)){if(!a.toString)return;a=a.toString()}this._label=a;this.view&&f.setElementInnerText(this._label_view,this._label);
this._label&&!this._label_view.parentNode&&this.view.appendChild(this._label_view);!this._label&&this._label_view.parentNode&&this.view.removeChild(this._label_view)},initComponent:function(){this.__config__||(this.__config__={});this.__config__.id=this.id;this.__config__.node||(this.__config__.node=m.createElement("li"));K.prototype.initComponent.call(this);this._label_view=m.createElement("span")}};f.extendClass(ca,K);ha.prototype={_title:"",set title(a){if(null===a||"undefined"===typeof a)a="";
else if(f.isNumber(a))a=""+a;else if(!f.isString(a)){if(!a.toString)return;a=a.toString()}this._title=a;this.view&&f.setElementInnerText(this.title_view,this._title)},initComponent:function(){this.__config__||(this.__config__={});this.__config__.id=this.id;if(!this.__config__.node){this.__config__.node=m.createElement("div");this.__config__.node.className="simplelist_item";var a=m.createElement("div");a.className="title";this.__config__.node.appendChild(a)}K.prototype.initComponent.call(this);this._label_view=
m.createElement("span");this.title_view=this.view.querySelector(".title")}};f.extendClass(ha,g);w.FILTER_EXACTS=0;w.FILTER_CONTAINS=1;w.FILTER_STARTS_WITH=2;w.BLOCK_LIST="BlockList";w.TAB_LIST="TabList";w.DEFAULT_LIST="DefaultList";w.prototype={_type:w.DEFAULT_LIST,_selected_index:0,_selected_item:0,_filters:null,_has_arrow:!0,__item_obs:null,__elem:null,__template_obj:null,__template_class:null,add:function(a){this.setItemTemplate(a)},setItemTemplate:function(a){a&&(f.isFunction(a)?(this.__template_obj=
null,this.__template_class=a):a.constructor&&(this.__template_obj=a,this.__template_class=null))},setItemTemplateName:function(a){return this.createAndAddComponent(a,{},"item_children")},remove:function(){},destructor:function(){this._freeListItems();G.prototype.destructor.call(this)},initComponent:function(){G.prototype.initComponent.call(this);this.addClassName(this._type);this.refresh()},getItems:function(){return this.__item_obs?this.__item_obs.slice():[]},applyFilters:function(){if(this._filters&&
this.__item_obs){var a,b,c;for(a=0;a<this.__item_obs.length;a++)b=this.__item_obs[a],c=this._model.item(b.index),this.appyFiltersOnObj(b,c)}},appyFiltersOnObj:function(a,b){if(this._filters&&a&&b){var c,d,f,e,g,h=this._filters.length;if(0===h)a.show();else for(c=0;c<h;c++)if(d=this._filters[c],!d.property||!d.value)a.show();else{f=!1;e=b[d.property];g=d.value;!1===d.strict&&(e=e.toLowerCase(),g=g.toLowerCase());switch(d.matching){case p:case null:case w.FILTER_EXACTS:e!==g&&(f=!0);break;case w.FILTER_STARTS_WITH:0!==
e.indexOf(g)&&(f=!0);break;case w.FILTER_CONTAINS:-1===e.indexOf(g)&&(f=!0)}f?a.hide():a.show()}}},_freeListItems:function(){var a,b;for(a=0;a<this.__item_obs.length;a++)b=this.__item_obs[a],b.__parent=p,f.free(b);this.__item_obs=[]},_renderData:ta,_modelChanged:function(){this._renderData(this._items_selectable);this.refresh()},_touchItemFeedback:function(a){a._comp_.pressed=!0},_untouchItemFeedback:function(a){a._comp_.pressed=!1},_updateSelectItem:function(a){this._selected_index=a._comp_.index;
this._selected_item=this._model.item(this._selected_index);a._comp_&&a._comp_.didSelect&&a._comp_.didSelect();this.outPropertyChange();this.propagate("itemselect",{index:this._selected_index,item:this._selected_item})},init_directAccessBar:function(){function a(a){if(0!==a.targetPointerList.length&&(a.stopPropagation(),a.preventDefault(),f.setElementTransform(b._list_items,""),b.__max_scroll=b.size[1]-b._list_items.offsetHeight,j.addPointerListener(m,h.POINTER_MOVE,e,!1),j.addPointerListener(m,h.POINTER_END,
g,!1),a=a.targetPointerList[0].target._index_,f.isNumber(a)&&b._acces_index!==a)){b._acces_index=a;if(b.__iscroll__){var n=b.getTitleItem(a);b.__iscroll__.scrollToElement(n,0)}else n=-b.getTitlePosition(a),n<b.__max_scroll&&(n=b.__max_scroll),b.__scroll_start=n,L?f.setElementTransform(b._list_items,"translate3d(0,"+n+"px,0)"):f.setElementTransform(b._list_items,"translate(0,"+n+"px)");c=f.getElementDimensions(b._direct_access);c.height-=10;d=f.getElementAbsolutePosition(b._direct_access);d.y+=5;a=
b.__direct_access_letters[a];b._direct_access_value.style.opacity=1;b._direct_access_value.innerHTML=a;b._startScrolling&&b._startScrolling()}}this._direct_access=m.createElement("div");this._direct_access.className="direct_access";this.view.appendChild(this._direct_access);this._direct_access_value=m.createElement("div");this._direct_access_value.className="direct_access_value";this.view.appendChild(this._direct_access_value);this._acces_index=0;var b=this,c,d;this.__access_bar_start=a;var e=function(a){a.stopPropagation();
a.preventDefault();!c||!d?a=0:(a=a.pageY-d.y,0>a?a=0:a>c.height&&(a=c.height-1),a=Math.floor(a*b._direct_access.childElementCount/c.height));if(f.isNumber(a)&&b._acces_index!==a){b._acces_index=a;if(b.__iscroll__){var e=b.getTitleItem(a);b.__iscroll__.scrollToElement(e,0)}else e=-b.getTitlePosition(a),e<b.__max_scroll&&(e=b.__max_scroll),b.__scroll_start=e,L?f.setElementTransform(b._list_items,"translate3d(0,"+e+"px,0)"):f.setElementTransform(b._list_items,"translate(0,"+e+"px)");b._direct_access_value.innerHTML=
b.__direct_access_letters[a]}},g=function(){j.removePointerListener(m,h.POINTER_MOVE,e);j.removePointerListener(m,h.POINTER_END,g);b._direct_access_value.style.opacity=0};j.addPointerListener(this._direct_access,h.POINTER_START,a,!1)},remove_directAccessBar:function(){j.removePointerListener(this._direct_access,h.POINTER_START,this.__access_bar_start,!1);this.view.removeChild(this._direct_access);this._direct_access=p;this.view.removeChild(this._direct_access_value);this._direct_access_value=p},getTitlePosition:function(a){return(a=
this.getTitleItem(a))?a.offsetTop:0},getTitleItem:function(a){a=this.view.querySelectorAll("ul > li > div").item(a);return!a?void 0:a.parentElement}};f.extendClass(w,G);f.defineClassProperties(w,{itemsSelectable:{set:function(a){if(!(a&&this._items_selectable||!a&&!this._items_selectable))if(a){this._items_selectable=!0;for(i=0;i<this.__item_obs.length;i++)obj=this.__item_obs[i],j.addPointerListener(obj.view,h.POINTER_START,this,!0)}else{this._items_selectable=!1;for(i=0;i<this.__item_obs.length;i++)obj=
this.__item_obs[i],j.removePointerListener(obj.view,h.POINTER_START,this,!0)}}},selectedIndex:{get:function(){return this._selected_index}},selectedItem:{get:function(){return this._selected_item}},type:{set:function(a){f.isString(a)&&!(a!==w.BLOCK_LIST&&a!==w.TAB_LIST&&a!==w.DEFAULT_LIST)&&(this.removeClassName(this._type),this._type=a,this.addClassName(this._type),this._type===w.BLOCK_LIST&&(this._renderData=wa,this._direct_access&&this.remove_directAccessBar()),this._type===w.TAB_LIST&&(this._renderData=
xa,this._direct_access||this.init_directAccessBar()),this._type===w.DEFAULT_LIST&&(this._renderData=ta,this._direct_access&&this.remove_directAccessBar()),this._renderData(this._items_selectable))}},hasArrow:{set:function(a){a?(this._has_arrow=!0,this.addClassName("arrow")):(this._has_arrow=!1,this.removeClassName("arrow"))}},filters:{set:function(a){f.isArray(a)&&(this._filters=a,this.applyFilters(),this.refresh())},get:function(){return this._filters}}});q.List=w;q.AbstractListItem=K;q.DefaultListItem=
ca;q.SimpleListItem=ha;D.NORMAL_MODE=1;D.NATIVE_MODE=2;D.prototype={_mode:D.NORMAL_MODE,_data:null,_selected_item:null,_items:null,destructor:function(){this._mode===D.NATIVE_MODE?(j.removePointerListener(this.view,h.POINTER_START,this),j.removePointerListener(this.view,h.POINTER_END,this)):(this.nodeUnbind(this._select,"change"),this.nodeUnbind(this._select,"blur"));g.prototype.destructor.call(this)},update_gui_combo_box:function(){if(f.isArray(this._data))if(this._mode===D.NORMAL_MODE){f.removeAllElementChild(this._select);
this._items={};var a,b;for(a=0;a<this._data.length;a++)b=m.createElement("option"),b.appendChild(m.createTextNode(this._data[a])),this._items[this._data[a]]=b,this._select.appendChild(b);this._selected_item?this._select.value=this._selected_item:this._select.selectedIndex=0}else f.setElementInnerText(this._select,this._selected_item)},initComponent:function(){g.prototype.initComponent.call(this);o.cordova&&(o.deviceConfiguration.os===u.OS_IOS||o.deviceConfiguration.os===u.OS_ANDROID)&&o.plugins.combo_picker?
(this._mode=D.NATIVE_MODE,this._select=m.createElement("div"),this.view.appendChild(this._select),j.addPointerListener(this.view,h.POINTER_START,this),j.addPointerListener(this.view,h.POINTER_END,this)):(this._mode=D.NORMAL_MODE,this._select=m.createElement("select"),this.view.appendChild(this._select),this.nodeBind(this._select,"change"),this.nodeBind(this._select,"blur"));this.update_gui_combo_box()},handleEvent:function(a){a.preventDefault();a.stopPropagation();a.type===h.POINTER_START&&(this.setFocus(),
o.plugins.combo_picker.show(this,this._data,this._selected_item))},setFocus:function(){this._mode===D.NATIVE_MODE?this.addClassName("focus"):this._select.focus()},setBlur:function(){this._mode===D.NATIVE_MODE?this.removeClassName("focus"):this._select.blur()},notify:function(a){"change"===a.type?(this._selected_item=this._select.value,this.outPropertyChange(),this.propagate("change",this._selected_item)):"blur"===a.type&&o.scrollTo(0,0)}};f.extendClass(D,g);f.defineClassProperties(D,{selectedItem:{set:function(a){f.isString(a)&&
(this._selected_item=a,this._mode===D.NORMAL_MODE?this._selected_item?this._select.value=this._selected_item:this._select.selectedIndex=0:f.setElementInnerText(this._select,this._selected_item))},get:function(){return this._selected_item}},data:{set:function(a){f.isArray(a)&&(this._data=a.slice(),this.update_gui_combo_box())}}});q.ComboBox=D;U.prototype={_selected_index:-1,__inputs:null,__labels:null,clean_gui:function(){var a;this.__scroll_start=0;for(f.removeAllElementChild(this._list_items);this.__inputs.length;)a=
this.__inputs[0],j.removePointerListener(a,h.POINTER_START,this),a.removeEventListener("click",this),this.__inputs.remove(0),this.__labels.remove(0)},_renderData:function(){if(this._model){var a,b,c,d;if(this._list_items){this.clean_gui();this._selected_index=-1;for(a=0,d=this._model.length;a<d;a++)c=this._model.item(a),b=m.createElement("input"),b.type="radio",b.name=this._id,b.value=a,b.id=this._id+"_l"+a,this._list_items.appendChild(b),this.__inputs[a]=b,j.addPointerListener(b,h.POINTER_START,
this),b.addEventListener("click",this),b=m.createElement("label"),b.value=a,b.setAttribute("for",this._id+"_l"+a),j.addPointerListener(b,h.POINTER_START,this),b.addEventListener("click",this),f.setElementInnerText(b,c),this._list_items.appendChild(b),this.__labels[a]=b;this.refresh()}else console.error("vs.ui.RadioButton uncorrectly initialized.")}},_touchItemFeedback:function(a){var a=a.value,b=this.__labels[a];f.addClassName(this.__inputs[a],"pressed");f.addClassName(b,"pressed")},_untouchItemFeedback:function(a){var a=
a.value,b=this.__labels[a];f.removeClassName(this.__inputs[a],"pressed");f.removeClassName(b,"pressed")},_updateSelectItem:function(a){var b=parseInt(a.value);a._comp_&&a._comp_.didSelect&&a._comp_.didSelect();if(0<=b||b<this.__inputs.length)this.selectedIndex=b,this.outPropertyChange(),this.propagate("change",{index:this._selected_index,item:this._model.item(this._selected_index)})}};f.extendClass(U,G);f.defineClassProperty(U,"selectedIndex",{set:function(a){f.isNumber(a)||(a=parseInt(a));if(!isNaN(a)&&
!(0>a||a>this.__inputs.length-1)&&this.__inputs[a]){var b=this.__inputs[a];b&&(b.checked=!0);this._selected_index=a}},get:function(){return this._selected_index}});q.RadioButton=U;V.prototype={_selected_indexes:null,__inputs:null,__labels:null,selectItem:function(a){if(f.isNumber(a)&&!(0>a||a>=this.__inputs.length)){var b=this.__inputs[a];if(b){for(var c=0;c<this._selected_indexes.length;c++)if(this._selected_indexes[c]===a){this._selected_indexes.remove(c);b.checked=!1;return}this._selected_indexes.push(a);
b.checked=!0}}},clean_gui:function(){var a;this.__scroll_start=0;for(f.removeAllElementChild(this._list_items);this.__inputs.length;)a=this.__inputs[0],j.removePointerListener(a,h.POINTER_START,this),a.removeEventListener("click",this),this.__inputs.remove(0),this.__labels.remove(0)},_renderData:function(){if(this._model){var a,b,c,d;if(this._list_items){this._selected_indexes=[];this.clean_gui();for(a=0,b=this._model.length;a<b;a++)c=this._model.item(a),d=m.createElement("input"),d.type="checkbox",
d.name=this._id,d.id=this._id+"_l"+a,d.value=a,this._list_items.appendChild(d),this.__inputs[a]=d,j.addPointerListener(d,h.POINTER_START,this),d.addEventListener("click",this),d=m.createElement("label"),d.value=a,d.setAttribute("for",this._id+"_l"+a),j.addPointerListener(d,h.POINTER_START,this),d.addEventListener("click",this),f.setElementInnerText(d,c),this._list_items.appendChild(d),this.__labels[a]=d;this.selectedItem=this._selected_indexes}else console.error("vs.ui.CheckBox uncorrectly initialized.")}},
_touchItemFeedback:function(a){var a=a.value,b=this.__labels[a];f.addClassName(this.__inputs[a],"pressed");f.addClassName(b,"pressed")},_untouchItemFeedback:function(a){var a=a.value,b=this.__labels[a];f.removeClassName(this.__inputs[a],"pressed");f.removeClassName(b,"pressed")},_updateSelectItem:function(a){var b=parseInt(a.value);a._comp_&&a._comp_.didSelect&&a._comp_.didSelect();if(0<=b||b<this.__inputs.length){this.selectItem(b);this.outPropertyChange();items=[];for(i=0,l=this._selected_indexes.length;i<
l;i++)items.push(this._model.item(this._selected_indexes[i]));this.propagate("change",{indexes:this._selected_indexes.slice(),items:items})}}};f.extendClass(V,G);f.defineClassProperty(V,"selectedIndexes",{set:function(a){if(f.isArray(a)){var b,c;this._selected_indexes=[];for(c=0;c<a.length;c++)b=a[c],f.isNumber(b)&&this._selected_indexes.push(b);for(c=0;c<this.__inputs.length;c++)if(b=this.__inputs[c])b.checked=!1;a=this._selected_indexes.length;for(c=0;c<a;c++)if(b=this.__inputs[this._selected_indexes[c]])b.checked=
!0}},get:function(){return this._selected_indexes.slice()}});q.CheckBox=V;I.DEFAULT_STYLE="blue_style";I.BLACK_TRANSLUCIDE_STYLE="black_translucide_style";I.BLACK_STYLE="black_style";I.prototype={_hide_animation:null,_show_animation:null,_style:I.DEFAULT_STYLE,_states:null,_current_state:null,destructor:function(){g.prototype.destructor.call(this)},initComponent:function(){g.prototype.initComponent.call(this);this._hide_animation=o.deviceConfiguration.os==u.OS_SYMBIAN?new j.fx.Animation(["translateY",
"-50px"]):new j.fx.Animation(["translateY","-44px"]);this._show_animation=new j.fx.Animation(["translateY","0px"]);this.style=this._style},setStateItems:function(a,b){var c;if(a&&f.isString(a)&&b&&f.isArray(b))if(this._states[a]=b.slice(),this._current_state===a){for(key in this.__children)if(children=this.__children[key],f.isArray(children))for(c=0;c<children.length;c++)obj=children[c],0<=b.findItem(obj)||obj&&obj.hide&&obj.hide();else children.hide&&children.hide();for(c=0;c<b.length;c++)obj=b[c],
this.isChild(obj)||this.add(obj,"children"),obj.show()}else for(c=0;c<b.length;c++)obj=b[c],this.isChild(obj)||this.add(obj,"children")},getStateItems:function(a){return!a||!f.isString(a)?p:this._states[a]?this._states[a].slice():p},changeState:function(a,b){if(a){var c=0,d,e,g,h,j;this._current_state=a;(g=this._states[this._current_state])||(g=[]);d=g.length;for(j in this.__children)if(e=this.__children[j],f.isArray(e))for(c=0;c<e.length;c++)h=e[c],0<=g.findItem(h)||h&&h.hide&&h.hide();else e.hide&&
e.hide();for(c=0;c<d;c++){h=g[c];if(b&&b[h.id])for(j in e=b[h.id],e)j&&(h[j]=e[j]);h&&h.show()}}},handleEvent:function(a){var b=a.currentTarget;switch(a.type){case h.POINTER_START:f.addClassName(b,"active");j.addPointerListener(a.currentTarget,h.POINTER_END,this,!0);j.addPointerListener(a.currentTarget,h.POINTER_MOVE,this,!0);break;case h.POINTER_END:j.removePointerListener(a.currentTarget,h.POINTER_END,this);j.removePointerListener(a.currentTarget,h.POINTER_MOVE,this);setTimeout(function(){f.removeClassName(b,
"active")},200);this.propagate("buttonselect",a.currentTarget.spec);break;case h.POINTER_MOVE:a.preventDefault(),setTimeout(function(){f.removeClassName(b,"active")},200),j.removePointerListener(a.currentTarget,h.POINTER_END,this),j.removePointerListener(a.currentTarget,h.POINTER_MOVE,this)}},remove:function(a){var b,c;g.prototype.remove.call(this,a);for(b in this._states)c=this._states[b],-1!==c.indexOf(a)&&c.remove(a)}};f.extendClass(I,g);f.defineClassProperties(I,{style:{set:function(a){f.isString(a)&&
(this._style&&this.removeClassName(this._style),this._style=a,this.addClassName(this._style))},get:function(){return this._style}},position:{set:function(){},get:function(){return[this.view.offsetLeft,this.view.offsetTop]}},size:{set:function(){},get:function(){return[this.view.offsetWidth,this.view.offsetHeight]}}});q.NavigationBar=I;e.DEFAULT_STYLE="black_style";e.BLACK_TRANSLUCIDE_STYLE="black_translucide_style";e.BLUE_STYLE="blue_style";e.prototype={_hide_animation:null,_show_animation:null,_style:e.DEFAULT_STYLE,
_configuration:[],_items:null,_is_toggle_buttons:!0,__select_item:null,__active_item:null,destructor:function(){f.free(this._show_animation);f.free(this._hide_animation);this.removePointerRecognizer(this.recognizer);f.free(this.recognizer);g.prototype.destructor.call(this)},initComponent:function(){g.prototype.initComponent.call(this);this._hide_animation=new j.fx.Animation(["translateY","44px"]);this._show_animation=new j.fx.Animation(["translateY","0px"]);this.style=this._style;this.recognizer=
new P(this);this.addPointerRecognizer(this.recognizer)},didTouch:function(a,b,c){if((a=c.target._comp_)&&a!==this.__select_item)this.__active_item=a,this.__active_item.addClassName("active")},didUntouch:function(){this.__active_item&&(this.__active_item.removeClassName("active"),this.__active_item=null)},didTap:function(a,b,c,d){if(a=d.target._comp_)this.selectedId=a.id,this.outPropertyChange()},addButton:function(a,b,c){if(!this._items[a]){var d=new e.Button({id:a});d.init();c&&(d.label=c);d.name=
b;this.add(d,"children");return this._items[a]=d}},addItem:function(a){a&&!this._items[a.id]&&(this.add(a,"children"),this._items[a.id]=a)},removeItem:function(a){var b=this._items[a];if(b){try{this.remove(b)}catch(c){c.stack&&console.log(c.stack)}delete this._items[a]}}};f.extendClass(e,g);f.defineClassProperties(e,{style:{set:function(a){f.isString(a)&&(this._style&&this.removeClassName(this._style),this._style=a,this.addClassName(this._style))},get:function(){return this._style}},configuration:{set:function(a){if(f.isArray(a)){var b,
c;this._configuration=a;for(b in this._items)this.removeItem(b);for(b=0;b<a.length;b++)c=a[b],this.addButton(c[0],c[1],c[2])}}},isToggleButtons:{set:function(a){this._is_toggle_buttons=a?!0:!1},get:function(){return this._is_toggle_buttons}},selectedId:{set:function(a){var b=this._items[a],c=this;b&&this.__select_item!==b&&(this.__remove_time_out&&(clearTimeout(this.__remove_time_out),this.__remove_time_out=0),this.__select_item&&this.__select_item.removeClassName("select"),this.__select_item=b,b.addClassName("select"),
this._is_toggle_buttons||(this.__remove_time_out=setTimeout(function(){c.__select_item.removeClassName("select");c.__select_item=null;c.__remove_time_out=0},g.UNSELECT_DELAY)),this.propagate("itemselect",a),this._selected_id=a)},get:function(){return this._selected_id}}});e.Text=function(a){this.parent=g;this.parent(a);this.constructor=e.Text};e.Text.prototype={_text:"",initComponent:function(){this.__config__||(this.__config__={});this.__config__.id=this.id;this.__config__.node||(this.__config__.node=
m.createElement("div"),this.__config__.node.className="vs_ui_toolbar_text");g.prototype.initComponent.call(this);this._text_view=m.createElement("div");this._text_view.className="text_view";this.view.appendChild(this._text_view)}};f.extendClass(e.Text,g);f.defineClassProperty(e.Text,"text",{set:function(a){if(null===a||"undefined"===typeof a)a="";else if(f.isNumber(a))a=""+a;else if(!f.isString(a)){if(!a.toString)return;a=a.toString()}this._text=a;this._text_view&&f.setElementInnerText(this._text_view,
this._text)},get:function(){return this._text}});e.Button=function(a){this.parent=g;this.parent(a);this.constructor=e.Button};e.Button.prototype={_name:"",_label:"",initComponent:function(){this.__config__||(this.__config__={});this.__config__.id=this.id;this.__config__.node||(this.__config__.node=m.createElement("div"),this.__config__.node.className="vs_ui_toolbar_button");g.prototype.initComponent.call(this)},setImage:function(a){this.view.style.backgroundImage="url("+a+")"}};f.extendClass(e.Button,
g);f.defineClassProperties(e.Button,{name:{set:function(a){f.isString(a)&&(this._name=a,this.addClassName(this._name))},get:function(){return this._name}},label:{set:function(a){f.isString(a)&&(this._label=a,f.setElementInnerText(this.view,a),a?this.setStyle("background-position","center 0px"):this.setStyle("background-position","center"))},get:function(){return this._label}}});e.BUTTON_ADD="add";e.BUTTON_ARROW_DOWN="arrow_down";e.BUTTON_ARROW_LEFT="arrow_left";e.BUTTON_ARROW_RIGHT="arrow_right";
e.BUTTON_ARROW_UP="arrow_up";e.BUTTON_ATTACH="attach";e.BUTTON_AUCTION="auction";e.BUTTON_BELL_OFF="bell_off";e.BUTTON_BELL="bell";e.BUTTON_BLOG="blog";e.BUTTON_BOOK_MARKED="book_marked";e.BUTTON_BOOK="book";e.BUTTON_BOOKMARK_ADD="bookmark_add";e.BUTTON_BOORMARK="bookmark";e.BUTTON_BOX_FULL="box_full";e.BUTTON_BOX_MAIL="box_mail";e.BUTTON_BOX="box";e.BUTTON_BRIGHTNESS="brightness";e.BUTTON_BRUSH="brush";e.BUTTON_BULB_OFF="bulb_off";e.BUTTON_BULB_ON="bulb_on";e.BUTTON_BUZZER="buzzer";e.BUTTON_CALCULATOR=
"calculator";e.BUTTON_CALENDAR="calendar";e.BUTTON_CALL="call";e.BUTTON_CANCEL="cancel";e.BUTTON_CASE="case";e.BUTTON_CHECKMARK="checkmark";e.BUTTON_CIRCLE_ARROW_LEFT="circle_arrow_left";e.BUTTON_CIRCLE_ARROW_RIGHT="circle_arrow_right";e.BUTTON_COMMAND_LINE="command_line";e.BUTTON_COMMENT_ADD="command_add";e.BUTTON_COMMENT_DELETE="command_delete";e.BUTTON_COMMENT_OK="command_ok";e.BUTTON_COMPUTER_OFF="computer_off";e.BUTTON_COMPUTER_ON="computer_on";e.BUTTON_CONSTRAST="contrast";e.BUTTON_CONTROL_1=
"controls_1";e.BUTTON_CONTROL_2="controls_2";e.BUTTON_CONTROL_3="controls_3";e.BUTTON_CONTROL_4="controls_4";e.BUTTON_CONTROL_5="controls_5";e.BUTTON_CONTROL_6="controls_6";e.BUTTON_CONTROL_7="controls_7";e.BUTTON_CONTROL_8="controls_8";e.BUTTON_COPY="copy";e.BUTTON_COURT="court";e.BUTTON_CREDIT_CARD="credit_card";e.BUTTON_CUT="cut";e.BUTTON_DANGER="danger";e.BUTTON_DELETE="delete";e.BUTTON_DISK="disk";e.BUTTON_DOCUMENT_BLANK="document_blank";e.BUTTON_DOCUMENT="document";e.BUTTON_DOLLAR="dollar";
e.BUTTON_DOWNLAOD="download";e.BUTTON_ERROR="error";e.BUTTON_FAVORITIES_ADD="favorities_add";e.BUTTON_FAVORITIES_REMOVE="favorities_remove";e.BUTTON_FAVORITIES="favorities";e.BUTTON_FILM="film";e.BUTTON_FILMING="filming";e.BUTTON_FIRST_AID="first_aid";e.BUTTON_FLAG_BIS="flag_1";e.BUTTON_FLAG="flag";e.BUTTON_FLASH_ARROW="flash_arrow";e.BUTTON_FLASH="flash";e.BUTTON_FOLDER_BOOKMARCK="folder_bookmark";e.BUTTON_FOLDER_GOTO="folder_goto";e.BUTTON_FOLDER="folder";e.BUTTON_FONT_CAPITAL="font_capital";e.BUTTON_FONT_ITALIC=
"font_italic";e.BUTTON_FONT_REGULAR="font_regular";e.BUTTON_FONT_UNDERLINE="font_undeline";e.BUTTON_FONT="font";e.BUTTON_FONTS="fonts";e.BUTTON_FORUM="forum";e.BUTTON_FRAME="frame";e.BUTTON_GRAPH_AREAS="graph_areas";e.BUTTON_GRAPH_BARS_DOWN="graph_bars_down";e.BUTTON_GRAPH_BARS_UP="graph_bars_up";e.BUTTON_GRAPH_BARS="graph_bars";e.BUTTON_GRAPH_DOWN="graph_down";e.BUTTON_GRAPH_LINES="graph_lines";e.BUTTON_GRAPH_UP="graph_up";e.BUTTON_HAT="hat";e.BUTTON_HELP="help";e.BUTTON_HOME="home";e.BUTTON_INFORMATION=
"information";e.BUTTON_KEY="key";e.BUTTON_KEYBOARD="keyboard";e.BUTTON_LAPTOP="laptop";e.BUTTON_LINK="links";e.BUTTON_LIST_BULLETS="bullets";e.BUTTON_LIST_NUMBERS="list_numbers";e.BUTTON_LOCK="lock";e.BUTTON_MAGNIFY_GLASS="magnify_glass";e.BUTTON_MAIL="mail";e.BUTTON_MANAGE="manage";e.BUTTON_MEASURE="measure";e.BUTTON_MEASURES="measures";e.BUTTON_MIC_BIS="mic_bis";e.BUTTON_MIC="mic";e.BUTTON_MINUS="minus";e.BUTTON_MUTE="mute";e.BUTTON_PAINT="pain";e.BUTTON_PAPER_PLANE="paper_plane";e.BUTTON_PAPER_TRASH=
"paper_trash";e.BUTTON_PAPERCLIO="paperclio";e.BUTTON_PARAGRAPH="paragraph";e.BUTTON_PENCIL="pencil";e.BUTTON_PHOTO="photo";e.BUTTON_PIECHART="113";e.BUTTON_POST="post";e.BUTTON_PROFILE="profile";e.BUTTON_REFRESH="refresh";e.BUTTON_RESIZE="resize";e.BUTTON_RSS="rss";e.BUTTON_SAD_FACE="sade_face";e.BUTTON_SAFE="safe";e.BUTTON_SAVE="save";e.BUTTON_SETTINGS="settings";e.SHOPPING_BAG="shopping_bag";e.SHOPPING_CART="shopping_cart";e.SHOPPING_HEAVY="shopping_heavy";e.SIM="sim";e.SMILE_FACE="smile_face";
e.SORT_AZ="sort_az";e.SORT_ZA="sort_za";e.STAR="star";e.STORAGE="storage";e.SWITCH="switch";e.TAG_ADD="tag_add";e.TAG_CANCEL="tag_cancel";e.TAG_DELETE="tag_delete";e.TAG="tag";e.TEXT_ALIGN_CENTER="text_align_center";e.TEXT_ALIGN_JUSTIFY="text_align_justify";e.TEXT_ALIGN_LEFT="text_align_left";e.TEXT_ALIGN_RIGHT="text_align_right";e.TIME="time";e.TIMER="timer";e.TRASH="trash";e.TWG="twg";e.UNLOCK="unlock";e.UPLOAD="upload";e.USER="user";e.USERS="users";e.VOLUME_DOWN="volume_down";e.VOLUME_UP="volume_up";
e.VOLUME="volume";e.WALLET="wallet";e.WARNING="warning";e.WIFI="wifi";e.WINDOW_ERROR="window_error";e.WINDOW_GLOBE="window_globe";e.WINDOW_LOCK="window_lock";e.WINDOW="window";e.ZOOM_IN="zoom_in";e.ZOMM_OUT="zoom_out";q.ToolBar=e;W.prototype={_text:"",destructor:function(){g.prototype.destructor.call(this)},initComponent:function(){g.prototype.initComponent.call(this);this._text&&f.setElementInnerText(this.view,this._text)}};f.extendClass(W,g);f.defineClassProperty(W,"text",{set:function(a){if(null===
a||"undefined"===typeof a)a="";else if(f.isNumber(a))a=""+a;else if(!f.isString(a)){if(!a.toString)return;a=a.toString()}this._text=a;this.view&&f.setElementInnerText(this.view,this._text)},get:function(){return this._text}});q.TextLabel=W;A.prototype={canvas_ctx:null,canvas_node:null,destructor:function(){g.prototype.destructor.call(this)},initComponent:function(){g.prototype.initComponent.call(this);if(this.canvas_node=this.view.firstChild)this.canvas_ctx=this.canvas_node.getContext("2d"),this.canvas_node.width=
this._size[0],this.canvas_node.height=this._size[1],this.draw(0,0,this._size[0],this._size[1])},getContext:function(){return this.canvas_ctx},c_drawRect:function(a,b,c,d,f,e){if(4===arguments.length)this.c_rect(a,b,c,d).stroke();else if(e){Math.sin(e);Math.cos(e);var g=[a,b],h=this.rotatePoint(c,0,e);g.push(a+h[0],b+h[1]);h=this.rotatePoint(c,d,e);g.push(a+h[0],b+h[1]);h=this.rotatePoint(0,d,e);g.push(a+h[0],b+h[1]);f&&g.push(f);this.c_polygon.apply(this,g)}else this.c_polygon(a,b,a+c,b,a+c,b+d,a,
b+d,f);return this},rotatePoint:function(a,b,c){return[a*Math.cos(c)-b*Math.sin(c),b*Math.cos(c)+a*Math.sin(c)]},c_polygon:function(){if(6>arguments.length)throw Error("not enough arguments");var a,b,c,d;this.c_beginPath();if(0===arguments.length%2){this.c_moveTo(arguments[0],arguments[1]);for(a=2;a<arguments.length;a+=2)this.c_lineTo(arguments[a],arguments[a+1])}else{b=arguments[arguments.length-1];c=(arguments.length-1)/2;a=(arguments[2*c-2]+arguments[0])/2;d=(arguments[2*c-1]+arguments[1])/2;this.c_moveTo(a,
d);for(a=0;a<c-1;a++)this.c_arcTo(arguments[2*a],arguments[2*a+1],arguments[2*a+2],arguments[2*a+3],b);this.c_arcTo(arguments[2*c-2],arguments[2*c-1],arguments[0],arguments[1],b)}this.c_closePath();this.c_moveTo(arguments[0],arguments[1]);this.c_stroke();return this},c_ellipse:function(a,b,c,d,f,e,g,h){f===p&&(f=0);e===p&&(e=0);g===p&&(g=2*Math.PI);h===p&&(h=!1);var j=this.rotatePoint(c*Math.cos(e),d*Math.sin(e),f),m=a+j[0],j=b+j[1];this.rotatePoint(c*Math.cos(g),d*Math.sin(g),f);this.c_moveTo(m,
j);this.c_translate(a,b);this.c_rotate(f);this.c_scale(c/d,1);this.c_arc(0,0,d,e,g,h);this.c_scale(d/c,1);this.c_rotate(-f);this.c_translate(-a,-b);this.c_stroke();return this},load:function(a){var b=o.innerWidth-25;this.__iframe=m.createElement("iframe");this.__iframe.id="canvas_load_iframe";this.__iframe.height="10px";this.__iframe.width=b+"px";this.__iframe.style.visibility="hidden";this.__iframe.src=a;this.nodeBind(this.__iframe,"load","remotePageLoaded");m.body.appendChild(this.__iframe)},remotePageLoaded:function(){var a=
this.__iframe.contentWindow,b=o.innerWidth-25,c=o.innerHeight;this.c_clearRect(0,0,this._size[0],this._size[1]);this.c_save();this.c_scale(this._size[0]/b,this._size[1]/c);this.canvas_ctx.drawWindow(a,0,0,b,c,"rgb(255,255,255)");this.c_restore()},draw:function(a,b,c,d){a||(a=0);b||(b=0);c||(c=this._size[0]);d||(d=this._size[1]);this.c_clearRect(a,b,c,d);this.c_lineWidth=3;this.c_shadowColor="white";this.c_shadowBlur=1;for(var f,e,g,a=0;10>a;a++)this.c_strokeStyle="rgb("+Math.floor(255*Math.random())+
","+Math.floor(255*Math.random())+","+Math.floor(255*Math.random())+")",b=Math.floor(Math.random()*c),f=Math.floor(Math.random()*d),e=Math.floor(Math.random()*c),g=Math.floor(Math.random()*d),this.c_beginPath(),this.c_moveTo(b,f),this.c_lineTo(e,g),this.c_closePath(),this.c_stroke()}};f.extendClass(A,g);A.methods="arc,arcTo,beginPath,bezierCurveTo,clearRect,clip,closePath,createImageData,createLinearGradient,createRadialGradient,createPattern,drawFocusRing,drawImage,fill,fillRect,fillText,getImageData,isPointInPath,lineTo,measureText,moveTo,putImageData,quadraticCurveTo,rect,restore,rotate,save,scale,setTransform,stroke,strokeRect,strokeText,transform,translate".split(",");
A.props="canvas,fillStyle,font,globalAlpha,globalCompositeOperation,lineCap,lineJoin,lineWidth,miterLimit,shadowOffsetX,shadowOffsetY,shadowBlur,shadowColor,strokeStyle,textAlign,textBaseline".split(",");A.setup=function(){var a,b;for(a=0;a<A.methods.length;a++)b=A.methods[a],A.prototype["c_"+b]=function(a){return function(){this.canvas_ctx[a].apply(this.canvas_ctx,arguments);return this}}(b);for(a=0;a<A.props.length;a++){b=A.props[a];var c={enumerable:!0};c.set=function(a){return function(b){this.canvas_ctx[a]=
b}}(b);c.get=function(a){return function(){return this.canvas_ctx[a]}}(b);f.defineProperty(A.prototype,"c_"+b,c)}};A.setup();f.defineClassProperty(A,"size",{set:function(a){if(a&&f.isArray(a)&&2===a.length&&f.isNumber(a[0])&&f.isNumber(a[1])&&(this._size[0]=a[0],this._size[1]=a[1],this.view)){this._updateSizeAndPos();if(!this.canvas_node){this.canvas_node=this.view.firstChild;if(!this.canvas_node){console.error("Uncompatible canvas view");return}this.canvas_ctx=this.canvas_node.getContext("2d")}this.canvas_node.width=
this._size[0];this.canvas_node.height=this._size[1];this.draw(0,0,this._size[0],this._size[1])}},get:function(){this.view&&this.view.parentNode&&(this._size[0]=this.view.offsetWidth,this._size[1]=this.view.offsetHeight);return this._size.slice()}});q.Canvas=A;E.BORDER_WIDTH_IOS=5;E.BORDER_WIDTH_ANDROID=5;E.BORDER_WIDTH_WP7=0;E.BORDER_WIDTH_SYMBIAN=0;E.BORDER_WIDTH_BB=1;E.prototype={__inner_view:null,_index:0,_indeterminate:!1,_range:null,__border_width:0,destructor:function(){g.prototype.destructor.call(this)},
_updateSize:function(){f.setElementSize(this.view,this._size[0],this._size[1]);this.index=this._index},initComponent:function(){g.prototype.initComponent.call(this);this.__inner_view=this.view.firstElementChild;this.indeterminate=this._indeterminate;var a=o.deviceConfiguration.os;a==u.OS_ANDROID?this.__border_width=2*E.BORDER_WIDTH_ANDROID:a==u.OS_IOS?this.__border_width=2*E.BORDER_WIDTH_IOS:a==u.OS_WP7?this.__border_width=2*E.BORDER_WIDTH_WP7:a==u.OS_SYMBIAN?this.__border_width=2*E.BORDER_WIDTH_SYMBIAN:
a==u.OS_BLACK_BERRY&&(this.__border_width=2*E.BORDER_WIDTH_BB);this.index=this._index},refresh:function(){this.index=this._index;g.prototype.refresh.call(this)}};f.extendClass(E,g);f.defineClassProperties(E,{index:{set:function(a){if(f.isNumber(a)&&(this._index=a,this.__inner_view)){var b=this.size[0],b=b-this.__border_width,a=b*(this._index-this._range[0])/(this._range[1]-this._range[0]);a>b&&(a=b);0>a&&(a=0);b=o.deviceConfiguration.os;this.__inner_view.style.width=b===u.OS_ANDROID||b===u.OS_IOS?
a+this.__border_width+"px":a+"px"}},get:function(){return this._index}},range:{set:function(a){if(f.isArray(a)&&2===a.length&&f.isNumber(a[0])&&f.isNumber(a[1])&&!(a[0]===a[1]||a[0]>a[1]))this._range[0]=a[0],this._range[1]=a[1],this.index=this._index},get:function(){return this._range.slice()}},indeterminate:{set:function(a){a?(this._indeterminate=!0,this.view&&f.addClassName(this.view,"indeterminate")):(this._indeterminate=!1,this.view&&f.removeClassName(this.view,"indeterminate"))},get:function(){return this._indeterminate}}});
q.ProgressBar=E;J.HORIZONTAL=0;J.VERTICAL=1;J.prototype={_orientation:J.HORIZONTAL,_value:0,_range:null,__v:0,__drag_x:0,__drag_y:0,__handle:null,__handle_width:0,__handle_delta:10,destructor:function(){this.__drag_recognizer&&(this.removePointerRecognizer(this.__drag_recognizer),this.__drag_recognizer=null);g.prototype.destructor.call(this)},initComponent:function(){g.prototype.initComponent.call(this);var a=j.ui.View.getDeviceCSSCode();a==n.CSS_IOS?this.__handle_width=28:a==n.CSS_WP7?this.__handle_width=
30:a==n.CSS_ANDROID?this.__handle_width=34:a==n.CSS_BLACKBERRY?(this.__handle_width=35,this.__handle_height=12,this.__handle_delta=3):this.__handle_width=23;this.__handle=this.view.querySelector(".handle");j.addPointerListener(this.__handle,h.POINTER_START,this,!0);this.__drag_recognizer||(this.__drag_recognizer=new R(this),this.addPointerRecognizer(this.__drag_recognizer));this.orientation=this._orientation;this.value=this._value},didDragStart:function(a){if(0!==a.targetPointerList.length){this.__handle_width=
this.__handle.offsetWidth;this.__handle_x=this.__handle.offsetLeft;this.__handle_y=this.__handle.offsetTop;this.__abs_pos=j.util.getElementAbsolutePosition(this.view);var b=a.targetPointerList[0].pageX-this.__abs_pos.x,a=a.targetPointerList[0].pageY-this.__abs_pos.y;this.value=0===this._orientation?this._range[0]+(this._range[1]-this._range[0])*b/this.view.offsetWidth:this._range[0]+(this._range[1]-this._range[0])*a/this.view.offsetHeight;this.__v=this._value;this.outPropertyChange();this.propagate("continuous_change",
this._value);this.propagate("change",this._value)}},didDrag:function(a,b){if(0!==b.targetPointerList.length){var c=b.targetPointerList[0].pageX-this.__abs_pos.x,d=b.targetPointerList[0].pageY-this.__abs_pos.y;this.value=0===this._orientation?this._range[0]+(this._range[1]-this._range[0])*c/this.view.offsetWidth:this._range[0]+(this._range[1]-this._range[0])*d/this.view.offsetHeight;this.outPropertyChange();this.propagate("continuous_change",this._value)}},didDragEnd:function(){this.propagate("change",
this._value)},refresh:function(){this.__handle_width=this.__handle.offsetWidth;this.__handle_delta=0===this._orientation?this.view.offsetHeight:this.view.offsetWidth;this.value=this._value;g.prototype.refresh.call(this)}};f.extendClass(J,g);f.defineClassProperties(J,{value:{set:function(a){var b,c;if(!isNaN(a)){a<this._range[0]&&(a=this._range[0]);a>this._range[1]&&(a=this._range[1]);this._value=a;var d=this.__handle_width/2,f=0,f=o.deviceConfiguration.os===u.OS_BLACK_BERRY?(this.__handle_height-
this.__handle_delta)/2:(this.__handle_width-this.__handle_delta)/2;0===this._orientation?(c=this.view.offsetWidth,b=Math.floor((a-this._range[0])*c/(this._range[1]-this._range[0]))-d,L?C(this.__handle,"translate3d("+b+"px,-"+f+"px,0)"):C(this.__handle,"translate("+b+"px,-"+f+"px)"),this.view.style.backgroundSize=b+d+"px 10px"):(b=this.view.offsetHeight,c=Math.floor((a-this._range[0])*b/(this._range[1]-this._range[0]))-d,L?C(this.__handle,"translate3d(-"+f+"px,"+c+"px,0)"):C(this.__handle,"translate(-"+
f+"px,"+c+"px)"),this.view.style.backgroundSize="10px "+(c+d)+"px")}},get:function(){return this._value}},range:{set:function(a){if(f.isArray(a)&&2===a.length&&f.isNumber(a[0])&&f.isNumber(a[1])&&!(a[0]===a[1]||a[0]>a[1]))this._range[0]=a[0],this._range[1]=a[1],this.value=this._value},get:function(){return this._range.slice()}},orientation:{set:function(a){a!==J.HORIZONTAL&&a!==J.VERTICAL||(this._orientation=a,0===this._orientation?(this.removeClassName("vertical"),this.addClassName("horizontal")):
(this.addClassName("vertical"),this.removeClassName("horizontal")),this.value=this._value)},get:function(){return this._orientation}},size:{set:function(a){a&&f.isArray(a)&&2===a.length&&f.isNumber(a[0])&&f.isNumber(a[1])&&(this._size[0]=a[0],this._size[1]=a[1],this.view&&(this._updateSizeAndPos(),this.value=this._value))},get:function(){this.view&&this.view.parentNode&&(this._size[0]=this.view.offsetWidth,this._size[1]=this.view.offsetHeight);return this._size.slice()}}});q.Slider=J;X.prototype=
{_src:null,destructor:function(){this.view&&(this.view.src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=");g.prototype.destructor.call(this)},initComponent:function(){g.prototype.initComponent.call(this);this.view.ondragstart=function(a){a.preventDefault();return!1};this.view.src?this._src=this.view.getAttribute("src"):this.view.src=this._src;this.view.setAttribute("width","100%");this.view.setAttribute("height","100%")}};f.extendClass(X,g);f.defineClassProperties(X,{src:{set:function(a){f.isString(a)&&
(this._src=a,this.view&&(this.view.src=this._src))},get:function(){return this._src}},size:{set:function(a){if(f.isArray(a)||2===a.length||f.isNumber(a[0])&&f.isNumber(a[1]))this.view&&(this.view.setAttribute("width",a[0]),this.view.setAttribute("height",a[1])),this._size[0]=a[0],this._size[1]=a[1],this._updateSizeAndPos()},get:function(){this.view&&this.view.parentNode&&(this._size[0]=this.view.offsetWidth,this._size[1]=this.view.offsetHeight);return this._size.slice()}}});q.ImageView=X;F.TEXT="text";
F.PASSWORD="password";F.SEARCH="search";F.prototype={_text_field:null,_clear_button:null,_value:"",_placeholder:"type ...",_type:F.TEXT,destructor:function(){this._text_field.removeEventListener("focus",this);this._text_field.removeEventListener("blur",this);this._text_field.removeEventListener("change",this);this._text_field.removeEventListener("input",this);this._clear_button&&this.nodeUnbind(this._clear_button,h.POINTER_START,"cleanData");delete this._text_field;g.prototype.destructor.call(this)},
initComponent:function(){g.prototype.initComponent.call(this);this._text_field=this.view.querySelector("input");this._text_field.name=this.id;(this._clear_button=this.view.querySelector(".clear_button"))&&this.nodeBind(this._clear_button,h.POINTER_START,"cleanData");this.type=this._type;this.value=this._value;this.placeholder=this._placeholder;this._text_field.addEventListener("focus",this);this._text_field.addEventListener("blur",this);this._text_field.addEventListener("change",this);this._text_field.addEventListener("input",
this)},cleanData:function(){this._value=this._text_field.value="";this._activateDelete(!1);this.outPropertyChange();this.propagate("continuous_change",this._value);this.propagate("change",this._value)},changeData:function(){(this._value=this._text_field.value)?this._activateDelete(!0):this._activateDelete(!1)},_activateDelete:function(a){this._clear_button&&(a?f.setElementVisibility(this._clear_button,!0):f.setElementVisibility(this._clear_button,!1))},onkeydown:function(a){var a=fixEvent(a),b=a.target;
if(a.keyCode===TAB||a.keyCode===ENTER)return b.blur(),!1},setFocus:function(){this._text_field.focus()},setBlur:function(){this._text_field.blur()},setPointerEvents:function(a){this._text_field.style.pointerEvents=a?"none":"auto"},_didEnable:function(){this._enable?this._text_field.removeAttribute("disabled"):this._text_field.setAttribute("disabled",!0)},handleEvent:function(a){function b(a){a.target===c.view||a.target===c._text_field||(a.target===c._clear_button?(c.cleanData(),a.stopPropagation(),
a.preventDefault()):(j.removePointerListener(m,h.POINTER_START,b,!0),c.setBlur()))}var c=this;"change"===a.type?(this.changeData(),this.outPropertyChange(),this.propagate("change",this._value)):"input"===a.type?(this.changeData(),this.outPropertyChange(),this.propagate("continuous_change",this._value)):"focus"===a.type?(this.addClassName("focus"),(this._value=this._text_field.value)?this._activateDelete(!0):this._activateDelete(!1),j.addPointerListener(m,h.POINTER_START,b,!0),this.propagate("focus")):
"blur"===a.type&&(this.removeClassName("focus"),this._activateDelete(!1),o.scrollTo(0,0),this.propagate("blur"))}};f.extendClass(F,g);f.defineClassProperties(F,{value:{set:function(a){if(null===a||"undefined"===typeof a)a="";else if(f.isNumber(a))a=""+a;else if(!f.isString(a)){if(!a.toString)return;a=a.toString()}this._value=a;this._text_field&&(this._text_field.value=this._value,!this._value||""===this._value?this._activateDelete(!1):this._activateDelete(!0))},get:function(){return this._value=this._text_field.value}},
type:{set:function(a){!(a!==F.TEXT&&a!==F.PASSWORD&&a!==F.SEARCH)&&this.view&&(this.removeClassName(this._type),this._type=a,this.addClassName(this._type),this._text_field&&(this._type===F.PASSWORD?this._text_field.setAttribute("type","password"):this._type===F.SEARCH?this._text_field.setAttribute("type","search"):this._text_field.setAttribute("type","text")))}},placeholder:{set:function(a){if(null===a||"undefined"===typeof a)a="";else if(f.isNumber(a))a=""+a;else if(!f.isString(a)){if(!a.toString)return;
a=a.toString()}this._placeholder=a;this._text_field&&this._text_field.setAttribute("placeholder",this._placeholder)}}});q.InputField=F;v.BELOW=0;v.ABOVE=1;v.LEFT=2;v.RIGHT=3;v.prototype={_point_position:null,_has_footer:!1,_has_header:!1,initComponent:function(){g.prototype.initComponent.call(this);this._arrow=this.view.querySelector(".vs_ui_popover >.arrow");this.__show_clb=this._endShowConfiguration},_endShowConfiguration:function(){var a,b,c,d,e;e=this.size;var g=o.innerHeight,h=o.innerWidth;if("undefined"!==
typeof this.__direction&&this._point_position){a=this._point_position[0]-e[0]/2;b=this._point_position[1]-e[1]/2;c=e[0];d=e[1];this.__direction!==v.BELOW&&this.__direction!==v.ABOVE&&this.__direction!==v.RIGHT&&this.__direction!==v.LEFT&&(this.__direction=this._point_position[0]>h/2?v.RIGHT:v.LEFT,this._point_position[1]+d+30<g?this.__direction=v.BELOW:0<this._point_position[1]-d-30&&(this.__direction=v.ABOVE));switch(this.__direction){case v.BELOW:b=b+e[1]/2+15;5>a&&(a=5);a+c>h&&(a=h-c-5);this._arrow.className=
"arrow top";e=this._point_position[0]-a-15-8;this._arrow.style.left="5px";this._arrow.style.right="5px";this._arrow.style["-webkit-mask-position-x"]=e+"px";this._arrow.style["-webkit-mask-position-y"]="0px";break;case v.ABOVE:b=b-e[1]/2-15;5>a&&(a=5);a+c>h&&(a=h-c-5);this._arrow.className="arrow bottom";e=this._point_position[0]-a-15-8;this._arrow.style.left="5px";this._arrow.style.right="5px";this._arrow.style["-webkit-mask-position-x"]=e+"px";this._arrow.style["-webkit-mask-position-y"]="0px";break;
case v.RIGHT:a=a-e[0]/2-15;5>b&&(b=5);b+d>g-20&&(b=g-d-20);this._arrow.className="arrow right";e=d-(this._point_position[1]-b+15)-2;this._arrow.style.left="auto";this._arrow.style.right="-13px";this._arrow.style["-webkit-mask-position-x"]="0px";this._arrow.style["-webkit-mask-position-y"]=e+"px";break;case v.LEFT:a=a+e[0]/2+15,5>b&&(b=5),b+d>g-20&&(b=g-d-20),this._arrow.className="arrow left",e=this._point_position[1]-b-15-2,this._arrow.style.left="-13px",this._arrow.style.right="auto",this._arrow.style["-webkit-mask-position-x"]=
"0px",this._arrow.style["-webkit-mask-position-y"]=e+"px"}this.position=(e=f.getElementAbsolutePosition(this.view.parentElement))?[a-e.x,b-e.y]:[a,b];this.size=[c,d]}this.redraw()},show:function(a,b,c){this.view&&!this._visible&&(this._point_position=a&&f.isArray(a)&&2===a.length&&f.isNumber(a[0])&&f.isNumber(a[1])?a.slice():null,this.__direction=b,this.view.style.setProperty("display","block",null),this.__view_display=p,this.__is_hidding=!1,this.__is_showing=!0,this._show_animation?this._show_animation.process(this,
function(){this._show_object(c)},this):this._show_object(c),j.addPointerListener(m,h.POINTER_START,this,!0))},handleEvent:function(a){this.childOf(a.target,this.view)||(a.preventDefault(),a.stopPropagation(),this.hide())},childOf:function(a,b){if(a===b)return!0;for(a=a.parentElement;a;){if(a===b)return!0;a=a.parentElement}return!1},hide:function(){this.view&&(g.prototype.hide.call(this),j.removePointerListener(m,h.POINTER_START,this,!0),this.view.style.display="none")}};f.extendClass(v,g);f.defineClassProperties(v,
{hasFooter:{set:function(a){this._has_footer=a?!0:!1;this.view&&this._has_footer&&this.addClassName("withFooter");this.view&&!this._has_footer&&this.removeClassName("withFooter")},get:function(){return this._has_footer}},hasHeader:{set:function(a){this._has_header=a?!0:!1;this.view&&this._has_header&&this.addClassName("withHeader");this.view&&!this._has_header&&this.removeClassName("withHeader")},get:function(){return this._has_header}}});q.PopOver=v;Y.prototype={__tap_recognizer:null,__switch_translate:0,
_selected:!1,_toggled:!0,_mode:n.CSS_DEFAULT,__toggle_on_view:null,__toggle_off_view:null,__switch_view:null,_text_on:"",_text_off:"",didTouch:function(){this.addClassName("pressed");this._selected=!0},didUntouch:function(){this.removeClassName("pressed");this._selected=!1},_setToggle:function(a){var b=this;b._toggled=a?!0:!1;j.scheduleAction(function(){b._initWidthSwitch();b._toggled?(b.addClassName("on"),b._mode===n.CSS_PURE?f.setElementTransform(b.__switch_view,"translate3d(-15px,0,0)"):b._mode!==
n.CSS_ANDROID?f.setElementTransform(b.__switch_view,"translate3d("+b.__switch_translate+"px,0,0)"):b._mode===n.CSS_ANDROID&&f.setElementTransform(b.__switch_view,"translate3d(0,0,0)")):(b.removeClassName("on"),f.setElementTransform(b.__switch_view,"translate3d(0,0,0)"));b.outPropertyChange()})},viewDidAdd:function(){g.prototype.viewDidAdd.call(this);this._setToggle(this._toggled)},refresh:function(){g.prototype.refresh.call(this);this._mode=j.ui.View.getDeviceCSSCode();this._setToggle(this._toggled)},
didTap:function(){this._setToggle(!this._toggled);this.propagate("change",this._toggled)},destructor:function(){this.__tap_recognizer&&(this.removePointerRecognizer(this.__tap_recognizer),this.__tap_recognizer=null);g.prototype.destructor.call(this)},initComponent:function(){g.prototype.initComponent.call(this);this.__toggle_on_view=this.view.querySelector(".vs_ui_switch .toggle_on");this.__toggle_off_view=this.view.querySelector(".vs_ui_switch .toggle_off");this.__switch_view=this.view.querySelector(".vs_ui_switch .switch");
this.__tap_recognizer||(this.__tap_recognizer=new P(this),this.addPointerRecognizer(this.__tap_recognizer));this._mode=j.ui.View.getDeviceCSSCode();this._text_on&&(this.textOn=this._text_on);this._text_off&&(this.textOff=this._text_off);this.toggled=this._toggled},_initWidthSwitch:function(){this.__switch_translate=this.view.offsetWidth-(this.__switch_view.offsetWidth+2*this.__switch_view.offsetLeft)-(parseInt(j.util.getElementStyle(this.view,"border-left-width"),10)+parseInt(j.util.getElementStyle(this.view,
"border-right-width"),10))},_updateSizeAndPos:function(){var a=this._size[0],b=this._pos[0],c=this._pos[1],d,f=0,e=0,g="auto",h="auto",j="auto",m=this._autosizing[0],n=this._autosizing[1];this.view.parentNode&&(f=this.view.parentNode.offsetWidth,e=this.view.parentNode.offsetHeight);d=4===m||1===m?a+"px":5===m||7===m?"auto":2===m||3===m||6===m||0===m?f?Math.round(100*(a/f))+"%":a+"px":"100%";if(4===m||5===m||6===m||7===m||2===m&&!f)g=b+"px";else if((2===m||0===m)&&f)g=Math.round(100*(b/f))+"%";if(1===
m||3===m||5===m||7===m)j=f-(b+a)+"px";if(4===n||5===n||6===n||7===n||2===n&&!e)h=c+"px";else if((2===n||0===n)&&e)h=Math.round(100*(c/e))+"%";this.view.style.width=d;this.view.style.removeProperty("height");this.view.style.left=g;this.view.style.top=h;this.view.style.right=j;this.view.style.bottom="auto"}};f.extendClass(Y,g);f.defineClassProperties(Y,{textOn:{set:function(a){if(this.__toggle_on_view){if(null===a||"undefined"===typeof a)a="";else if(f.isNumber(a))a=""+a;else if(!f.isString(a)){if(!a.toString)return;
a=a.toString()}this._text_on=a;f.setElementInnerText(this.__toggle_on_view,this._text_on)}else console.warn("vs.ui.Switch.textOff, none initialized comp: "+this.id)},get:function(){return this._text_on}},textOff:{set:function(a){if(this.__toggle_off_view){if(null===a||"undefined"===typeof a)a="";else if(f.isNumber(a))a=""+a;else if(!f.isString(a)){if(!a.toString)return;a=a.toString()}this._text_off=a;f.setElementInnerText(this.__toggle_off_view,this._text_off)}else console.warn("vs.ui.Switch.textOff, none initialized comp: "+
this.id)},get:function(){return this._text_off}},toggled:{set:function(a){var b=this;j.scheduleAction(function(){b._setToggle(a)})},get:function(){return this._toggled}}});q.Switch=Y;Q.NUMBERS={"0":0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9};Q.prototype={_mode:n.CSS_DEFAULT,_cell_height:44,_friction:0.003,_data:null,_slots_elements:null,_current_values:null,_selected_keys:null,_selected_values:null,destructor:function(){j.removePointerListener(this.view,h.POINTER_START,this,!1);j.removePointerListener(m,
h.POINTER_START,this,!1);j.removePointerListener(m,h.POINTER_MOVE,this,!1);f.removeAllElementChild(this._slots_view);delete this._data;delete this._slots_elements;delete this._frame_view;delete this._slots_view;delete this._current_values;g.prototype.destructor.call(this)},initComponent:function(){g.prototype.initComponent.call(this);this._data=[];this._slots_elements=[];this._mode=j.ui.View.getDeviceCSSCode();this._slots_view=this.view.querySelector(".slots");this._frame_view=this.view.querySelector(".frame");
switch(this._mode){case n.CSS_BLACKBERRY:this._cell_height=50;default:j.addPointerListener(this.view,h.POINTER_START,this);this._frame_border_width=0;break;case n.CSS_WP7:this._cell_height=83;case n.CSS_ANDROID:this._frame_view.parentElement.removeChild(this._frame_view)}},removeAllSlots:function(){delete this._data;this._data=[];this._remove_all_slots()},_remove_all_slots:function(){f.removeAllElementChild(this._slots_view);delete this._slots_elements;this._slots_elements=[];this._active_slot=null},
_render_slots:function(){for(var a=0;a<this._data.length;a++)this._render_a_slot(a)},_render_a_slot:function(a){var b,c,d,e=this._data[a];if(e){c=0;d=o.deviceConfiguration.os;e.length&&d==u.OS_WP7&&(c=Math.floor(100/e.length));d=m.createElement("ul");d.index=a;c&&f.setElementStyle(d,{width:c+"%"});c="";for(b in e.values)c+="<li>"+e.values[b]+"</li>";f.safeInnerHTML(d,c);if(this._mode===n.CSS_ANDROID){b=m.createElement("div");c=this._generate_button(a);b.appendChild(c[0]);var g=m.createElement("div");
g.className=e.style;g.appendChild(d);b.appendChild(g);b.appendChild(c[1])}else b=m.createElement("div"),b.className=e.style,b.appendChild(d);this._slots_view.appendChild(b);d.slotPosition=a;d.slotYPosition=0;switch(this._mode){case n.CSS_WP7:d.slotMaxScroll=this.view.clientHeight-d.clientHeight,j.addPointerListener(d,h.POINTER_START,this,!0)}d.style.webkitTransitionTimingFunction="cubic-bezier(0, 0, 0.2, 1)";L?C(d,"translate3d(0,0,0)"):C(d,"translate(0,0)");this._slots_elements.push(d);e.defaultValue&&
this.scrollToValue(a,e.defaultValue)}},_generate_button:function(a){var b=this._data[a].style.match("readonly"),c=m.createElement("div");b?c.className="button_incr readonly":(c.className="button_incr",f.setElementInnerText(c,"+"),c.slotPosition=a);b||(j.addPointerListener(c,h.POINTER_START,this),j.addPointerListener(c,h.POINTER_END,this),j.addPointerListener(c,h.POINTER_CANCEL,this));var d=m.createElement("div");b?d.className="button_decr readonly":(d.className="button_decr",f.setElementInnerText(d,
"-"),d.slotPosition=a);b||(j.addPointerListener(d,h.POINTER_START,this),j.addPointerListener(d,h.POINTER_END,this),j.addPointerListener(d,h.POINTER_CANCEL,this));return[c,d]},_buttonSelected:function(a){var b=a.target.slotPosition;switch(a.type){case h.POINTER_START:f.addClassName(a.target,"active");break;case h.POINTER_END:var c=this._slots_elements[b],d=c.slotYPosition;f.hasClassName(a.target,"button_decr")?(d+=44,0<d&&(d=0)):(d-=44,c=this.getSlotMaxScroll(c),d<c&&(d=c));this._scrollTo(b,d);case h.POINTER_CANCEL:f.removeClassName(a.target,
"active")}},addSlot:function(a,b,c){b||(b="");var d={};d.values=a;d.style=b;d.defaultValue=c;this._data.push(d);this._render_a_slot(this._data.length-1)},getSelectedValues:function(){if(this._current_values)return this._current_values;var a,b,c,d;this._selected_keys=[];this._selected_values=[];for(c=0;c<this._slots_elements.length;c++)if(a=this._slots_elements[c])for(d in a.removeEventListener(j.TRANSITION_END,this,!1),a.style.setProperty(j.TRANSITION_DURATION,"0"),b=this.getSlotMaxScroll(a),0<a.slotYPosition?
this._setPosition(c,0):a.slotYPosition<b&&this._setPosition(c,b),a=-Math.round(a.slotYPosition/this._cell_height),b=0,this._data[c].values){if(b==a){this._selected_keys.push(d);this._selected_values.push(this._data[c].values[d]);break}b++}return this._current_values={keys:this._selected_keys,values:this._selected_values}},_getSelectedValues:function(){if(this._current_values)return this._current_values;var a,b,c,d;this._selected_keys=[];this._selected_values=[];for(c=0;c<this._slots_elements.length;c++)if(a=
this._slots_elements[c])for(d in a=-Math.round(a.slotYPosition/this._cell_height),b=0,this._data[c].values){if(b==a){this._selected_keys.push(d);this._selected_values.push(this._data[c].values[d]);break}b++}return this._current_values={keys:this._selected_keys,values:this._selected_values}},scrollToValue:function(a,b){var c,d;d=this._slots_elements[a];var f=this._data[a];if(!d||!f)return!1;d.removeEventListener(j.TRANSITION_END,this,!1);d.style.setProperty(j.TRANSITION_DURATION,"0");d=0;for(c in f.values){if(c==
b)return c=d*this._cell_height,this._setPosition(a,c),!0;d-=1}return!1},_setPosition:function(a,b){delete this._current_values;var c=this._slots_elements[a];c.slotYPosition=b;L?C(c,"translate3d(0,"+b+"px,0)"):C(c,"translate(0,"+b+"px)")},_scrollTo:function(a,b,c){var d=this._slots_elements[a];d.style.setProperty(j.TRANSITION_DURATION,c?c+"ms":"100ms");this._setPosition(a,b?b:0);a=this.getSlotMaxScroll(d);0<d.slotYPosition||d.slotYPosition<a?d.addEventListener(j.TRANSITION_END,this,!1):(this._delegate&&
this._delegate.pickerViewSelectRow&&this._delegate.pickerViewSelectRow(this),this.propagate("change",this._getSelectedValues()),this.outPropertyChange())},handleEvent:function(a){if(this._mode===n.CSS_ANDROID)this._buttonSelected(a);else switch(a.type){case h.POINTER_START:this._scrollStart(a);break;case h.POINTER_MOVE:this._scrollMove(a);break;case h.POINTER_END:this._scrollEnd(a);break;case j.TRANSITION_END:this._backWithinBoundaries(a)}},__get_slot_index:function(a){var b=a.target;if("UL"===b.nodeName)return b.index;
if("LI"===b.nodeName)return b.parentElement.index;if(b===this._frame_view){this._frame_border_width=(b=this._getComputedStyle(this._frame_view))?parseInt(b.getPropertyValue("border-left-width")):0;var b=0,c=f.getBoundingClientRect(this._slots_view);this._mode==n.CSS_BLACKBERRY&&(b=8);a=a.clientX-c.left-this._frame_border_width-b;for(c=b=0;c<this._slots_elements.length;c++)if(b+=this._slots_elements[c].offsetWidth,a<b)return c}return p},_scrollStart:function(a){if(1<a.nbPointers)return!1;a.preventDefault();
a.stopPropagation();var b=a.targetPointerList[0];this._active_slot=p;switch(this._mode){default:this._active_slot=this.__get_slot_index(b);break;case n.CSS_WP7:this._active_slot=a.currentTarget.index,f.addClassName("dragging")}if("undefined"!==typeof this._active_slot){if(this._data[this._active_slot].style.match("readonly"))return j.removePointerListener(m,h.POINTER_MOVE,this,!0),j.removePointerListener(m,h.POINTER_END,this,!0),!1;var c=this._slots_elements[this._active_slot];c.slotMaxScroll=this.getSlotMaxScroll(c);
c.removeEventListener(j.TRANSITION_END,this,!1);c.style.setProperty(j.TRANSITION_DURATION,"0");if(L){var d=j.util.getElementMatrixTransform(c).m42;d!=c.slotYPosition&&this._setPosition(this._active_slot,d)}this.startY=b.pageY;this.scrollStartY=c.slotYPosition;this.scrollStartTime=a.timeStamp;j.addPointerListener(m,h.POINTER_MOVE,this,!0);j.addPointerListener(m,h.POINTER_END,this,!0);switch(this._mode){case n.CSS_WP7:case n.CSS_BLACKBERRY:this.__timer&&(clearTimeout(this.__timer),this.__timer=0),this.__elem_to_hide&&
this.__elem_to_hide!=c&&(f.removeClassName(this.__elem_to_hide.parentElement,"visible"),this.__elem_to_hide=null),f.addClassName(c.parentElement,"visible")}return!0}},_scrollMove:function(a){a.preventDefault();a.stopPropagation();var b=a.targetPointerList[0],c=b.pageY-this.startY,d=this._slots_elements[this._active_slot];if(0<d.slotYPosition||d.slotYPosition<d.slotMaxScroll)c/=2;this._setPosition(this._active_slot,d.slotYPosition+c);this.startY=b.pageY;80<a.timeStamp-this.scrollStartTime&&(this.scrollStartY=
d.slotYPosition,this.scrollStartTime=a.timeStamp)},_scrollEnd:function(a){j.removePointerListener(m,h.POINTER_MOVE,this,!0);j.removePointerListener(m,h.POINTER_END,this,!0);var b=this._slots_elements[this._active_slot],c,d=this;if(b){switch(this._mode){case n.CSS_BLACKBERRY:case n.CSS_WP7:b.parentElement&&(this.__elem_to_hide=b,this.__timer=setTimeout(function(){f.removeClassName(d.__elem_to_hide.parentElement,"visible");d.__elem_to_hide=null;d.removeClassName("dragging")},1E3))}if(0<b.slotYPosition||
b.slotYPosition<b.slotMaxScroll)return this._scrollTo(this._active_slot,0<b.slotYPosition?0:b.slotMaxScroll),!1;c=b.slotYPosition-this.scrollStartY;if(c<this._cell_height/1.5&&c>-this._cell_height/1.5)return b.slotYPosition%this._cell_height&&this._scrollTo(this._active_slot,Math.round(b.slotYPosition/this._cell_height)*this._cell_height,100),!1;a=2*c/(a.timeStamp-this.scrollStartTime)/this._friction;c=this._friction/2*a*a;0>a&&(a=-a,c=-c);c=b.slotYPosition+c;0<c?(c/=2,a/=3,c>this.view.clientHeight/
4&&(c=this.view.clientHeight/4)):c<b.slotMaxScroll?(c=(c-b.slotMaxScroll)/2+b.slotMaxScroll,a/=3,c<b.slotMaxScroll-this.view.clientHeight/4&&(c=b.slotMaxScroll-this.view.clientHeight/4)):c=Math.round(c/this._cell_height)*this._cell_height;this._scrollTo(this._active_slot,Math.round(c),Math.round(a));return!0}},getSlotMaxScroll:function(a){switch(this._mode){default:return this.view.clientHeight-a.clientHeight-66;case n.CSS_IOS:return this.view.clientHeight-a.clientHeight-86;case n.CSS_SYMBIAN:return this.view.clientHeight-
a.clientHeight-80;case n.CSS_BLACKBERRY:return this.view.clientHeight-a.clientHeight-93;case n.CSS_WP7:return this.view.clientHeight-a.clientHeight-103;case n.CSS_ANDROID:return this.view.clientHeight-a.clientHeight-121}},_backWithinBoundaries:function(a){a=a.target;a.removeEventListener(j.TRANSITION_END,this,!1);slotMaxScroll=this.getSlotMaxScroll(a);this._scrollTo(a.slotPosition,0<a.slotYPosition?0:slotMaxScroll,150);return!1}};f.extendClass(Q,g);f.defineClassProperties(Q,{delegate:{set:function(a){this._delegate=
a}},data:{set:function(a){var b,c,d,e;if(f.isArray(a)){this.removeAllSlots();for(e=0;e<a.length;e++)b=a[e],c=b.values,d=b.style,b=b.defaultValue,c&&this.addSlot(c,d,b)}}},selectedKeys:{get:function(){this._current_values||this.getSelectedValues();return this._selected_keys}},selectedValues:{get:function(){this._current_values||this.getSelectedValues();return this._selected_values}}});q.Picker=Q;var ua={},ia={},ja=null;Z.prototype={_href:null,_view_box:null,__set_svg_doc:function(a,b){function c(a){var b=
m.createElementNS("http://www.w3.org/2000/svg","use");b.setAttributeNS("http://www.w3.org/1999/xlink","href","#"+a);return b}if(a){var d=m.createElementNS("http://www.w3.org/2000/svg","svg");f.removeAllElementChild(this.view);this.view.appendChild(d);this._view_box&&(this.viewBox=this._view_box);if(b)d.appendChild(c(b));else for(var e=a.childNodes,g=0;g<e.length;g++){var h=e[g];1===h.nodeType&&"defs"!==h.nodeName&&(b=h.getAttribute("id"),b||(b=j.core.createId(),h.setAttribute("id",b)),d.appendChild(c(b)))}}}};
f.extendClass(Z,g);f.defineClassProperties(Z,{href:{set:function(a){if(f.isString(a)){this._href=a;var b,c;-1!==a.indexOf("#")?(b=a.substr(0,a.indexOf("#")),c=a.substring(a.indexOf("#")+1)):b=this._href;(a=ua[b])?this.__set_svg_doc(a,c):ya(b,c,this)}},get:function(){return this._href}},contentData:{set:function(a){f.isString(a)&&(f.removeAllElementChild(this.view),this.__object&&delete this.__object,f.safeInnerHTML(this.view,a),this._href=p)}},viewBox:{set:function(a){if(f.isArray(a)&&4==a.length){this._view_box=
a;var b=this.view.querySelector("svg");b&&(b.setAttribute("width",a[2]),b.setAttribute("height",a[3]),b.setAttribute("viewBox",a.join(" ")))}}}});q.SVGView=Z;B.DEFAULT_TYPE="default";B.BAR_TYPE="bar";B.HORIZONTAL=0;B.VERTICAL=1;B.prototype={_type:B.DEFAULT_TYPE,_is_toggle_buttons:!0,_items:null,_selected_index:-1,_div_list:null,_orientation:B.HORIZONTAL,destructor:function(){this._cleanButtons();g.prototype.destructor.call(this)},_cleanButtons:function(){if(this.view)for(f.removeAllElementChild(this.view);this._div_list.length;)j.removePointerListener(this._div_list[0],
h.POINTER_START,this),this._div_list.remove(0)},_renderButtons:function(){if(this.view){this._cleanButtons();var a="",b=o.deviceConfiguration.os;this._items.length&&b==u.OS_WP7&&(a=Math.floor(100/this._items.length));b=m.createElement("div");this.view.appendChild(b);for(var c=0,d=this._items.length;c<d;c++){var e=m.createElement("div");e._index=c;f.setElementInnerText(e,this._items[c]);a&&f.setElementStyle(e,{width:a+"%"});j.addPointerListener(e,h.POINTER_START,this);this._div_list.push(e);b.appendChild(e)}this.orientation=
this._orientation}},initComponent:function(){g.prototype.initComponent.call(this);this._items=[];this._div_list=[];this._renderButtons();this.selectedIndex=this._selected_index;this.type=this._type},handleEvent:function(a){var b;if(a.type===h.POINTER_START&&!(1<a.nbPointers)){b=a.target;b.tagName||(b=b.parentElement);if(this._selected_index===b._index)return!1;a.stopPropagation();a.preventDefault();this.selectedIndex=b._index;this.propagate("select",{index:this._selected_index,item:this._items[this._selected_index]});
this.outPropertyChange();return!1}}};f.extendClass(B,g);f.defineClassProperties(B,{items:{set:function(a){var b,c;if(f.isArray(a)&&a.length){this._items.removeAll();b=0;for(c=a.length;b<c;b++)a[b]&&this._items.push(a[b].toString());this._renderButtons();this._is_toggle_buttons&&(this.selectedIndex=this._selected_index)}},get:function(){return this._text}},selectedIndex:{set:function(a){if(f.isNumber(a)&&!(0>a||a>=this._div_list.length)){var b=this._div_list[this._selected_index];b&&f.removeClassName(b,
"selected");this._selected_index=a;(b=this._div_list[this._selected_index])&&f.addClassName(b,"selected");if(!this._is_toggle_buttons){var c=this;this.__button_time_out=setTimeout(function(){f.removeClassName(b,"selected");c.__button_time_out=0;c._selected_index=-1},g.UNSELECT_DELAY)}}},get:function(){return this._selected_index}},type:{set:function(a){f.isString(a)&&(this._type&&this.removeClassName(this._type),this._type=a,this.addClassName(this._type))},get:function(){return this._type}},isToggleButtons:{set:function(a){this._is_toggle_buttons=
a?!0:!1},get:function(){return this._is_toggle_buttons}},orientation:{set:function(a){a!==B.HORIZONTAL&&a!==B.VERTICAL||(this._orientation=a,0===this._orientation?(this.removeClassName("vertical"),this.addClassName("horizontal")):(this.addClassName("vertical"),this.removeClassName("horizontal")))},get:function(){return this._orientation}}});q.SegmentedButton=B;g.prototype.html_template="<div class='vs_ui_view' x-hag-hole='children'></div>";s.prototype.html_template="<div class='vs_ui_splitview'>  <div x-hag-hole='second_panel'></div>  <div x-hag-hole='main_panel'></div></div>";
r.prototype.html_template="<div class='vs_ui_scrollview'>  <div x-hag-hole='top_bar'></div>  <div class='content' x-hag-hole='children'></div>  <div x-hag-hole='bottom_bar'></div></div>";y.prototype.html_template="<div class='vs_ui_scrollimageview'><img class='content'/></div>";T.prototype.html_template="<textarea class='vs_ui_textarea'></textarea>";z.prototype.html_template="<div class='vs_ui_button'><div></div></div>";w.prototype.html_template="<div class='vs_ui_list'><ul x-hag-hole='item_children'/></div>";
I.prototype.html_template="<div class='vs_ui_navigationbar' x-hag-hole='children'></div>";e.prototype.html_template="<div class='vs_ui_toolbar'>  <div x-hag-hole='children'></div></div>";A.prototype.html_template="<div class='vs_ui_canvas'><canvas class='canvas_inner'></canvas></div>";E.prototype.html_template="<div class='vs_ui_progressbar'><div></div></div>";W.prototype.html_template="<div class='vs_ui_textlabel'></div>";U.prototype.html_template="<div class='vs_ui_radiobutton'><fieldset x-hag-hole='item_children' /></div>";
D.prototype.html_template="<div class='vs_ui_combobox'></div>";V.prototype.html_template="<div class='vs_ui_checkbox'><fieldset x-hag-hole='item_children' /></div>";J.prototype.html_template="<div class='vs_ui_slider'><div class='handle'></div></div>";X.prototype.html_template="<img class='vs_ui_imageview'></img>";F.prototype.html_template="<div class='vs_ui_inputfield'><input type='text' value='' placeholder='type ...' incremental='incremental'/><div class='clear_button'/></div>";v.prototype.html_template=
"<div class='vs_ui_popover'>  <div class='header' x-hag-hole='header'></div>  <div class='center' x-hag-hole='children'></div>  <div class='footer' x-hag-hole='footer'></div>  <div class='arrow'></div></div>";Y.prototype.html_template="<div class='vs_ui_switch'>  <div>    <div class='toggle_on'></div>    <div class='toggle_off'></div>     <div class='switch'></div>   </div></div>";Q.prototype.html_template="<div class='vs_ui_picker'>  <div class='slots'></div>  <div class='frame'></div></div>";B.prototype.html_template=
"<div class='vs_ui_segmentedbutton'></div>";Z.prototype.html_template="<div class='vs_ui_svgview'></div>";f.defineProperty(m,"preventScroll",{get:function(){return m._preventScroll},set:function(a){(m._preventScroll=a)?(m.addEventListener("touchstart",S,!1),m.addEventListener("touchmove",S,!1),m.addEventListener("scroll",S,!1),o.scrollTo(0,0)):(m.removeEventListener("touchstart",S,!1),m.removeEventListener("touchmove",S,!1),m.removeEventListener("scroll",S,!1))}})})(window);
